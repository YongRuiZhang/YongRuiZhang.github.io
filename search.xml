<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>网络编程</title>
      <link href="/posts/4131986683.html"/>
      <url>/posts/4131986683.html</url>
      
        <content type="html"><![CDATA[<details>此博客是我看 B站 韩顺平 老师 的课程做的笔记</details><h1 id="InetAddress类-获取IP地址"><a href="#InetAddress类-获取IP地址" class="headerlink" title="InetAddress类(获取IP地址)"></a>InetAddress类(获取IP地址)</h1><h2 id="使用代码"><a href="#使用代码" class="headerlink" title="使用代码"></a>使用代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.UnknownHostException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">API_</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> UnknownHostException &#123;</span><br><span class="line">        <span class="comment">//获取本机的InetAddress对象</span></span><br><span class="line">        <span class="type">InetAddress</span> <span class="variable">localHost</span> <span class="operator">=</span> InetAddress.getLocalHost();</span><br><span class="line">        System.out.println(<span class="string">&quot;localHost = &quot;</span> + localHost);<span class="comment">//Zhangyr/192.168.57.1</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//根据指定主机名 获取 InetAddress 对象</span></span><br><span class="line">        <span class="type">InetAddress</span> <span class="variable">host1</span> <span class="operator">=</span> InetAddress.getByName(<span class="string">&quot;Zhangyr&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;host1 = &quot;</span> + host1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//根据域名返回 InetAddress 对象，比www.baidu.com</span></span><br><span class="line">       <span class="type">InetAddress</span> <span class="variable">host2</span> <span class="operator">=</span> InetAddress.getByName(<span class="string">&quot;www.baidu.com&quot;</span>);<span class="comment">//!不联网就要报错</span></span><br><span class="line">       System.out.println(<span class="string">&quot;host2 = &quot;</span> + host2);<span class="comment">//host2 = www.baidu.com/14.215.177.38</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//通过 InetAddress 对象，获取对应的地址</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">hostAddress</span> <span class="operator">=</span> host1.getHostAddress();</span><br><span class="line">        System.out.println(<span class="string">&quot;host1 对应的IP = &quot;</span> + hostAddress);<span class="comment">//host1 对应的IP = 192.168.57.1</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//通过 InetAddress 对象，获取对应的主机名/域名</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">hostName</span> <span class="operator">=</span> host2.getHostName();</span><br><span class="line">       System.out.println(<span class="string">&quot;host2 对应的主机名/域名 = &quot;</span> + hostName);<span class="comment">//host2 对应的主机名/域名 = www.baidu.com</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Socket类-实现网络编程"><a href="#Socket类-实现网络编程" class="headerlink" title="Socket类(实现网络编程)"></a>Socket类(实现网络编程)</h1><h2 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h2><ol><li>套接字（Sock）开发网络引用程序被广泛采用，以至于称为事实上的标准</li><li>通信的两端都要右Socket，是两台机器间通信的端口</li><li>网络通信其实就是Socket间通信</li><li>Socket允许程序把网络连接当成一个流，数据在两个Socket间通过IO传输</li><li>一般主动发起通信的应用程序属客户端，等待通信请求的为服务端</li></ol><p>通讯时读写数据：<br>socket.getOutputStream()<br>socket.getInputStream()</p><h2 id="TCP编程和UDP编程"><a href="#TCP编程和UDP编程" class="headerlink" title="TCP编程和UDP编程"></a>TCP编程和UDP编程</h2><p>网络编程一般有TCP编程（稳定，可靠，速度慢）和UDP编程（不稳定、不可靠、速度快）两种</p><h3 id="TCP网络通信编程"><a href="#TCP网络通信编程" class="headerlink" title="TCP网络通信编程"></a>TCP网络通信编程</h3><ol><li>基于客户端——服务端的网络通信</li><li>底层使用的是TCP/IP协议</li><li>应用场景举例：客户端发送数据，服务端接收并显示</li></ol><p><strong>一定要关闭socket，否者后面可能会导致连接不上</strong></p><h4 id="TCP字节流编程"><a href="#TCP字节流编程" class="headerlink" title="TCP字节流编程"></a>TCP字节流编程</h4><h5 id="ServerSocket类："><a href="#ServerSocket类：" class="headerlink" title="ServerSocket类："></a>ServerSocket类：</h5><p>此类实现服务器套接字。服务器套接字等待请求通过网络传入。它基于该请求执行某些操作，然后可能向请求者返回结果。<br>服务器套接字的实际工作由 SocketImpl 类的实例执行。应用程序可以更改创建套接字实现的套接字工厂来配置它自身，从而创建适合本地防火墙的套接字。<br>ServerSocket与Socket的不同，ServerSocket的每一个accept()都可连接到一个方法，可以连接很多Socket也是<strong>多并发的一个体现</strong></p><h5 id="Socket类："><a href="#Socket类：" class="headerlink" title="Socket类："></a>Socket类：</h5><p>此类实现客户端套接字（也可以就叫“套接字”）。套接字是两台机器间通信的端点。<br>套接字的实际工作由 SocketImpl 类的实例执行。应用程序通过更改创建套接字实现的套接字工厂可以配置它自身，以创建适合本地防火墙的套接字。<br>编程练习1</p><ol><li>编写一个服务器端和一个客户端</li><li>服务器端在 9999 端口监听</li><li>客户端连接到服务器端，发送“hello,server”,然后退出</li><li>服务器端接收到 客户端发送的消息，输出，并退出</li></ol><h6 id="代码展示"><a href="#代码展示" class="headerlink" title="代码展示"></a>代码展示</h6><p>肯定要有两个程序</p><p><strong>服务端程序</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * todo 服务端</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SocketTCP01Server</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// todo 在本机的9999端口监听，等待连接</span></span><br><span class="line">        <span class="comment">//? ServerSocket(int port) 创建绑定到特定端口的服务器套接字。</span></span><br><span class="line">        <span class="comment">//! 要求本机没有其他程序或者服务在监听9999</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">9999</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;服务端9999正在等待连接...&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// todo 没有客户端连接程序时，程序会堵塞，等待连接</span></span><br><span class="line">        <span class="comment">//? 如果有客户端连接，则会返回 Socket 对象，程序继续</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept();</span><br><span class="line">        System.out.println(<span class="string">&quot;服务端成功连接&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// todo 读取客户端数据</span></span><br><span class="line">        <span class="comment">//? 得到一个于socket相关的输入流</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">iis</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">        <span class="comment">//? 读入数据</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">data_read</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">byte</span>[] buf = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">while</span>((data_read = iis.read(buf)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(buf,<span class="number">0</span>,data_read));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// todo 关闭流和socket</span></span><br><span class="line">        iis.close();</span><br><span class="line">        socket.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;服务端退出...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>客户端程序</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * todo 客户端</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SocketTCP01Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// todo 连接服务器</span></span><br><span class="line">        <span class="comment">//? Socket(InetAddress address, int port) 创建一个流套接字并将其连接到指定 IP 地址的指定端口号。</span></span><br><span class="line">        <span class="comment">//? 连接 9999 端口 如果连接成功 返回一个Socket对象</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(InetAddress.getLocalHost(),<span class="number">9999</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;客户端 socket 返回 = &quot;</span> + socket.getClass());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// todo 发送Hello,Server 到服务端</span></span><br><span class="line">        <span class="comment">//? 得到一个和socket想关联的输出流，一定时要和socket相关联的输出流</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">sos</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">        <span class="comment">//? 通过得到的输出流 ，将要写的话写到数据通道</span></span><br><span class="line">        sos.write(<span class="string">&quot;Hello,server&quot;</span>.getBytes());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// todo 关闭流对象和socket，必须关闭！！！</span></span><br><span class="line">        sos.close();</span><br><span class="line">        socket.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;客户端退出...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h6><p>因为是在同一台电脑上操作,所以客户端的IP地址是InetAddress.getLocalHost()也就是本地地址,如果要与别的电脑连接,就传入”xxx.xxx.xxx.xxx”</p><h5 id="编程练习2"><a href="#编程练习2" class="headerlink" title="编程练习2"></a>编程练习2</h5><p>用字节流</p><ol><li>编写一个服务端和一个客户端</li><li>服务端在9999端口监听</li><li>客户端连接到服务器端,发送”Hello,Server”,并接收服务器端回发的”Hello,Client”,再退出</li><li>服务器端接收到客户端发送的信息,输出,再发送”Hello,Client”,再退出</li></ol><p><strong>这道题的重点是发送完消息和接收完消息后都应该要有一个结束标记,即socket.shutdownOutput();socket.shutdownInput()</strong><br><strong>注意: 流要最后一起关闭,不是用完就关闭,否则会造成线程问题</strong></p><h6 id="代码展示-1"><a href="#代码展示-1" class="headerlink" title="代码展示"></a>代码展示</h6><p><strong>服务端代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SocketTCP02Server</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">9999</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;服务端等待连接&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept();</span><br><span class="line">        System.out.println(<span class="string">&quot;服务端已连接&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// todo 接收数据</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">        <span class="type">int</span> <span class="variable">read_length</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">byte</span>[] buf = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">while</span>((read_length = inputStream.read(buf)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(buf,<span class="number">0</span>,read_length));</span><br><span class="line">        &#125;</span><br><span class="line">        socket.shutdownInput();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// todo 获取socket相关联的OutputStream()</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">        outputStream.write(<span class="string">&quot;Hello,Client&quot;</span>.getBytes());</span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//!最后一起把流关掉</span></span><br><span class="line">        inputStream.close();</span><br><span class="line">        outputStream.close();</span><br><span class="line">        socket.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;服务端退出&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>客户端代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SocketTCP02Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(InetAddress.getLocalHost(), <span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// todo 发送消息</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">        outputStream.write(<span class="string">&quot;Hello,Server&quot;</span>.getBytes());</span><br><span class="line"></span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// todo 接收消息</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">        <span class="type">int</span> <span class="variable">read_length</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">byte</span>[] buf = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">while</span>((read_length = inputStream.read(buf)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(buf,<span class="number">0</span>,read_length));</span><br><span class="line">        &#125;</span><br><span class="line">        socket.shutdownInput();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//!最后一起把流关掉</span></span><br><span class="line">        outputStream.close();</span><br><span class="line">        inputStream.close();</span><br><span class="line">        socket.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;客户端退出...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="编程练习3"><a href="#编程练习3" class="headerlink" title="编程练习3"></a>编程练习3</h5><p><strong>实际上就是第二个题,但是要求用字符流</strong></p><ol><li>编写一个服务端和一个客户端</li><li>服务端在9999端口监听</li><li>客户端连接到服务端,发送”Hello,Server”,并接收服务端回发的”Hello,Client”,再退出</li><li>服务端接收接收到客户端发送的信息,输出,再发送”Hello,Client”,再退出</li></ol><p><strong>需要使用转换流,即OutputStream-&gt;Writer;InputStream-&gt;Reader。并且，可以使用Writer.newLine()来作为结束标记,但是,需要使用readLine()来读取[这就相当于是一种协议了]</strong></p><h6 id="代码展示-2"><a href="#代码展示-2" class="headerlink" title="代码展示"></a>代码展示</h6><p><strong>服务端代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SocketTCP03Server</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// todo 连接</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">9999</span>);</span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// todo 接收数据</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">        <span class="type">InputStreamReader</span> <span class="variable">inputStreamReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(inputStream);</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(inputStreamReader);</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> bufferedReader.readLine();</span><br><span class="line">        System.out.println(s);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// todo 输出数据</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">        <span class="type">OutputStreamWriter</span> <span class="variable">outputStreamWriter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(outputStream);</span><br><span class="line">        <span class="type">BufferedWriter</span> <span class="variable">bufferedWriter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(outputStreamWriter);</span><br><span class="line">        bufferedWriter.write(<span class="string">&quot;Hello,Client&quot;</span>);</span><br><span class="line">        bufferedWriter.newLine();</span><br><span class="line">        bufferedWriter.flush();<span class="comment">//!一定要刷新，否则读不进去</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//!关流</span></span><br><span class="line">        bufferedWriter.close();</span><br><span class="line">        bufferedReader.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>客户端代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SocketTCP03Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(InetAddress.getLocalHost(), <span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// todo 输出数据</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">        <span class="type">OutputStreamWriter</span> <span class="variable">outputStreamWriter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(outputStream);</span><br><span class="line">        <span class="type">BufferedWriter</span> <span class="variable">bufferedWriter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(outputStreamWriter);</span><br><span class="line">        bufferedWriter.write(<span class="string">&quot;Hello,Server&quot;</span>);</span><br><span class="line">        bufferedWriter.newLine();</span><br><span class="line">        bufferedWriter.flush();<span class="comment">//!一定要刷新，否则读不进去</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// todo 接收数据</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">        <span class="type">InputStreamReader</span> <span class="variable">inputStreamReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(inputStream);</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(inputStreamReader);</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> bufferedReader.readLine();</span><br><span class="line">        System.out.println(s);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//!关流</span></span><br><span class="line">        bufferedWriter.close();</span><br><span class="line">        bufferedReader.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="TCP文件编程"><a href="#TCP文件编程" class="headerlink" title="TCP文件编程"></a>TCP文件编程</h4><h5 id="编程练习1"><a href="#编程练习1" class="headerlink" title="编程练习1"></a>编程练习1</h5><ol><li>编写一个服务端和一个客户端</li><li>服务端在9999端口监听</li><li>客户端连接到服务端,发送一张图片,之后退出</li><li>服务器端接收到客户端发送的图片,保存到e盘下</li><li>该程序需要使用<code>StreamUtils.java;</code>、 <code>BufferedInputStream</code>和<code>BufferedOutputStream</code></li></ol><h6 id="代码展示-3"><a href="#代码展示-3" class="headerlink" title="代码展示"></a>代码展示</h6><p><strong>服务端代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TCPFileUploadServer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// todo 服务端再本地监听9999</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">9999</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;服务端在9999端口监听...&quot;</span>);</span><br><span class="line">        <span class="comment">// todo 等待连接</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept();</span><br><span class="line">        System.out.println(<span class="string">&quot;等待连接...&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// todo 读取客户端发送的数据</span></span><br><span class="line">        <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(socket.getInputStream());</span><br><span class="line">        <span class="comment">// todo 读取bis,拿到一个字节数组</span></span><br><span class="line">        <span class="type">byte</span>[] bytes = StreamUtils.streamToByteArray(bis);</span><br><span class="line">        <span class="comment">// todo 得到 bytes 数组,存入文件</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> <span class="string">&quot;src\\鹅国小酒馆3.mp4&quot;</span>;</span><br><span class="line">        <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(filePath));</span><br><span class="line">        bos.write(bytes);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//!关闭流</span></span><br><span class="line">        bos.close();</span><br><span class="line">        bis.close();</span><br><span class="line">        socket.close();</span><br><span class="line">        serverSocket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>客户端代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TCPFileUploadClient</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// todo 客户端连接服务端</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(InetAddress.getLocalHost(), <span class="number">9999</span>);</span><br><span class="line">        <span class="comment">// todo 创建读取文件的的输入流</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> <span class="string">&quot;e:\\鹅国小酒馆.mp4&quot;</span>;</span><br><span class="line">        <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(filePath));</span><br><span class="line">        <span class="comment">// todo 把文件读到字节数组中</span></span><br><span class="line">        <span class="type">byte</span>[] bytes = StreamUtils.streamToByteArray(bis);<span class="comment">//bytes就是filePath对应的字节数组</span></span><br><span class="line">        <span class="comment">// todo 通过socket获取输出流,将bytes数据发给服务端</span></span><br><span class="line">        <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(socket.getOutputStream());</span><br><span class="line">        bos.write(bytes);<span class="comment">//将文件对应的字节数组发送出去</span></span><br><span class="line">        bis.close();</span><br><span class="line">        socket.shutdownOutput();<span class="comment">//结束标记</span></span><br><span class="line"></span><br><span class="line">        bos.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="编程练习2-1"><a href="#编程练习2-1" class="headerlink" title="编程练习2"></a>编程练习2</h5><p><u>是编程练习1的进阶</u></p><ol><li>编写一个服务端和一个客户端</li><li>服务端在9999端口监听</li><li>客户端连接到服务端,发送一张图片</li><li>服务器端接收到客户端发送的图片,保存到e盘,发送”收到图片”再退出</li><li>客户端接收到服务器端发送的”收到图片”后再退出</li><li>该程序需要使用<code>StreamUtils.java;</code>、 <code>BufferedInputStream</code>和<code>BufferedOutputStream</code></li></ol><h6 id="代码展示-4"><a href="#代码展示-4" class="headerlink" title="代码展示"></a>代码展示</h6><p><strong>服务端代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TCPFileUploadServer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// todo 服务端再本地监听9999</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">9999</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;服务端在9999端口监听...&quot;</span>);</span><br><span class="line">        <span class="comment">// todo 等待连接</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept();</span><br><span class="line">        System.out.println(<span class="string">&quot;等待连接...&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// todo 读取客户端发送的数据</span></span><br><span class="line">        <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(socket.getInputStream());</span><br><span class="line">        <span class="comment">// todo 读取bis,拿到一个字节数组</span></span><br><span class="line">        <span class="type">byte</span>[] bytes = StreamUtils.streamToByteArray(bis);</span><br><span class="line">        <span class="comment">// todo 得到 bytes 数组,存入文件</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> <span class="string">&quot;e:\\鹅国小酒馆3.mp4&quot;</span>;</span><br><span class="line">        <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(filePath));</span><br><span class="line">        bos.write(bytes);</span><br><span class="line">        bos.close();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// todo 向客户端回复&quot;收到文件&quot;</span></span><br><span class="line">        <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(socket.getOutputStream()));</span><br><span class="line">        bw.write(<span class="string">&quot;收到图片&quot;</span>);</span><br><span class="line">        bw.flush();<span class="comment">//!刷新换行符</span></span><br><span class="line">        socket.shutdownOutput();<span class="comment">//结束标记</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//!关闭流</span></span><br><span class="line">        bw.close();</span><br><span class="line">        bis.close();</span><br><span class="line">        socket.close();</span><br><span class="line">        serverSocket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>客户端代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TCPFileUploadClient</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// todo 客户端连接服务端</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(InetAddress.getLocalHost(), <span class="number">9999</span>);</span><br><span class="line">        <span class="comment">// todo 创建读取文件的的输入流</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> <span class="string">&quot;e:\\鹅国小酒馆.mp4&quot;</span>;</span><br><span class="line">        <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(filePath));</span><br><span class="line">        <span class="comment">// todo 把文件读到字节数组中</span></span><br><span class="line">        <span class="type">byte</span>[] bytes = StreamUtils.streamToByteArray(bis);<span class="comment">//bytes就是filePath对应的字节数组</span></span><br><span class="line">        <span class="comment">// todo 通过socket获取输出流,将bytes数据发给服务端</span></span><br><span class="line">        <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(socket.getOutputStream());</span><br><span class="line">        bos.write(bytes);<span class="comment">//将文件对应的字节数组发送出去</span></span><br><span class="line">        bis.close();</span><br><span class="line">        socket.shutdownOutput();<span class="comment">//结束标记</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// todo 接收服务端消息</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> StreamUtils.streamToString(inputStream);</span><br><span class="line">        System.out.println(s);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//!关闭流</span></span><br><span class="line">        inputStream.close();</span><br><span class="line">        bos.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="netstat指令"><a href="#netstat指令" class="headerlink" title="netstat指令"></a>netstat指令</h4><ol><li>netstat -an可以查看当前主机网络情况,包括<strong>端口监听情况</strong>和<strong>网络连接情况</strong></li><li>netstat -an|more 可以分页显示</li><li>netstat -anb|more 可以分页显示并且可以显示使用的程序</li><li>要求在dos控制台下执行</li></ol><p>其中本地地址冒号后面的数字代表端口(一般都是服务端),外部地址一般是客户端的IP地址(127.0.0.1还是表示本地地址),状态表示是否是在监听<br>运行服务端程序。</p><h5 id="TCP连接秘密"><a href="#TCP连接秘密" class="headerlink" title="TCP连接秘密"></a>TCP连接秘密</h5><p>当连接上后,客户端也会有一个端口(这个端口是随机的),假设使用客户端与服务端连接后,上图中能找到一个外部地址与本地地址为0.0.0.0:9999连接的地址,后面的冒号代表地址,并且状态为ESTABLISHED</p><h3 id="UDP网络编程"><a href="#UDP网络编程" class="headerlink" title="UDP网络编程"></a>UDP网络编程</h3><h4 id="基本介绍-1"><a href="#基本介绍-1" class="headerlink" title="基本介绍"></a>基本介绍</h4><ol><li>类<code>DatagramSocket</code> 和 <code>DatagramPacket</code>[数据包/数据报] 实现了基于UDP协议网络程序</li><li>UDP数据报通过数据报套接字 DatagramSocket发送和接收,系统不保证UDP数据报一定能够安全送到目的地,也不能确定什么时候可以送达</li><li>DatagramPacket对象封装了UDP数据报,在数据报中包含了发送端口的IP地址和的端口号以及接收端口的IP地址和端口号</li><li>UDP协议中每个数据报都给出了完整的地址信息,因此无需建立发送方和接收方的连接</li></ol><h4 id="编程练习"><a href="#编程练习" class="headerlink" title="编程练习"></a>编程练习</h4><ol><li>编写一个接收端A,和一个发送端B</li><li>接收端A在9999端口等待接收数据</li><li>发送端B向接收端A发送数据,发送”Hello,明天吃火锅”</li><li>接收端A接收到发送端B的数据后,回复”好的,明天见”,退出</li><li>发送端B接收到数据后再退出</li></ol>]]></content>
      
      
      <categories>
          
          <category> Java基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java基础 </tag>
            
            <tag> 网络编程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDBC</title>
      <link href="/posts/2414116852.html"/>
      <url>/posts/2414116852.html</url>
      
        <content type="html"><![CDATA[<details>此笔记是 B站 动力结点 老杜 老师的课程笔记</details><blockquote><p>可能您学了MySQL数据库之后有疑问了，我操作数据库都是在命令行里，终端里控制的数据库，那我怎么讲数据库应用到网站上呢。这里就讲解释，数据库可以用Java程序控制，即JDBC，当然数据库也可以由python（模块包pymysql）等控制。这些编程语言本身就可以做游戏和网站，在登录或执行其他操作时就会调用数据库。</p></blockquote><h1 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h1><p><strong>Java DataBase Connectivity</strong>(Java语言连接数据库)</p><p>本质是:由SUN公司制定的 一套 接口(interface)(属于面向接口编程)<br>    <code>java.sql.*;</code></p><h2 id="可以在api参考文档中看的内容"><a href="#可以在api参考文档中看的内容" class="headerlink" title="可以在api参考文档中看的内容"></a>可以在api参考文档中看的内容</h2><p>Java.sql包</p><div class="table-container"><table><thead><tr><th>接口</th><th>用途</th></tr></thead><tbody><tr><td>Connection接口</td><td>获取连接 getConnection()</td></tr><tr><td>Driver接口</td><td>获取连接DriverManager()</td></tr><tr><td>ResultSet接口</td><td>执行DQL语句（select）</td></tr><tr><td>Statement接口</td><td>获取数据库操作对象 createStatement()</td></tr></tbody></table></div><h2 id="JDBC的六个步骤-背下来"><a href="#JDBC的六个步骤-背下来" class="headerlink" title="JDBC的六个步骤(背下来)"></a>JDBC的六个步骤(背下来)</h2><ul><li><p>注册驱动<br>  （作用：告诉Java程序，即将连接的是哪个品牌的数据库）</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Driver;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法一</span></span><br><span class="line"><span class="type">Driver</span> <span class="variable">driver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">com</span>.mysql.jdbc.Driver;  <span class="comment">//多态，父类型引用指向子类型对象</span></span><br><span class="line">DriverManager.registerDriver(driver);</span><br><span class="line"><span class="comment">// 记得try catch受检异常</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//方法二（类加载时会调用，使用反射机制）（常用）</span></span><br><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);  <span class="comment">//固定写法，加载驱动，反射机制</span></span><br></pre></td></tr></table></figure></li><li><p>建立连接<br>  （表示JVM的进程和数据库进程之间的通道打开了，属于进程间通信，使用完一定要关闭）</p><pre><code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 写在try catch内</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// url：统一资源定位符（网络中某个资源的绝对路径）</span></span><br><span class="line"><span class="comment">// jdbc:mysql://表示协议，通信协议是通信之前就提前定好的数据传送格式</span></span><br><span class="line"><span class="comment">// localhost或者127.0.0.1表示IP地址</span></span><br><span class="line"><span class="comment">// 3306表示MySQL端口号</span></span><br><span class="line"><span class="comment">// useUnicode=true(支持中文编码)</span></span><br><span class="line"><span class="comment">// characterEncoding=utf8（设置中文字符集utf8）</span></span><br><span class="line"><span class="comment">// useSSL=true（使用安全的连接）</span></span><br><span class="line"><span class="comment">//jbdc:mysql:// 协议</span></span><br><span class="line"><span class="comment">//127.0.0.1   IP地址</span></span><br><span class="line"><span class="comment">//3306        端口</span></span><br><span class="line"><span class="comment">//具体数据库实例名</span></span><br><span class="line">String url=<span class="string">&quot;jdbc:mysql://localhost:3306/数据库名?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true&quot;</span>;</span><br><span class="line">String user=<span class="string">&quot;root&quot;</span>;</span><br><span class="line">String password=<span class="string">&quot;123456&quot;</span>;</span><br><span class="line"><span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(url,user,password);  <span class="comment">// 数据库连接对象</span></span><br></pre></td></tr></table></figure></code></pre></li><li><p>获得数据库操作对象<br>  （专门执行sql语句的对象）</p><pre><code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="comment">// 写在try catch内</span></span><br><span class="line"><span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement();</span><br></pre></td></tr></table></figure></code></pre></li><li><p>执行SQL语句<br>  statement.execteUpdate()执行DML语句（insert、delete、update）<br>  statement.excuteQuery()执行DQL语句（select）<br>  （主要执行DQL和DML等）</p><pre><code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 写在try catch内</span></span><br><span class="line">    </span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;INSERT TNTO 表名(字段名1,字段名2) VALUES(值1,值2)&quot;</span>;</span><br><span class="line"><span class="comment">// 专门执行DML语句的（INSERT、DELETE、UPDATE）</span></span><br><span class="line"><span class="comment">// 返回值count是影响数据库中的记录条数</span></span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> statement.executeUpdate(sql);</span><br></pre></td></tr></table></figure></code></pre></li><li><p>处理查询集<br>  （只有当第4步执行的是SELECT语句时，才有这第5步）<br>  select才是查询结果<br>  看<a href="#处理查询结果集">查询结果集</a></p></li><li><p>释放资源<br>  （使用完资源后一定要关闭，Java和数据库属于进程间通信，一定要关闭）</p><pre><code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 为了保证资源一定释放，在try...catch的finally中关闭资源，并且   遵循从小到大依次关闭。</span></span><br><span class="line"><span class="keyword">if</span>(statement!=<span class="literal">null</span>)&#123;</span><br><span class="line">  statement.close();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(connection!=<span class="literal">null</span>)&#123;</span><br><span class="line">connection.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre></li></ul><h3 id="整体代码"><a href="#整体代码" class="headerlink" title="整体代码"></a>整体代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*JDBC编程六步*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        Statement stmt=<span class="literal">null</span>;</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//1.注册驱动</span></span><br><span class="line">            DriverManager.registerDriver(<span class="keyword">new</span> <span class="title class_">com</span>.mysql.cj.jdbc.Driver());</span><br><span class="line">            <span class="comment">//2.获取连接</span></span><br><span class="line">            <span class="comment">/*url:统一资源定位符（网络中某个资源的绝对路径）</span></span><br><span class="line"><span class="comment">            URL包含哪几部分：协议、IP、PORT、资源名</span></span><br><span class="line"><span class="comment">            http://是通信协议   什么是协议？有什么用？</span></span><br><span class="line"><span class="comment">            通信协议是通信之前就提前定好的数据传送格式，数据包具体怎么传数据，提前定好了格式</span></span><br><span class="line"><span class="comment">            182.61.200.7是服务器IP地址</span></span><br><span class="line"><span class="comment">            80 是服务器上软件的端口</span></span><br><span class="line"><span class="comment">            index.html是服务器上某个资源名</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/MySql?useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=GMT&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span><span class="string">&quot;root&quot;</span>;</span><br><span class="line">            String password=<span class="string">&quot;111111&quot;</span>;</span><br><span class="line">            conn=DriverManager.getConnection(url,user,password);</span><br><span class="line">            System.out.println(<span class="string">&quot;数据库连接的对象 =&quot;</span> +conn);</span><br><span class="line">            <span class="comment">//3.获取数据库操作对象(statement专门执行sql语句的)</span></span><br><span class="line">            stmt= conn.createStatement();</span><br><span class="line">            <span class="comment">//4.执行sql</span></span><br><span class="line">            String sql=<span class="string">&quot;insert into dept(deptno,dname,loc) values(50,&#x27;人事部&#x27;,&#x27;北京&#x27;)&quot;</span>;</span><br><span class="line">            <span class="comment">//专门执行DML语句（insert、delete、update）</span></span><br><span class="line">            <span class="comment">//返回值是‘影响数据库中的记录条数’</span></span><br><span class="line">            <span class="type">int</span> count=stmt.executeUpdate(sql);</span><br><span class="line">            System.out.println(count==<span class="number">1</span>?<span class="string">&quot;保存成功&quot;</span>:<span class="string">&quot;保存失败&quot;</span>);<span class="comment">//insert保存一条语句</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 5.处理查询结果集</span></span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//6.释放资源(为了保证资源一定释放，在finally语句块中关闭资源)</span></span><br><span class="line">            <span class="comment">//并且要遵循从小到大依次关闭</span></span><br><span class="line">            <span class="comment">//分别对其try...catch</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (stmt!=<span class="literal">null</span>)&#123;</span><br><span class="line">                    stmt.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (conn!=<span class="literal">null</span>)&#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="将连接数据库的所有信息配置到配置文件中"><a href="#将连接数据库的所有信息配置到配置文件中" class="headerlink" title="将连接数据库的所有信息配置到配置文件中"></a>将连接数据库的所有信息配置到配置文件中</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 实际开发中不建议把连接数据库的信息写死到Java程序中。</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest4</span> &#123;</span><br><span class="line">    <span class="comment">//将连接数据库的所有信息配置到配置文件中</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException&#123;</span><br><span class="line">        <span class="comment">//使用资源绑定器绑定属性配置文件</span></span><br><span class="line">        ResourceBundle bundle=ResourceBundle.getBundle(<span class="string">&quot;jdbc&quot;</span>);</span><br><span class="line">        String driver=bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        String url=bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        String user=bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        String password=bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        Statement stmt=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1.注册驱动</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">//2.获取连接</span></span><br><span class="line">            conn=DriverManager.getConnection(url,user,password);</span><br><span class="line">            <span class="comment">//3.获取数据库操作对象</span></span><br><span class="line">            stmt=conn.createStatement();</span><br><span class="line">            <span class="comment">//4.执行SQL语句</span></span><br><span class="line">            String sql=<span class="string">&quot;delete from dept where deptno=40&quot;</span>;</span><br><span class="line">            <span class="type">int</span> count=stmt.executeUpdate(sql);</span><br><span class="line">            System.out.println(count==<span class="number">1</span> ?<span class="string">&quot;删除成功&quot;</span>:<span class="string">&quot;删除失败&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (SQLException | ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//6.释放资源</span></span><br><span class="line">            <span class="keyword">if</span> (stmt!=<span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    stmt.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (conn!=<span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="处理查询结果集"><a href="#处理查询结果集" class="headerlink" title="处理查询结果集"></a>处理查询结果集</h2><p>使用ResultSet的next()方法<br>如果该位置有数据就返回true，所以用while循环</p><p>取数据用getString()方法<br>注意，不论数据库中的数据类型是什么最好都以String的形式取出<br>但是可以用其他的类型double就用getDouble()….(需要取出结果计算的情况下)不过还是要和数据库中的类型一致</p><p>JDBC中所有下标都是从1开始。不是从0开始</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest5</span> &#123;</span><br><span class="line">    <span class="comment">//处理查询结果集</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        Statement stmt=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1.注册驱动</span></span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">            <span class="comment">//2.获取连接</span></span><br><span class="line">            conn=DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/MySql?useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=GMT&quot;</span></span><br><span class="line">                    ,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;111111&quot;</span>);</span><br><span class="line">            <span class="comment">//3.获取数据库操作对象</span></span><br><span class="line">            stmt=conn.createStatement();</span><br><span class="line">            <span class="comment">//4.执行sql</span></span><br><span class="line">            String sql=<span class="string">&quot;select empno,ename,sal from emp&quot;</span>;</span><br><span class="line">            <span class="comment">//int excuteUpdate(insert/delete/update)</span></span><br><span class="line">            <span class="comment">//ResultSet excuteQuery(select)</span></span><br><span class="line">            rs=stmt.executeQuery(sql);<span class="comment">//专门执行DQL语句的方法</span></span><br><span class="line">            <span class="comment">//5.处理查询结果集</span></span><br><span class="line">           <span class="comment">/* boolean flag1=rs.next();</span></span><br><span class="line"><span class="comment">//            System.out.println(flag1);  true</span></span><br><span class="line"><span class="comment">            if (flag1)&#123;</span></span><br><span class="line"><span class="comment">                //光标指向的行有数据</span></span><br><span class="line"><span class="comment">                //取数据</span></span><br><span class="line"><span class="comment">                //getString（）方法的特点是：不管数据库中的数据是什么类型的，都按string形式取出</span></span><br><span class="line"><span class="comment">                //1,2,3 说的是第几列</span></span><br><span class="line"><span class="comment">                String empno=rs.getString(1);//JDBC所有下标从1开始</span></span><br><span class="line"><span class="comment">                String ename=rs.getString(2);</span></span><br><span class="line"><span class="comment">                String sal=rs.getString(3);</span></span><br><span class="line"><span class="comment">                System.out.println(empno+&quot;,&quot;+ename+&quot;,&quot;+sal);</span></span><br><span class="line"><span class="comment">            &#125;*/</span></span><br><span class="line">           <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">              <span class="comment">/* String empno=rs.getString(1);//JDBC所有下标从1开始</span></span><br><span class="line"><span class="comment">               String ename=rs.getString(2);</span></span><br><span class="line"><span class="comment">               String sal=rs.getString(3);</span></span><br><span class="line"><span class="comment">               System.out.println(empno+&quot;,&quot;+ename+&quot;,&quot;+sal);*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">              <span class="comment">//这个不是以列的下标获取，以列的名字获取，（健壮性）</span></span><br><span class="line">               <span class="comment">//除了可以以String类型取出之外，还可以以特定了类型取出</span></span><br><span class="line">               <span class="comment">//int  getInt...</span></span><br><span class="line">               String empno=rs.getString(<span class="string">&quot;empno&quot;</span>);</span><br><span class="line">               String ename=rs.getString(<span class="string">&quot;ename&quot;</span>); <span class="comment">//假如有 AS a  则以a查询，因为是rs是结果集，根据查询时是否重名来填入</span></span><br><span class="line">               String sal=rs.getString(<span class="string">&quot;sal&quot;</span>);</span><br><span class="line">               System.out.println(empno+<span class="string">&quot;,&quot;</span>+ename+<span class="string">&quot;,&quot;</span>+sal);</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//释放资源</span></span><br><span class="line">            <span class="keyword">if</span> (rs!=<span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (stmt!=<span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    stmt.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (conn!=<span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="模拟用户登录，发现SQL注入现象"><a href="#模拟用户登录，发现SQL注入现象" class="headerlink" title="模拟用户登录，发现SQL注入现象"></a>模拟用户登录，发现SQL注入现象</h2><h3 id="导致SQL注入的根本原因："><a href="#导致SQL注入的根本原因：" class="headerlink" title="导致SQL注入的根本原因："></a>导致SQL注入的根本原因：</h3><p>用户输入的信息中含有sql语句的关键字，并且这些关<br>导致sql语句的原意被扭曲，进而达到sql注入<br>可能还会说删除等操作，会严重破坏数据库</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@aim</span> 模拟用户登录功能的实现</span></span><br><span class="line"><span class="comment"> * 业务描述：</span></span><br><span class="line"><span class="comment"> * 1.程序运行时，提供一个输入的入口，可以让用户输入用户名和密码</span></span><br><span class="line"><span class="comment"> * 2.用户输入后提交信息，Java程序收集到用户信息</span></span><br><span class="line"><span class="comment"> * 3.Java程序连接数据库验证用户名和密码是否合法</span></span><br><span class="line"><span class="comment"> * 4.演示结果</span></span><br><span class="line"><span class="comment"> * 数据准备;</span></span><br><span class="line"><span class="comment"> *      设计表，PowerDesigner</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * !程序问题：</span></span><br><span class="line"><span class="comment"> * 如此输入：</span></span><br><span class="line"><span class="comment"> * 用户名：ddd(表中没有)</span></span><br><span class="line"><span class="comment"> * ?密码：nuanqibazao&#x27; or&#x27;1&#x27;=&#x27;1     --&gt;    or &#x27;1&#x27; = &#x27;1&#x27;是恒成立的，所以会登录成功,导致注入的主要原因</span></span><br><span class="line"><span class="comment"> * 登录成功</span></span><br><span class="line"><span class="comment"> * SQL注入(安全隐患，要修改)（黑客常用）</span></span><br><span class="line"><span class="comment"> * !SQL注入的根本原因：</span></span><br><span class="line"><span class="comment"> * 用户输入的信息中含有SQL语句的关键字，并且这些关键字参与了sql语句中的编译过程，导致sql语句的原意被扭曲</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test07_login_</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//初始化一个界面</span></span><br><span class="line">        Map&lt;String,String&gt; userLoginInfo = initUI();</span><br><span class="line">        <span class="comment">//验证用户名和密码</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">loginSuccess</span>  <span class="operator">=</span> login(userLoginInfo);</span><br><span class="line">        <span class="comment">//显示结果</span></span><br><span class="line">        System.out.println(loginSuccess? <span class="string">&quot;登录成功&quot;</span> : <span class="string">&quot;登录失败&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化一个用户姐界面</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回用户输入的用户名和密码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String,String&gt; <span class="title function_">initUI</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;用户名：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">loginName</span> <span class="operator">=</span> s.nextLine();</span><br><span class="line">        System.out.print(<span class="string">&quot;密码：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">loginPwd</span> <span class="operator">=</span> s.nextLine();</span><br><span class="line">        Map&lt;String,String&gt; userLoginInfo = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        userLoginInfo.put(<span class="string">&quot;loginName&quot;</span>,loginName);</span><br><span class="line">        userLoginInfo.put(<span class="string">&quot;loginPwd&quot;</span>,loginPwd);</span><br><span class="line">        <span class="keyword">return</span> userLoginInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户登录判断</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userLoginInfo 用户登录信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 是否成功</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">login</span><span class="params">(Map&lt;String,String&gt; userLoginInfo)</span>&#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">is_longin</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">//JDBC代码</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/test&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">passwd</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">            conn = DriverManager.getConnection(url,user,passwd);</span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_user where loginName = &#x27;&quot;</span> + userLoginInfo.get(<span class="string">&quot;loginName&quot;</span>)</span><br><span class="line">                    + <span class="string">&quot;&#x27; and loginPwd = &#x27;&quot;</span> + userLoginInfo.get(<span class="string">&quot;loginPwd&quot;</span>) + <span class="string">&quot;&#x27;&quot;</span>;</span><br><span class="line">            rs = stmt.executeQuery(sql);</span><br><span class="line">            <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                is_longin  =<span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException | ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(stmt != <span class="literal">null</span>)&#123;</span><br><span class="line">                    stmt.close();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> is_longin;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Statement和PreparedStatement对比"><a href="#Statement和PreparedStatement对比" class="headerlink" title="Statement和PreparedStatement对比"></a>Statement和PreparedStatement对比</h2><p>-Statement存在SQL注入问题；PreparedStatement解决了SQL注入问题<br>-Statement是编译一次执行一次；PreparedStatement是编译一次可执行N次；PreparedStatement执行效率较高一些<br>-PreparedStatement会在编译阶段做类型的安全检查</p><p>综上所述：PreparedStatement使用较多，极少数情况下使用Statement</p><p>什么情况下必须使用Statement？<br>    业务方面要求必须支持SQL注入时。（PreparedStatement无法支持SQL注入）<br>    Statement支持SQL注入，凡是业务方面需要进行sql语句拼接时，必须使用Statement<br>    只需要给sql语句传值时使用：PreparedStatement </p><h2 id="解决SQL注入问题"><a href="#解决SQL注入问题" class="headerlink" title="解决SQL注入问题"></a>解决SQL注入问题</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@aim</span> 再Test07的基础上解决SQL注入问题</span></span><br><span class="line"><span class="comment"> * 使用PreparedStatement类 --》99%都用这个类，因为可以提前编译（效率高），避免SQL租入现象</span></span><br><span class="line"><span class="comment"> * 1%是如果本身业务就需要SQL注入的情况，比如就是想升序或者降序查询</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test08_solve_SQL_in</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//初始化一个界面</span></span><br><span class="line">        Map&lt;String,String&gt; userLoginInfo = initUI();</span><br><span class="line">        <span class="comment">//验证用户名和密码</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">loginSuccess</span>  <span class="operator">=</span> login(userLoginInfo);</span><br><span class="line">        <span class="comment">//显示结果</span></span><br><span class="line">        System.out.println(loginSuccess? <span class="string">&quot;登录成功&quot;</span> : <span class="string">&quot;登录失败&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化一个用户姐界面</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回用户输入的用户名和密码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String,String&gt; <span class="title function_">initUI</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;用户名：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">loginName</span> <span class="operator">=</span> s.nextLine();</span><br><span class="line">        System.out.print(<span class="string">&quot;密码：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">loginPwd</span> <span class="operator">=</span> s.nextLine();</span><br><span class="line">        Map&lt;String,String&gt; userLoginInfo = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        userLoginInfo.put(<span class="string">&quot;loginName&quot;</span>,loginName);</span><br><span class="line">        userLoginInfo.put(<span class="string">&quot;loginPwd&quot;</span>,loginPwd);</span><br><span class="line">        <span class="keyword">return</span> userLoginInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户登录判断</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userLoginInfo 用户登录信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 是否成功</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">login</span><span class="params">(Map&lt;String,String&gt; userLoginInfo)</span>&#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">is_longin</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">//JDBC代码</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Statement stmt = null;</span></span><br><span class="line">        <span class="comment">//!使用PreparedStatement  (原本是Statement)</span></span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/test&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">passwd</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">            conn = DriverManager.getConnection(url,user,passwd);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//!第三步的时候就要传入sql语句，预先编译，就是要留问号（占位符），之后会替换，很智能</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_user where loginName = ? and loginPwd = ?&quot;</span>;</span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//!在JDBC中一切的下标都是从1开始</span></span><br><span class="line">            <span class="comment">//ps.setInt(下标（第几个问号）,值);可以灵活设置</span></span><br><span class="line">            <span class="comment">//!很智能的是，如果是setInt等值，在编译的sql语句中就不会加引号，如果是字符串类型就会加引号(把整体引起来，就不会执行注入语句了)</span></span><br><span class="line">            ps.setString(<span class="number">1</span>,userLoginInfo.get(<span class="string">&quot;loginName&quot;</span>));<span class="comment">//!修改占位符的值</span></span><br><span class="line">            ps.setString(<span class="number">2</span>,userLoginInfo.get(<span class="string">&quot;loginPwd&quot;</span>));</span><br><span class="line"></span><br><span class="line">            rs = ps.executeQuery();<span class="comment">//!因为前面已经传入了sql预处理语句，所以不需要参数了</span></span><br><span class="line">            <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                is_longin  =<span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException | ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(rs != <span class="literal">null</span>)&#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(ps != <span class="literal">null</span>)&#123;</span><br><span class="line">                    ps.close();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> is_longin;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Statement-用处"><a href="#Statement-用处" class="headerlink" title="Statement 用处"></a>Statement 用处</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test09_desc_and_asc</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//todo 用户输入选择</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;输入1升序，输入2降序&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">keyWord</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        keyWord = s.nextLine();</span><br><span class="line">        <span class="keyword">if</span>(Objects.equals(keyWord, <span class="string">&quot;1&quot;</span>))&#123;</span><br><span class="line">            keyWord = <span class="string">&quot;asc&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(Objects.equals(keyWord, <span class="string">&quot;2&quot;</span>))&#123;</span><br><span class="line">            keyWord = <span class="string">&quot;desc&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//todo jdbc</span></span><br><span class="line">        <span class="comment">//!在这里使用PreparedStatement不能实现功能</span></span><br><span class="line"><span class="comment">//        Connection conn = null;</span></span><br><span class="line"><span class="comment">//        PreparedStatement ps = null;</span></span><br><span class="line"><span class="comment">//        ResultSet rs = null;</span></span><br><span class="line"><span class="comment">//        try&#123;</span></span><br><span class="line"><span class="comment">//            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span></span><br><span class="line"><span class="comment">//            conn = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/test?useUnicode=true&amp;characterEncoding=utf8&quot;,&quot;root&quot;,&quot;123456&quot;);</span></span><br><span class="line"><span class="comment">//            String sql = &quot;select name,english from student order by ?&quot;;</span></span><br><span class="line"><span class="comment">//            ps = conn.prepareStatement(sql);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//            ps.setString(1,keyWord);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//            rs = ps.executeQuery();</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//            while(rs.next())&#123;</span></span><br><span class="line"><span class="comment">//                System.out.println(rs.getString(&quot;name&quot;) + &quot; &quot; + rs.getString(&quot;english&quot;));</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125; catch(ClassNotFoundException | SQLException e)&#123;</span></span><br><span class="line"><span class="comment">//            e.printStackTrace();</span></span><br><span class="line"><span class="comment">//        &#125; finally &#123;</span></span><br><span class="line"><span class="comment">//            try&#123;</span></span><br><span class="line"><span class="comment">//                if(rs != null)&#123;</span></span><br><span class="line"><span class="comment">//                    rs.close();</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//                if(ps != null)&#123;</span></span><br><span class="line"><span class="comment">//                    ps.close();</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//                if(conn != null)&#123;</span></span><br><span class="line"><span class="comment">//                    conn.close();</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//            &#125; catch (SQLException e) &#123;</span></span><br><span class="line"><span class="comment">//                e.printStackTrace();</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">            conn = DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/test?useUnicode=true&amp;characterEncoding=utf8&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select name,english from student order by english &quot;</span> + keyWord;</span><br><span class="line"></span><br><span class="line">            rs = stmt.executeQuery(sql);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">                System.out.println(rs.getString(<span class="string">&quot;name&quot;</span>) + <span class="string">&quot; &quot;</span> + rs.getString(<span class="string">&quot;english&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span>(ClassNotFoundException | SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(rs != <span class="literal">null</span>)&#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(stmt != <span class="literal">null</span>)&#123;</span><br><span class="line">                    stmt.close();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用PreparedStatement完成增删改"><a href="#使用PreparedStatement完成增删改" class="headerlink" title="使用PreparedStatement完成增删改"></a>使用PreparedStatement完成增删改</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test10_c_d_u</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1.</span></span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//2.</span></span><br><span class="line">            conn = DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/test&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//3.</span></span><br><span class="line"><span class="comment">//            增：</span></span><br><span class="line"><span class="comment">//            String sql_i = &quot;insert into t_vip2 values (?,?)&quot;;</span></span><br><span class="line"><span class="comment">//            ps = conn.prepareStatement(sql_i);</span></span><br><span class="line"><span class="comment">//            删：</span></span><br><span class="line"><span class="comment">//            String sql_d = &quot;delete from t_vip2 where id = ?&quot;;</span></span><br><span class="line"><span class="comment">//            ps = conn.prepareStatement(sql_d);</span></span><br><span class="line"><span class="comment">//            改：</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql_u</span> <span class="operator">=</span> <span class="string">&quot;update t_vip2 set name = ? where id = ?&quot;</span>;</span><br><span class="line">            ps = conn.prepareStatement(sql_u);</span><br><span class="line">            <span class="comment">//4.</span></span><br><span class="line"><span class="comment">//            增：</span></span><br><span class="line"><span class="comment">//            ps.setInt(1,3);</span></span><br><span class="line"><span class="comment">//            ps.setString(2,&quot;smith&quot;);</span></span><br><span class="line"><span class="comment">//            删：</span></span><br><span class="line"><span class="comment">//            ps.setInt(1,3);</span></span><br><span class="line"><span class="comment">//            改：</span></span><br><span class="line">            ps.setString(<span class="number">1</span>,<span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">            ps.setInt(<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">            ps.executeUpdate();</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException | SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//6.</span></span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(ps != <span class="literal">null</span>)&#123;</span><br><span class="line">                    ps.close();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="JDBC工具类的封装"><a href="#JDBC工具类的封装" class="headerlink" title="JDBC工具类的封装"></a>JDBC工具类的封装</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@aim</span> 自己写一个封装方法，将JDBC的功能封装成函数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DBUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.使用静态代码块直接加载第一步注册驱动</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span>(ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.获取数据库连接(传入3个参数)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">(String url,String user,String passwd)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn =  DriverManager.getConnection(url, user, passwd);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> conn;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2.无参类型,默认调用</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/test&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">passwd</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">            conn =  DriverManager.getConnection(url, user, passwd);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> conn;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//6.释放资源 3个</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">(Connection conn, Statement stmt, ResultSet rs)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(rs != <span class="literal">null</span>)&#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(stmt != <span class="literal">null</span>)&#123;</span><br><span class="line">                stmt.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//没有使用结果查询集,只释放两个资源</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">(Connection conn, Statement stmt)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(stmt != <span class="literal">null</span>)&#123;</span><br><span class="line">                stmt.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="事务机制"><a href="#事务机制" class="headerlink" title="事务机制"></a>事务机制</h2><h3 id="主要代码"><a href="#主要代码" class="headerlink" title="主要代码"></a>主要代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conn.setAutoCommit(<span class="literal">false</span>);<span class="comment">//关闭自动提交机制(打开事务提交机制)</span></span><br><span class="line">conn.commit();<span class="comment">//事务提交</span></span><br><span class="line">conn.rollback();<span class="comment">//事务回滚</span></span><br></pre></td></tr></table></figure><p>注意是连接对象的操作函数</p><h3 id="整体代码-1"><a href="#整体代码-1" class="headerlink" title="整体代码"></a>整体代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@aim</span> 用事务机制完成银行转账</span></span><br><span class="line"><span class="comment"> * 任务：</span></span><br><span class="line"><span class="comment"> *      1.实现银行转账机制（账户111将钱转给222，转10000.0）</span></span><br><span class="line"><span class="comment"> *      2.使用自制的DBUtils工具类</span></span><br><span class="line"><span class="comment"> * 实现：</span></span><br><span class="line"><span class="comment"> *      1.先查询两个账户的价格</span></span><br><span class="line"><span class="comment"> *      2.将111中的钱（10000.0）转给222</span></span><br><span class="line"><span class="comment"> *          1.111中的钱少10000.0</span></span><br><span class="line"><span class="comment"> *          2.222中的钱增加10000.0</span></span><br><span class="line"><span class="comment"> *      3.再次查询结果</span></span><br><span class="line"><span class="comment"> *? 本代码的重点  conn.setAutoCommit(false);//关闭自动提交，相当于开启事务</span></span><br><span class="line"><span class="comment"> *?             conn.commit();//事务提交</span></span><br><span class="line"><span class="comment"> *?             conn.rollback();//事务回滚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test12_transaction</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DBUtils.getConnection();<span class="comment">//1,2</span></span><br><span class="line">        ResultSet rs;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_act where actno = ? or actno = ?&quot;</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> conn.prepareStatement(sql);</span><br><span class="line">        <span class="comment">//todo 给ps赋值</span></span><br><span class="line">        ps.setInt(<span class="number">1</span>,<span class="number">111</span>);</span><br><span class="line">        ps.setInt(<span class="number">2</span>,<span class="number">222</span>);</span><br><span class="line">        rs = ps.executeQuery();</span><br><span class="line">        <span class="comment">//todo 处理查询结果集</span></span><br><span class="line">        System.out.println(<span class="string">&quot;操作前查询结果：&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;actno: &quot;</span> + rs.getString(<span class="string">&quot;actno&quot;</span>) +<span class="string">&quot; balance: &quot;</span> + rs.getString(<span class="string">&quot;balance&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//todo 转账操作</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql2</span> <span class="operator">=</span> <span class="string">&quot;update t_act set balance = balance + ? where actno = ? and balance &gt;= ?&quot;</span>;</span><br><span class="line">        ps = conn.prepareStatement(sql2);</span><br><span class="line">        <span class="comment">//!关闭JDBC的自动提交 ， 相当于开启事务(start transaction;)</span></span><br><span class="line">        conn.setAutoCommit(<span class="literal">false</span>);<span class="comment">//*关闭自动提交</span></span><br><span class="line">        <span class="comment">//todo 让111的钱减少</span></span><br><span class="line">        <span class="comment">//todo 给ps赋值</span></span><br><span class="line">        ps.setDouble(<span class="number">1</span>,-<span class="number">10000.0</span>);<span class="comment">//?减少就是加负的那么多嘛</span></span><br><span class="line">        ps.setInt(<span class="number">2</span>,<span class="number">111</span>);<span class="comment">//?操作的是111的账户</span></span><br><span class="line">        ps.setDouble(<span class="number">3</span>,<span class="number">10000.0</span>);<span class="comment">//?转账的用户的钱必须要大于转周的钱</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> ps.executeUpdate();</span><br><span class="line">        <span class="comment">//todo 让222的钱增加</span></span><br><span class="line">        <span class="comment">//todo 再次给ps赋值</span></span><br><span class="line">        ps.setDouble(<span class="number">1</span>,<span class="number">10000.0</span>);</span><br><span class="line">        ps.setInt(<span class="number">2</span>,<span class="number">222</span>);</span><br><span class="line">        ps.setDouble(<span class="number">3</span>,-<span class="number">10000000.0</span>);<span class="comment">//?收钱的账户不对钱有要求</span></span><br><span class="line">        count += ps.executeUpdate();</span><br><span class="line">        <span class="keyword">if</span>(count == <span class="number">2</span>)&#123;</span><br><span class="line">            conn.commit();<span class="comment">//!事务提交的方法</span></span><br><span class="line">            System.out.println(<span class="string">&quot;转账成功&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            conn.rollback();<span class="comment">//!事务回滚的方法</span></span><br><span class="line">            System.out.println(<span class="string">&quot;转账失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//todo 再次查询结果集</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql3</span> <span class="operator">=</span> <span class="string">&quot;select * from t_act where actno = ? or actno = ?&quot;</span>;</span><br><span class="line">        ps = conn.prepareStatement(sql3);</span><br><span class="line">        ps.setInt(<span class="number">1</span>,<span class="number">111</span>);</span><br><span class="line">        ps.setInt(<span class="number">2</span>,<span class="number">222</span>);</span><br><span class="line">        rs = ps.executeQuery();</span><br><span class="line">        <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;actno: &quot;</span> + rs.getString(<span class="string">&quot;actno&quot;</span>) +<span class="string">&quot; balance: &quot;</span> + rs.getString(<span class="string">&quot;balance&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//todo 释放资源</span></span><br><span class="line">        DBUtils.close(conn,ps,rs);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@aim</span> 实现模糊查询</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test13_like</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = DBUtils.getConnection();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from student where name like ?&quot;</span>;</span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>,<span class="string">&quot;z%&quot;</span>);<span class="comment">//查询以z开头的名字</span></span><br><span class="line">            rs = ps.executeQuery();</span><br><span class="line">            <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">                System.out.println(rs.getString(<span class="string">&quot;id&quot;</span>) + <span class="string">&quot; &quot;</span>  +rs.getString(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">                        + <span class="string">&quot; &quot;</span> + rs.getString(<span class="string">&quot;chinese&quot;</span>) + <span class="string">&quot; &quot;</span> + rs.getString(<span class="string">&quot;english&quot;</span>)</span><br><span class="line">                        + <span class="string">&quot; &quot;</span> + rs.getString(<span class="string">&quot;math&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtils.close(conn,ps,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="悲观锁与乐观锁"><a href="#悲观锁与乐观锁" class="headerlink" title="悲观锁与乐观锁"></a>悲观锁与乐观锁</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">行级锁（又叫悲观锁）：</span><br><span class="line"><span class="keyword">select</span> ename,job,sal <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="operator">=</span> <span class="string">&#x27;MANAGER&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+---------+</span></span><br><span class="line"><span class="operator">|</span> ename <span class="operator">|</span> job     <span class="operator">|</span> sal     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+---------+</span></span><br><span class="line"><span class="operator">|</span> JONES <span class="operator">|</span> MANAGER <span class="operator">|</span> <span class="number">3272.50</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> BLAKE <span class="operator">|</span> MANAGER <span class="operator">|</span> <span class="number">3135.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> CLARK <span class="operator">|</span> MANAGER <span class="operator">|</span> <span class="number">2695.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+---------+</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> ename,job,sal <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="operator">=</span> <span class="string">&#x27;MANAGER&#x27;</span> <span class="keyword">for</span> <span class="keyword">update</span>;</span><br><span class="line">在<span class="keyword">select</span>语句后加 <span class="keyword">for</span> <span class="keyword">update</span> 就是行级锁</span><br><span class="line">代表在当前事务结束之前，其他事务都无法修改这一行数据</span><br><span class="line">上面<span class="keyword">select</span>语句表示：那三行数据(其实是对应emp表中的三行数据)都无法修改</span><br><span class="line"></span><br><span class="line">乐观锁：</span><br><span class="line">多线程并发 都可以对这行数据修改</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> 数据库 </tag>
            
            <tag> Java后端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL基础</title>
      <link href="/posts/3169224211.html"/>
      <url>/posts/3169224211.html</url>
      
        <content type="html"><![CDATA[<details>B站 动力节点 老杜 老师 的课堂笔记<br/>狂赞老杜老师</details><blockquote><p>此笔记虽说是MySQL基础，但是学完基本可以用到工作。咱又不是专门搞数据库工作的～</p></blockquote><h1 id="DQL-查询"><a href="#DQL-查询" class="headerlink" title="DQL(查询)"></a>DQL(查询)</h1><h2 id="select的简单语法"><a href="#select的简单语法" class="headerlink" title="select的简单语法"></a>select的简单语法</h2><p>show databases;—&gt;显示已有数据库(注意后面的s)<br>create database test;—&gt;建立一个数据库,名叫test(注意没有s)<br>use test;—&gt;使用test数据库<br>source 链接;—&gt;导入数据(表等)<br>表是数据库最基本的单位(行 为字段)<br>desc test;—&gt;查看字段描述(describe)<br>理解相对路径和绝对路径,在MySql中尤其是绝对路径和其他的有很大区别<br/></p><h3 id="单表查询-DQL-数据查询语言"><a href="#单表查询-DQL-数据查询语言" class="headerlink" title="单表查询(DQL(数据查询语言))"></a>单表查询(DQL(数据查询语言))</h3><p>select … from … where … group by … having … order by …;<br><br/><b>在MySQL中一定要以分号结尾</b><br/><br>执行顺序：<br></p><ol>    <li>from(表单来源)</li>    <li>where(判断筛选)</li>    <li>group by(分组)</li>    <li>having(用于分组函数情况下的判断筛选)</li>    <li>order by(排序)</li></ol><h3 id="语法细节"><a href="#语法细节" class="headerlink" title="语法细节"></a>语法细节</h3><p>select * from student;—&gt;用来查询student表单中的所有字段对应的数据<br/><br>select math from student;—&gt;用来查询student表单中的math字段对应的数据<br/><br>select math,name from student;—&gt;用来查询student表单中的math字段和name对应的数据(多个字段用逗号隔开)<br/><br>select math as m from student;—&gt;用来查询student表单中的math字段对应的数据并且将math字段改名为m,因为这里时select(查询)所以不会修改数据库<br/><br>select math m from student;—&gt;上一句的简写<br/><br>select math from student where math &gt; 60;—&gt;判断语句,math字段对应数据大于60(即满足要求)才能显示出来<br/><br>判断语句:</p><ul>    <li>&lt;</li>    <li>&gt;</li>    <li>&gt;=</li>    <li>&lt;=</li>    <li>=</li>    <li>!=</li>    <li>&lt;&gt;(和!=效果一样)</li>    <li>and(和编程语言的&&一个效果)</li>    <li>or(和编程语言的||一个效果)</li>    <li>in(包含,其实也算是一个函数,其参数不是表示范围,而是具体的值)</li>    <li>between ... and...(between后面的数字需要比and后面的数字小,表示的能显示的数据的范围)</li>    <li>is null(为null才满足条件)</li>    <li>not(not可以取非,主要用在is和in中)</li>    <li>like(模糊查询,%代表多个字符,_代表单个字符)</li></ul><h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><p>select math from student order by math;—&gt;默认为升序排序<br/><br>select math from student order by math desc;—&gt;降序排序<br/><br>select math from student order by math asc;—&gt;升序排序<br/></p><h3 id="单行处理函数"><a href="#单行处理函数" class="headerlink" title="单行处理函数"></a>单行处理函数</h3><p>select lower(name) from student;—&gt;将name中的字母全部转换为小写字母<br/><br>select upper(name) from student;—&gt;将name中的字母全部转换为大写字母<br/><br>select substr(name,1,1) from student;—&gt;截取子字符串,第二个参数表示起始位置<b>在MySql中是从1开始的,不是从0开始</b>第三个参数是子字符串长度<br/><br>select concat(str1,str2) from student;—&gt;将str1,str2拼接成一个字符串<br/><br>select length(name) from student;—&gt;得到长度<br/><br>select name from student where name = trim(“    张飞”);—&gt;trim将空格去掉<br/><br>select round(123.1) from student;—&gt;可以字节显示字面量(直接就是值可以是数字也可以是字符串,行数和表的行数相同),这里的round()函数是四舍五入函数<br/><br>select round(123.45,1) form student;—&gt;默认第二个参数为0,为1表示保留一位小数…如果是-1的话结果就是:120<br/><br>select rand() from student;—&gt;只是借助字面量输出,输出的是0-1的随机数<br/></p><h3 id="分组处理函数"><a href="#分组处理函数" class="headerlink" title="分组处理函数"></a>分组处理函数</h3><p>select sum(math) from student;—&gt;显示student表中math字段对应数据的总和<br>select count(math) from student;—&gt;显示student表中math字段对应的不位null的数据的个数<br>select count(<em>) from student;—&gt;</em>表示所有字段显示student表中的行数,因为不可能有一行全部字段都为空,注意和上一行有个区分<br/><br>select max(math) from student;—&gt;显示student表中math字段对应数据中的最大值<br>select main(math) from student;—&gt;显示student表中math字段对应数据中的最小值<br>select avg(math) from student;—&gt;显示student表中math字段对应数据中的平均值<br>select math,avg(math) from student group by math;—&gt;按math字段来分组(math字段中数据相同的的行为一组),并且排序出其平均值<br>select math,avg(math) from student group by math order by desc;—&gt;分组使用显示,并且控制降序显示<br>select math,avg(math) from student group by math having avg(math) &gt; 60;—&gt;因为是会先执行where所有不能使用where这个时候就可以使用having来筛选结果了<br><b>分组函数可以单独使用,但是最好和group by一起连用</b></p><h3 id="去重命令"><a href="#去重命令" class="headerlink" title="去重命令"></a>去重命令</h3><p>dinstinct 命令（去重）<br>select count(dinstinct math) from student;</p><h2 id="乐观锁和悲观锁"><a href="#乐观锁和悲观锁" class="headerlink" title="乐观锁和悲观锁"></a>乐观锁和悲观锁</h2><p>乐观锁相当于没有synchronized<br>悲观锁相当于有synchronized</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">行级锁（又叫悲观锁）：</span><br><span class="line"><span class="keyword">select</span> ename,job,sal <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="operator">=</span> <span class="string">&#x27;MANAGER&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+---------+</span></span><br><span class="line"><span class="operator">|</span> ename <span class="operator">|</span> job     <span class="operator">|</span> sal     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+---------+</span></span><br><span class="line"><span class="operator">|</span> JONES <span class="operator">|</span> MANAGER <span class="operator">|</span> <span class="number">3272.50</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> BLAKE <span class="operator">|</span> MANAGER <span class="operator">|</span> <span class="number">3135.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> CLARK <span class="operator">|</span> MANAGER <span class="operator">|</span> <span class="number">2695.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+---------+</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> ename,job,sal <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="operator">=</span> <span class="string">&#x27;MANAGER&#x27;</span> <span class="keyword">for</span> <span class="keyword">update</span>;</span><br><span class="line">在<span class="keyword">select</span>语句后加 <span class="keyword">for</span> <span class="keyword">update</span> 就是行级锁</span><br><span class="line">代表在当前事务结束之前，其他事务都无法修改这一行数据</span><br><span class="line">上面<span class="keyword">select</span>语句表示：那三行数据(其实是对应emp表中的三行数据)都无法修改</span><br><span class="line"></span><br><span class="line">乐观锁：</span><br><span class="line">多线程并发 都可以对这行数据修改</span><br></pre></td></tr></table></figure><h2 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h2><p>连接查询？</p><h3 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h3><h4 id="等值连接"><a href="#等值连接" class="headerlink" title="等值连接"></a>等值连接</h4><p>92语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">emp.ename, dept.dname</span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">emp, dept</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">emp.deptno <span class="operator">=</span> dept.deptno;<span class="operator">/</span><span class="operator">/</span>筛选条件，没有就会出现笛卡尔积现象（这样的等值筛选条件就是等值查询），像类一样调用（吧表看成对象）</span><br></pre></td></tr></table></figure><p><strong>没有查询限制-&gt;笛卡尔积现象</strong><br><strong>不是为了调高效率只是为了避免笛卡尔积现象,次数是不会少的</strong><br>上面语法的提高效率写法(给表起个别名)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">e.ename,d.dname </span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">emp e, dept d</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">e.deptno <span class="operator">=</span> d.deptno; <span class="operator">/</span><span class="operator">/</span>SQL92语法</span><br></pre></td></tr></table></figure><p>SQL92的缺点：结构不清晰，表的连接条件和后期进一步筛选的条件，都放到了where后面。<br>SQL99语法:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">e.ename,d.dname</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">emp e</span><br><span class="line"><span class="keyword">join</span></span><br><span class="line">dept d</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">e.deptno <span class="operator">=</span> d.deptno;</span><br></pre></td></tr></table></figure><p>也可这样写:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">e.ename,d.dname</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">emp e</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span>  <span class="operator">/</span><span class="operator">/</span><span class="keyword">inner</span>可以省略（带着<span class="keyword">inner</span>可读性更好！！！一眼就能看出来是内连接）</span><br><span class="line">dept d</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">e.deptno <span class="operator">=</span> d.deptno;  <span class="operator">/</span><span class="operator">/</span> 条件是等量关系，所以被称为等值连接。</span><br></pre></td></tr></table></figure><p>SQL99的优点：表连接的条件是独立的，连接之后，如果还需要进一步筛选，再往后继续添加where,可如下操作:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">...</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">a</span><br><span class="line"><span class="keyword">join</span></span><br><span class="line">b</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">a和b的连接条件</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">筛选条件</span><br></pre></td></tr></table></figure><h4 id="非等值连接"><a href="#非等值连接" class="headerlink" title="非等值连接"></a>非等值连接</h4><p>非等值连接： 条件不是一个等量关系。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">e.ename, e.sal, s.grade</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">emp e</span><br><span class="line"><span class="keyword">join</span></span><br><span class="line">salgrade s</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">e.sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal;  <span class="operator">/</span><span class="operator">/</span> 条件不是一个等量关系，称为非等值连接。</span><br></pre></td></tr></table></figure><h4 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h4><p>（把自己看成两个表连接到一起）</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">a.ename <span class="keyword">as</span> <span class="string">&#x27;员工名&#x27;</span>, b.ename <span class="keyword">as</span> <span class="string">&#x27;领导名&#x27;</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">emp a</span><br><span class="line"><span class="keyword">join</span></span><br><span class="line">emp b</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">a.mgr <span class="operator">=</span> b.empno;  <span class="operator">/</span><span class="operator">/</span>员工的领导编号 <span class="operator">=</span> 领导的员工编号</span><br></pre></td></tr></table></figure><h3 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h3><p>有不平等关系,内连接是两个表都是同等关系.<br>偏向谁(left左边的表或right右边的表)谁就是主,是扫描这个主表,顺便去扫描另外一个表</p><h4 id="左外连接"><a href="#左外连接" class="headerlink" title="左外连接"></a>左外连接</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">e.ename,d.dname</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">dept d </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> </span><br><span class="line">emp e</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">e.deptno <span class="operator">=</span> d.deptno;</span><br></pre></td></tr></table></figure><h4 id="右外连接"><a href="#右外连接" class="headerlink" title="右外连接"></a>右外连接</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">e.ename,d.dname</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">emp e </span><br><span class="line"><span class="keyword">right</span> <span class="keyword">join</span> </span><br><span class="line">dept d</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">e.deptno <span class="operator">=</span> d.deptno;</span><br></pre></td></tr></table></figure><p>outer 和 inner一样,也可省略</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> <span class="keyword">outer</span>是可以省略的，带着可读性强。</span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">e.ename,d.dname</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">emp e </span><br><span class="line"><span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> </span><br><span class="line">dept d</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">e.deptno <span class="operator">=</span> d.deptno;</span><br></pre></td></tr></table></figure><h3 id="全连接-不讲"><a href="#全连接-不讲" class="headerlink" title="全连接(不讲)"></a>全连接(不讲)</h3><h3 id="多张表查询"><a href="#多张表查询" class="headerlink" title="多张表查询"></a>多张表查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">e.ename,e.sal,d.dname,s.grade</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">emp e</span><br><span class="line"><span class="keyword">join</span></span><br><span class="line">dept d</span><br><span class="line"><span class="keyword">on</span> </span><br><span class="line">e.deptno <span class="operator">=</span> d.deptno  <span class="operator">/</span><span class="operator">/</span> e表和d表的连接条件：e表的员工部门编号要等于d表的部门编号</span><br><span class="line"><span class="keyword">join</span></span><br><span class="line">salgrade s</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">e.sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal;  <span class="operator">/</span><span class="operator">/</span> e表和s表的连接条件：e表的员工薪资要在s表的losal值和hisal值之间</span><br></pre></td></tr></table></figure><h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><p>子查询就是嵌套的 select 语句，可以理解为子查询是一张表。<br>select语句中嵌套select语句，被嵌套的select语句称为子查询。</p><h3 id="可出现位置"><a href="#可出现位置" class="headerlink" title="可出现位置"></a>可出现位置</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">..(<span class="keyword">select</span>).</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">..(<span class="keyword">select</span>).</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">..(<span class="keyword">select</span>)</span><br></pre></td></tr></table></figure><h3 id="where"><a href="#where" class="headerlink" title="where"></a>where</h3><p>找出比最低工资高的员工姓名和工资：<br><code>select ename,sal from emp where sal &gt; min(sal);</code>(报错)<br>上述语句报错的原因：where子句中不能直接使用分组函数。<br>实现思路：<br>第一步：查询最低工资是多少 <code>select min(sal) from emp;?</code><br>第二步：找出&gt;800的 <code>select ename,sal from emp where sal &gt; 800;</code><br>第三步：合并 <code>select ename,sal from emp where sal &gt; (select min(sal) from emp);</code></p><h3 id="from"><a href="#from" class="headerlink" title="from"></a>from</h3><p><strong>在 from 语句中使用子查询，可以将该子查询的查询结果看做一张表。</strong><br>找出每个岗位的平均工资的薪资等级<br>第一步：找出每个岗位的平均工资（按照岗位分组求平均值）。<br>????<code>select job,avg(sal) from emp group by job;</code><br>第二步：克服心理障碍，把以上的查询结果就当做一张真实存在的表 t。<br>????<code>select * from salgrade;</code>得到s表<br>第三步：t表和s表进行表连接，条件：t表的<code>avg(sal) between s.losal and s.hisal;</code><br>最后:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">t.<span class="operator">*</span>, s.grade</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">(<span class="keyword">select</span> job,<span class="built_in">avg</span>(sal) <span class="keyword">as</span> avgsal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> job) t</span><br><span class="line"><span class="keyword">join</span></span><br><span class="line">salgrade s</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">t.avgsal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal;</span><br></pre></td></tr></table></figure><h3 id="select"><a href="#select" class="headerlink" title="select"></a>select</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">e.ename,(<span class="keyword">select</span> d.dname <span class="keyword">from</span> dept d <span class="keyword">where</span> e.deptno <span class="operator">=</span> d.deptno) <span class="keyword">as</span> dname </span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">emp e;</span><br></pre></td></tr></table></figure><p><strong>注意：对于select后面的子查询来说，这个子查询只能一次返回1条结果，多于1条，就报错了。</strong></p><h2 id="union"><a href="#union" class="headerlink" title="union"></a>union</h2><p>union合并查询结果集。<br>union 可以合并集合（相加）。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,job <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="operator">=</span> <span class="string">&#x27;MANAGER&#x27;</span></span><br><span class="line"><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span> ename,job <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="operator">=</span> <span class="string">&#x27;SALESMAN&#x27;</span>;</span><br></pre></td></tr></table></figure><p><strong>union的效率要高一些。对于表连接来说，每连接一次新表，则匹配的次数满足笛卡尔积，成倍的翻。但是union可以减少匹配的次数。在减少匹配次数的情况下，还可以完成两个结果集的拼接。</strong><br>a 连接 b 连接 c<br>a 10条记录<br>b 10条记录<br>c 10条记录<br>匹配次数是：1000<br>a 连接 b 一个结果：10 <em> 10 —&gt; 100次<br>a 连接 c 一个结果：10 </em> 10 —&gt; 100次<br>使用union的话是：100次 + 100次 = 200次。（union把乘法变成了加法运算）</p><h3 id="union在使用的时候的注意事项："><a href="#union在使用的时候的注意事项：" class="headerlink" title="union在使用的时候的注意事项："></a>union在使用的时候的注意事项：</h3><ol><li>union在进行结果集合并的时候，要求两个结果集的列数相同。</li><li>MySQL可以，oracle语法严格 ，不可以，报错。要求：结果集合并时列和列的数据类型也要一致。</li></ol><h2 id="limit"><a href="#limit" class="headerlink" title="limit"></a>limit</h2><h3 id="imit-的作用"><a href="#imit-的作用" class="headerlink" title="imit 的作用"></a>imit 的作用</h3><p>MySQL 提供了 limit，主要用于提取前几条或者中间某几行数据。例如，select <em> from table limit m,n，其中 m 是指记录开始的 index，从 0 开始，表示第一条记录；n 是指从第 m+1 条开始，取 n 条。select </em> from tablename limit 2,4即取出第 3 条至第 6 条，4 条记录。<br>??limit 的作用：将查询结果集的一部分取出来，通常使用在分页查询当中。分页的作用是为了提高用户的体验，因为一次全部都查出来，用户体验差。</p><h3 id="limit-的用法"><a href="#limit-的用法" class="headerlink" title="limit 的用法"></a>limit 的用法</h3><p>完整用法：limit startIndex, length<br>    startIndex是起始下标，length是长度。<br>    起始下标从0开始。<br>缺省用法：limit 5; 这是取前5。</p><p><strong>注意：mysql当中limit在order by之后执行！</strong></p><p>每页显示3条记录<br>  第1页：limit 0,3 [0 1 2]<br>  第2页：limit 3,3 [3 4 5]<br>  第3页：limit 6,3 [6 7 8]<br>  第4页：limit 9,3 [9 10 11]</p><p>每页显示pageSize条记录<br>  第pageNo页：limit (pageNo - 1) * pageSize , pageSize</p><h3 id="执行顺序："><a href="#执行顺序：" class="headerlink" title="执行顺序："></a>执行顺序：</h3><ol><li>from</li><li>where</li><li>group by</li><li>having</li><li>select</li><li>order by</li><li>limit</li></ol><h1 id="表"><a href="#表" class="headerlink" title="表"></a>表</h1><p>建表的语法格式：(建表属于DDL语句，DDL包括：<code>create drop alter</code>)</p><h2 id="表的创建"><a href="#表的创建" class="headerlink" title="表的创建"></a>表的创建</h2><p>语法:<br><code>create table 表名(字段名1 数据类型, 字段名2 数据类型, 字段名3 数据类型);</code><br>或者:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名(</span><br><span class="line">字段名<span class="number">1</span> 数据类型, </span><br><span class="line">字段名<span class="number">2</span> 数据类型, </span><br><span class="line">字段名<span class="number">3</span> 数据类型</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><h3 id="varchar"><a href="#varchar" class="headerlink" title="varchar"></a>varchar</h3><p>varchar(最长255)：可变长度的字符串。<br>    比较智能，节省空间。<br>会根据实际的数据长度动态分配空间。<br>优点： 节省空间。<br>缺点： 需要动态分配空间，速度慢。</p><h3 id="char"><a href="#char" class="headerlink" title="char"></a>char</h3><p>char(最长255)：定长字符串。<br>不管实际的数据长度是多少，分配固定长度的空间去存储数据。<br>使用不恰当的时候，可能会导致空间的浪费。</p><p>优点： 不需要动态分配空间，速度快。<br>缺点： 使用不当可能会导致空间的浪费。</p><p>varchar和char应该怎么选择？<br>性别字段选什么？因为性别是固定长度的字符串，所以选择char。<br>姓名字段选什么？每一个人的名字长度不同，所以选择varchar。</p><h3 id="int"><a href="#int" class="headerlink" title="int"></a>int</h3><p>int(最长11)：数字中的整数型。等同于java的int。</p><h3 id="bigint"><a href="#bigint" class="headerlink" title="bigint"></a>bigint</h3><p>bigint：数字中的长整型。等同于java中的long。</p><h3 id="float"><a href="#float" class="headerlink" title="float"></a>float</h3><p>float：单精度浮点型数据。</p><h3 id="double"><a href="#double" class="headerlink" title="double"></a>double</h3><p>double：双精度浮点型数据。</p><h3 id="date"><a href="#date" class="headerlink" title="date"></a>date</h3><p>date：短日期类型。</p><h3 id="datetime"><a href="#datetime" class="headerlink" title="datetime"></a>datetime</h3><p>datetime：长日期类型。</p><h3 id="clob"><a href="#clob" class="headerlink" title="clob"></a>clob</h3><p>clob：字符大对象（Character Large OBject）。<br> 最多可以存储4G的字符串。比如：存储一篇文章，存储一个说明。<br> 超过255个字符的都要采用CLOB字符大对象来存储。</p><h3 id="blob"><a href="#blob" class="headerlink" title="blob"></a>blob</h3><p>blob：二进制大对象（Binary Large OBject）。<br> 专门用来存储图片、声音、视频等流媒体数据。<br> 往BLOB类型的字段上插入数据的时候，例如插入一个图片、视频等，需要使用IO流才行。</p><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><p>创建一个学生表:<br>学号、姓名、年龄、性别、邮箱地址</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student(</span><br><span class="line"><span class="keyword">no</span> <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">32</span>),</span><br><span class="line">sex <span class="type">char</span>(<span class="number">1</span>),</span><br><span class="line">age <span class="type">int</span>(<span class="number">3</span>),</span><br><span class="line">email <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="表的删除"><a href="#表的删除" class="headerlink" title="表的删除"></a>表的删除</h2><p>删除表：<code>drop table t_student;</code>当这张表不存在的时候会报错！<br>??如果这张表存在的话，删除：<code>drop table if exists t_student;</code></p><h2 id="插入数据-insert-（DML）"><a href="#插入数据-insert-（DML）" class="headerlink" title="插入数据 insert （DML）"></a>插入数据 insert （DML）</h2><ul><li><p>语法格式： <code>insert into 表名(字段名1,字段名2,字段名3...) values(值1,值2,值3);</code></p><p>  注意：字段名和值要一一对应。什么是一一对应数量要对应，数据类型要对应。</p></li></ul><p>例如:<br>插入no为”1”、name为”zhangsan”、sex为”m”、age为”20”、email为”zhangsan@123.com”的数据：<code>insert into t_student(no,name,sex,age,email) values(1,&#39;zhangsan&#39;,&#39;m&#39;,20,&#39;zhangsan@123.com&#39;);</code></p><p>注意:</p><ol><li>insert语句但凡是执行成功了，那么必然会多一条记录。</li><li>没有给其它字段指定值的话，默认值是NULL。</li></ol><h3 id="创建新表，设置sex的默认值为”m”。"><a href="#创建新表，设置sex的默认值为”m”。" class="headerlink" title="创建新表，设置sex的默认值为”m”。"></a>创建新表，设置sex的默认值为”m”。</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student(</span><br><span class="line"><span class="keyword">no</span> <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">32</span>),</span><br><span class="line">sex <span class="type">char</span>(<span class="number">1</span>) <span class="keyword">default</span> <span class="string">&#x27;m&#x27;</span>,</span><br><span class="line">age <span class="type">int</span>(<span class="number">3</span>),</span><br><span class="line">email <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="省略字段"><a href="#省略字段" class="headerlink" title="省略字段"></a>省略字段</h3><p>insert语句中的“字段名”可以省略吗？可以。<br>??但是insert into t_student values(2); 是错误的，因为前面的字段名省略的话，等于都写上了，所以值也要都写上</p><h3 id="insert-插入日期"><a href="#insert-插入日期" class="headerlink" title="insert 插入日期"></a>insert 插入日期</h3><p>数字格式化：<code>format</code><br>从员工信息表中查询员工名和工资：<code>select ename,sal from emp;</code><br>格式化数字：<code>format(数字, &#39;格式&#39;)</code><br><code>select ename,format(sal, &#39;$999,999&#39;) as sal from emp;</code></p><p><code>str_to_date()</code>：将字符串varchar类型转换成date类型。<br><code>date_format()</code>：将date类型转换成具有一定格式的varchar字符串类型。<br><strong>在MySQL当中怎么获取系统当前时间？</strong><br><code>now()</code>函数，并且获取的时间带有时分秒信息，是<strong>datetime</strong>类型的。例如，<code>insert into t_user(id,name,birth,create_time) values(2,&#39;lisi&#39;,&#39;1991-10-01&#39;,now());</code></p><p>可以使用<code>str_to_date</code>函数进行类型转换。<code>str_to_date</code>函数可以将字符串varchar转换成日期类型date，语法格式：<code>str_to_date(&#39;字符串日期&#39;, &#39;日期格式&#39;)</code><br><br><br>MySQL的日期格式：<br>%Y 年<br>%m 月<br>%d 日<br>%h 时<br>%i 分<br>%s 秒</p><p>示例:<br>插入id为1，name为”zhangsan”，birth为1990年10月1日的数据语句改为：<code>insert into t_user(id,name,birth) values(1, &#39;zhangsan&#39;, str_to_date(&#39;01-10-1990&#39;,&#39;%d-%m-%Y&#39;));</code></p><p><code>date_format</code>这个函数可以将日期类型转换成特定格式的字符串。<br><code>date_format</code>函数的用法：<code>date_format(日期类型数据, &#39;日期格式&#39;)</code>，这个函数通常使用在查询日期方面，设置展示的日期格式。例如，<code>select id,name,date_format(birth, &#39;%m/%d/%Y&#39;) as birth from t_user;</code></p><h3 id="date-和-datetime-两个类型的区别"><a href="#date-和-datetime-两个类型的区别" class="headerlink" title="date 和 datetime 两个类型的区别"></a>date 和 datetime 两个类型的区别</h3><p>date是短日期：只包括年月日信息。<br>datetime是长日期：包括年月日时分秒信息。</p><p>MySQL短日期默认格式：%Y-%m-%d。<br>MySQL长日期默认格式：%Y-%m-%d %h:%i:%s</p><h2 id="修改-update（DML）"><a href="#修改-update（DML）" class="headerlink" title="修改 update（DML）"></a>修改 update（DML）</h2><p>语法格式：<code>update 表名 set 字段名1=值1,字段名2=值2,字段名3=值3... where 条件;</code><br>注意 set<br>注意： 没有条件限制会导致所有数据全部更新。</p><p>更新id为2的name、birth信息：<br><code>update t_user set name = &#39;jack&#39;, birth = &#39;2000-10-11&#39; where id = 2;</code><br>更新id为2的create_time信息：<br><code>update t_user set name = &#39;jack&#39;, birth = &#39;2000-10-11&#39;, create_time = now() where id = 2;</code><br>更新所有：<br><code>update t_user set name = &#39;abc&#39;;</code></p><h2 id="删除数据-delete-（DML）"><a href="#删除数据-delete-（DML）" class="headerlink" title="删除数据 delete （DML）"></a>删除数据 delete （DML）</h2><p>语法格式：delete from 表名 where 条件;<br>注意： 没有条件，整张表的数据会全部删除！</p><p>删除表中id为2的信息：<br><code>delete from t_user where id = 2;</code><br>插入id为2的数据：<br><code>insert into t_user(id) values(2);</code><br>删除所有：<br><code>delete from t_user;</code></p><h2 id="表的一些比较高级的操作"><a href="#表的一些比较高级的操作" class="headerlink" title="表的一些比较高级的操作"></a>表的一些比较高级的操作</h2><h3 id="insert-语句一次插入多条记录"><a href="#insert-语句一次插入多条记录" class="headerlink" title="insert 语句一次插入多条记录"></a>insert 语句一次插入多条记录</h3><p>insert 语句一次插入多条记录的语法:<code>insert into t_user(字段名1,字段名2) values(),(),(),();</code><br>示例:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user(id,name,birth,create_time) <span class="keyword">values</span></span><br><span class="line">(<span class="number">1</span>,<span class="string">&#x27;zs&#x27;</span>,<span class="string">&#x27;1980-10-11&#x27;</span>,now()), </span><br><span class="line">(<span class="number">2</span>,<span class="string">&#x27;lisi&#x27;</span>,<span class="string">&#x27;1981-10-11&#x27;</span>,now()),</span><br><span class="line">(<span class="number">3</span>,<span class="string">&#x27;wangwu&#x27;</span>,<span class="string">&#x27;1982-10-11&#x27;</span>,now());</span><br></pre></td></tr></table></figure><h3 id="快速创建表"><a href="#快速创建表" class="headerlink" title="快速创建表"></a>快速创建表</h3><p>快速创建表emp2：<code>create table emp2 as select * from emp;</code></p><h4 id="原理："><a href="#原理：" class="headerlink" title="原理："></a>原理：</h4><ol><li>将一个查询结果当做一张表新建！</li><li>这个可以完成表的快速复制！</li><li>表创建出来，同时表中的<strong>数据也存在了！</strong></li></ol><p>有条件的创建表mytable(只复制一部分新建)：<br><code>create table mytable as select empno,ename from emp where job = &#39;MANAGER&#39;;</code></p><h3 id="将查询结果插入到一张表当中"><a href="#将查询结果插入到一张表当中" class="headerlink" title="将查询结果插入到一张表当中"></a>将查询结果插入到一张表当中</h3><p>?快速创建表 dept_bak： <code>create table dept_bak as select * from dept;</code><br>将查询结果插入到表 dept_bak 当中：<code>insert into dept_bak select * from dept;</code>（很少用）</p><h3 id="快速删除表中的数据-较重要"><a href="#快速删除表中的数据-较重要" class="headerlink" title="快速删除表中的数据(较重要)"></a>快速删除表中的数据(较重要)</h3><p>删除 dept_bak 表中的数据：<code>delete from dept_bak;</code>，这种删除数据的方式比较慢。<br>delete语句删除数据的原理：（delete属于DML语句！）<br>表中的数据被删除了，但是这个数据在硬盘上的<strong>真实存储空间不会被释放！</strong><br>这种删除缺点是：删除效率比较低。<br>这种删除优点是：支持回滚，后悔了<u>可以再恢复数据！</u></p><p>truncate语句删除数据的原理：<br>这种删除效率比较高，表被一次截断，物理删除。<br>这种删除缺点：不支持回滚。<br>这种删除优点：快速。</p><p>truncate语句删除数据的用法：<code>truncate table dept_bak;</code>（这种操作属于DDL操作）</p><p>当大表非常大，例如上亿条记录，删除的时候，使用delete，也许需要执行1个小时才能删除完，效率较低。可以选择使用truncate删除表中的数据，只需要不到1秒钟的时间就删除结束，效率较高。但是使用truncate之前，必须仔细询问客户是否真的要删除，并警告删除之后不可恢复！</p><p>truncate是删除表中的数据，表还在！<br>删除表操作：<code>drop table 表名;</code>，<em>这不是删除表中的数据，这是把表删</em>除。</p><h3 id="对表结构的增删改-不太重要"><a href="#对表结构的增删改-不太重要" class="headerlink" title="对表结构的增删改(不太重要)"></a>对<strong>表</strong>结构的增删改(不太重要)</h3><p>什么是对表结构的修改？<br>??添加一个字段，删除一个字段，修改一个字段！</p><p>??对表结构的修改需要使用：alter（属于DDL语句，DDL包括：create 、drop 、alter。）</p><p>注意：</p><ol><li>在实际的开发中，需求一旦确定之后，表一旦设计好之后，很少的进行表结构的修改。因为开发进行中的时候，修改表结构，成本比较高。</li><li>由于修改表结构的操作很少，所以我们不需要掌握，如果有一天真的要修改表结构，可以使用工具！</li></ol><h2 id="创建表加入约束"><a href="#创建表加入约束" class="headerlink" title="创建表加入约束"></a>创建表加入约束</h2><h3 id="什么是约束"><a href="#什么是约束" class="headerlink" title="什么是约束"></a>什么是约束</h3><p>约束对应的英语单词：constraint。<br>在创建表的时候，我们可以给表中的字段加上一些约束，来保证这个表中数据的完整性、有效性！<br>约束的作用就是为了保证表中的数据有效！</p><h3 id="约束包括哪些"><a href="#约束包括哪些" class="headerlink" title="约束包括哪些"></a>约束包括哪些</h3><p>非空约束：<code>not null</code><br>唯一性约束：<code>unique</code><br>主键约束: <code>primary key</code> （简称PK）<br>外键约束：<code>foreign key</code>（简称FK）<br>检查约束：<code>check</code>（mysql不支持，oracle支持）</p><h3 id="非空约束-not-null"><a href="#非空约束-not-null" class="headerlink" title="非空约束 not null"></a>非空约束 not null</h3><p>非空约束<code>not null</code>：约束的字段不能为NULL。<br>示例:(创建一个表 t_vip)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_vip;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_vip(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><code>not null</code>只有列级约束，没有表级约束！<br>上面建表约束后:当只插入id信息，name信息为NULL时，会报错.</p><p>注意：</p><ol><li>xxxx.sql 这种文件被称为sql脚本文件。</li><li>sql 脚本文件中编写了大量的 sql 语句。我们执行sql脚本文件的时候，该文件中所有的 sql 语句会全部执行！</li><li>批量的执行 sql 语句，可以使用 sql 脚本文件。</li><li>在mysql当中执行sql脚本：source E:\工具+源码+资料\document\vip.sql</li></ol><h3 id="唯一性约束-unique"><a href="#唯一性约束-unique" class="headerlink" title="唯一性约束 unique"></a>唯一性约束 unique</h3><p>唯一性约束 unique ：约束的字段<strong>不能重复</strong>，但是<u>可以为NULL</u>。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_vip;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_vip(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">unique</span>,</span><br><span class="line">email <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_vip(id,name,email) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;zhangsan&#x27;</span>,<span class="string">&#x27;zhangsan@123.com&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_vip(id,name,email) <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;lisi&#x27;</span>,<span class="string">&#x27;lisi@123.com&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_vip(id,name,email) <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;wangwu&#x27;</span>,<span class="string">&#x27;wangwu@123.com&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_vip;</span><br></pre></td></tr></table></figure><p>当再插入的数据与之前的有重复时，会报错!<br>name字段虽然被unique约束了，但是可以为NULL。<br><code>name varchar(255) unique</code>，约束直接添加到列后面的，叫做<strong>列级约束</strong><br>不使用列级约束:<code>unique(name,email)</code>，约束没有添加在列的后面，这种约束被称为<strong>表级约束</strong>。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_vip;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_vip(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">email <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line"><span class="keyword">unique</span>(name,email) </span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_vip(id,name,email) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;zhangsan&#x27;</span>,<span class="string">&#x27;zhangsan@123.com&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_vip(id,name,email) <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;zhangsan&#x27;</span>,<span class="string">&#x27;zhangsan@sina.com&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_vip;</span><br></pre></td></tr></table></figure><p><strong>注意,这样不是这两个有一个重复都会报错,而是当两个同时重复才会报错</strong><br><code>unique</code> 和<code>not null</code>可以联合:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_vip;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_vip(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">desc</span> t_vip;</span><br></pre></td></tr></table></figure><p>在mysql当中，如果一个字段同时被not null和unique约束的话，该字段自动变成主键字段</p><h3 id="主键约束（primary-key）-非常非常重要"><a href="#主键约束（primary-key）-非常非常重要" class="headerlink" title="主键约束（primary key）(非常非常重要)"></a>主键约束（primary key）(<strong>非常非常重要</strong>)</h3><p>主键约束： primary key，简称PK。</p><h4 id="主键约束的相关术语："><a href="#主键约束的相关术语：" class="headerlink" title="主键约束的相关术语："></a>主键约束的相关术语：</h4><p>主键约束： 就是一种约束。<br>主键字段： 该字段上添加了主键约束，这样的字段叫做主键字段<br>主键值： 主键字段中的每一个值都叫做主键值。</p><h5 id="主键"><a href="#主键" class="headerlink" title="主键"></a>主键</h5><p>??每个表应该具有主键，主键可以标识记录的唯一性，主键分为单一主键和复合（联合）主键，单一主键是由一个字段构成的，复合（联合）主键是由多个字段构成的。</p><p>?什么是主键？有什么作用？<br>??主键值是每一行记录的唯一标识。主键值是每一行记录的身份证号(如果其他字段的值都相同,要求要有一个字段的值能够来区分)！<br>??<strong><strong>任何一张表都应该有主键，没有主键，<u>表无效</u>！(相当于人没有身份证号)</strong></strong><br>??<strong>主键的特征</strong>：not null + unique（主键值不能是NULL，同时也不能重复！）</p><p>示例(创建一个有主键的表):</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_vip;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_vip(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_vip(id,name) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_vip(id,name) <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;lisi&#x27;</span>);</span><br></pre></td></tr></table></figure><p>上述语句中，<code>id int primary key</code>为<strong>列级约束</strong>。<code>id</code>做主键：<strong>单一主键</strong>！</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_vip;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_vip(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line"><span class="keyword">primary</span> key(id) </span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_vip(id,name) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;zhangsan&#x27;</span>);</span><br></pre></td></tr></table></figure><p>其中，<code>primary key(id)</code>为<strong>表级约束</strong>。<code>id</code>和<code>name</code>联合起来做主键：<strong>复合主键</strong>！<br>(在实际开发中不建议使用复合主键，建议使用单一主键！因为主键值存在的意义就是这行记录的身份证号，只要意义达到即可，单一主键可以做到。而复合主键比较复杂，不建议使用。)</p><p><strong>一张表，主键约束只能添加1个（主键只能有1个）。</strong></p><h5 id="主键值"><a href="#主键值" class="headerlink" title="主键值"></a>主键值</h5><p>主键值建议使用int、bigint、char等类型，不建议使用varchar来做主键。主键值一般都是数字，一般都是定长的。</p><p>主键分类：<br>单一主键和复合主键<br>???单一主键：由一个字段构成。<br>???复合主键： 由多个字段构成。<br>自然主键和业务主键<br>???自然主键：主键值是一个自然数，和<u>业务没关系</u>。<br>???业务主键：主键值和业务紧密关联，例如拿银行卡账号做主键值。</p><p>??在实际开发中使用自然主键使用比较多，因为主键只要做到不重复就行，不需要有意义。业务主键不好，因为主键一旦和业务挂钩，那么当业务发生变动的时候，可能会影响到主键值，所以业务主键不建议使用，尽量使用自然主键。</p><p><strong>在mysql当中，有一种机制，可以帮助我们自动维护一个主键值。</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_vip;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_vip(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment, </span><br><span class="line">name <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_vip(name) <span class="keyword">values</span>(<span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_vip(name) <span class="keyword">values</span>(<span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_vip(name) <span class="keyword">values</span>(<span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_vip(name) <span class="keyword">values</span>(<span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_vip(name) <span class="keyword">values</span>(<span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_vip(name) <span class="keyword">values</span>(<span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_vip(name) <span class="keyword">values</span>(<span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_vip(name) <span class="keyword">values</span>(<span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_vip;</span><br></pre></td></tr></table></figure><p>其中，<code>id int primary key auto_increment</code>语句中<code>auto_increment</code>表示自增，从1开始，以1递增。<strong>auto_increment</strong><br><strong>使用了auto_increment之后如果不给id赋值id会自增,但是任然还是可以赋值,只是不能和前面重复了</strong></p><h3 id="外键约束（foreign-key）-非常非常重要"><a href="#外键约束（foreign-key）-非常非常重要" class="headerlink" title="外键约束（foreign key）(非常非常重要)"></a>外键约束（foreign key）(<strong>非常非常重要</strong>)</h3><p>外键约束： foreign key，简称FK。</p><h4 id="外键约束的相关术语："><a href="#外键约束的相关术语：" class="headerlink" title="外键约束的相关术语："></a>外键约束的相关术语：</h4><p>???外键约束： 一种约束（foreign key）。<br>???外键字段： 该字段上添加了外键约束。<br>???外键值： 外键字段当中的每一个值。</p><p>??外键主要是维护表之间的关系的，主要是为了保证参照完整性，如果表中的某个字段为外键字段，那么该字段的值必<br>须来源于参照的表的主键，如：emp 中的 deptno 值必须来源于 dept 表中的 deptno 字段值。</p><h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h4><p>业务背景： 请设计数据库表，来描述“班级和学生”的信息。</p><h5 id="第一种方案：班级和学生存储在一张表中"><a href="#第一种方案：班级和学生存储在一张表中" class="headerlink" title="第一种方案：班级和学生存储在一张表中"></a>第一种方案：班级和学生存储在一张表中</h5><pre><code>t_student</code></pre><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">no(pk)nameclassnoclassname</span><br><span class="line"> ----------------------------------------------------------------------------------</span><br><span class="line"> 1jack100      北京市大兴区亦庄镇第二中学高三1班</span><br><span class="line"> 2lucy100    北京市大兴区亦庄镇第二中学高三1班</span><br><span class="line"> 3lilei100    北京市大兴区亦庄镇第二中学高三1班</span><br><span class="line"> 4hanmeimei100    北京市大兴区亦庄镇第二中学高三1班</span><br><span class="line"> 5zhangsan101    北京市大兴区亦庄镇第二中学高三2班</span><br><span class="line"> 6lisi101    北京市大兴区亦庄镇第二中学高三2班</span><br><span class="line"> 7wangwu101    北京市大兴区亦庄镇第二中学高三2班</span><br><span class="line"> 8zhaoliu101    北京市大兴区亦庄镇第二中学高三2班</span><br></pre></td></tr></table></figure><p>以上方案的缺点：数据冗余，空间浪费！</p><h5 id="第二种方案：班级一张表、学生一张表"><a href="#第二种方案：班级一张表、学生一张表" class="headerlink" title="第二种方案：班级一张表、学生一张表"></a>第二种方案：班级一张表、学生一张表</h5><p>t_class 班级表</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">classno(pk)classname</span><br><span class="line">------------------------------------------------------</span><br><span class="line">100    北京市大兴区亦庄镇第二中学高三1班</span><br><span class="line">101    北京市大兴区亦庄镇第二中学高三1班</span><br></pre></td></tr></table></figure><p>t_student 学生表</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">no(pk)namecno(FK引用t_class这张表的classno)</span><br><span class="line">----------------------------------------------------------------</span><br><span class="line">1jack100</span><br><span class="line">2lucy100</span><br><span class="line">3lilei100</span><br><span class="line">4hanmeimei        100</span><br><span class="line">5zhangsan101</span><br><span class="line">6lisi101</span><br><span class="line">7wangwu            101</span><br><span class="line">8zhaoliu        101</span><br></pre></td></tr></table></figure><p>当cno字段没有任何约束的时候，可能会导致数据无效。可能出现一个102，但是102班级不存在。所以为了保证cno字段中的值都是100和101，需要给cno字段添加外键约束，那么cno字段就是外键字段，cno字段中的每一个值都是外键值。</p><h6 id="实现"><a href="#实现" class="headerlink" title="实现:"></a>实现:</h6><p>首先建立班级表 t_classes：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_classes;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_classes(</span><br><span class="line">    classes_id <span class="type">int</span>(<span class="number">3</span>),</span><br><span class="line">    classes_name <span class="type">varchar</span>(<span class="number">40</span>),</span><br><span class="line">    <span class="keyword">constraint</span> pk_classes_id <span class="keyword">primary</span> key(classes_id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>在 t_student <strong>中加入外键约束</strong>：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_student;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student(</span><br><span class="line">    student_id <span class="type">int</span>(<span class="number">10</span>),</span><br><span class="line">    student_name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    sex <span class="type">char</span>(<span class="number">2</span>),</span><br><span class="line">    birthday <span class="type">date</span>,</span><br><span class="line">    email <span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">    classes_id <span class="type">int</span>(<span class="number">3</span>),</span><br><span class="line">    <span class="keyword">constraint</span> student_id_pk <span class="keyword">primary</span> key(student_id),<span class="operator">/</span><span class="operator">/</span>主键</span><br><span class="line">    <span class="keyword">constraint</span> fk_classes_id <span class="keyword">foreign</span> key(classes_id) <span class="keyword">references</span> t_classes(classes_id) <span class="operator">/</span><span class="operator">/</span>外键</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>constraint的意思是约束<br>references的意思是引用<br><code>constraint fk_classes_id foreign key(classes_id) references t_classes(classes_id)</code>的意思是:受约束的fk_classes_id受外键(t_classes_id(在t_classes表中))约束,引用t_classes表中的class_id字段意思是在t_student表中的fk_classes_id的值只能是t_classes中classes_id中的值</p><p>注意：<br>t_class 是父表<br>t_student是子表<br>删除表的顺序：先删子，再删父。<br>创建表的顺序：先创建父，再创建子。<br>删除数据的顺序：先删子，再删父。<br>插入数据的顺序：先插入父，再插入子。</p><p>外键不一定是父表的主键,单=但至少要有unique约束(外键可以为null)</p><h1 id="存储引擎-了解"><a href="#存储引擎-了解" class="headerlink" title="存储引擎(了解)"></a>存储引擎(了解)</h1><h1 id="事务-非常非常重要"><a href="#事务-非常非常重要" class="headerlink" title="事务(非常非常重要)"></a>事务(<strong>非常非常重要</strong>)</h1><h2 id="什么是事务"><a href="#什么是事务" class="headerlink" title="什么是事务"></a>什么是事务</h2><p>一个事务其实就是一个完整的业务逻辑，是<u>一个最小的工作单元</u>，不可再分。</p><p>什么是一个完整的业务逻辑：<br>假设转账，从A账户向B账户中转账10000，<br>将A账户的钱减去10000（update语句），<br>将B账户的钱加上10000（update语句），<br>这就是一个完整的业务逻辑。</p><p>以上的操作是一个最小的工作单元，要么同时成功，要么同时失败，不可再分。这两个update语句要求必须同时成功或者同时失败，这样才能保证钱是正确的。</p><h2 id="与事务相关的语句"><a href="#与事务相关的语句" class="headerlink" title="与事务相关的语句"></a>与事务相关的语句</h2><p>只有DML语句才会有事务这一说，其它语句和事务无关。因此，只有<code>insert</code>、<code>delete</code>、<code>update</code>这三个语句和事务有关系，其它都没有关系。因为只有以上的三个语句是数据库表中数据进行增、删、改的。<br>??只要操作一旦涉及到数据的增、删、改，那么就一定要考虑安全问题，数据安全第一位！</p><h2 id="事务机制的存在价值"><a href="#事务机制的存在价值" class="headerlink" title="事务机制的存在价值"></a>事务机制的存在价值</h2><p>??假设所有的业务，只要一条DML语句就能完成，还有必要存在事务机制吗？<br>??正是因为做某件事的时候，需要多条DML语句共同联合起来才能完成，所以需要事务的存在。如果任何一件复杂的事儿都能一条DML语句搞定，那么事务则没有存在的价值了。</p><p>到底什么是事务呢？<br>本质上，一个事务其实就是多条DML语句<u><strong>同时</strong>成功，或者<strong>同时</strong>失败</u>！<br>事务： 就是批量的DML语句同时成功，或者同时失败！</p><h2 id="事务的执行过程"><a href="#事务的执行过程" class="headerlink" title="事务的执行过程"></a>事务的执行过程</h2><p>事务是怎么做到多条DML语句同时成功和同时失败的呢？<br>InnoDB存储引擎提供一组用来记录事务性活动的日志文件。</p><p>在事务的执行过程中，每一条DML的操作都会记录到“事务性活动的日志文件”中。</p><p>在事务的执行过程中，我们可以提交事务，也可以回滚事务。<br><strong>提交事务</strong>：<br>清空事务性活动的日志文件，将数据全部彻底持久化到数据库表中。提交事务标志着事务的结束，<strong>并且是一种<u>全部成功</u>的结束</strong>。</p><p><strong>回滚事务</strong>：<br>将之前所有的DML操作全部撤销，并且清空事务性活动的日志文件。回滚事务标志着事务的结束，<strong>并且是一种<u>全部失败</u>的结束</strong>。</p><h2 id="提交事务和回滚事务"><a href="#提交事务和回滚事务" class="headerlink" title="提交事务和回滚事务"></a>提交事务和回滚事务</h2><p>提交事务：commit; 语句<br>回滚事务：rollback; 语句（<strong>回滚永远都是只能回滚到上一次的提交点</strong>）</p><p>事务对应的英语单词是：transaction</p><p>mysql默认情况下是支持自动提交事务的。（自动提交）<br><strong>自动提交</strong>:每执行一条DML语句，则提交一次！</p><h3 id="怎么将mysql的自动提交机制关闭掉呢？"><a href="#怎么将mysql的自动提交机制关闭掉呢？" class="headerlink" title="怎么将mysql的自动提交机制关闭掉呢？"></a>怎么将mysql的自动提交机制关闭掉呢？</h3><p>先执行这个命令：`start transaction;</p><h3 id="回滚事务"><a href="#回滚事务" class="headerlink" title="回滚事务"></a>回滚事务</h3><p>先执行命令<code>start transaction;</code>将自动提交机制关闭，往空表 dept_bak1 中添加三条数据后，并没有提交，所以执行回滚命令之后，dept_bak1 会退回到空表状态。</p><h3 id="提交事务"><a href="#提交事务" class="headerlink" title="提交事务"></a>提交事务</h3><p>先执行命令<code>start transaction;</code>将自动提交机制关闭，往表 dept_bak1 中再添加两条条数据后，执行commit命令进行提交，所以执行回滚命令之后，dept_bak1 中数据依然存在。</p><h2 id="事务的4个特性"><a href="#事务的4个特性" class="headerlink" title="事务的4个特性"></a>事务的4个特性</h2><ol><li>原子性(A): 说明事务是最小的工作单元，不可再分。</li><li>一致性(C): 所有事务要求，在同一个事务当中，所有操作必须同时成功，或者同时失败，以保证数据的一致性。</li><li>隔离性(I):看后面</li><li>持久性(D):事务最终结束的一个保障。事务提交，就相当于将没有保存到硬盘上的数据保存到硬盘上！</li></ol><h2 id="事务的隔离性"><a href="#事务的隔离性" class="headerlink" title="事务的隔离性"></a>事务的隔离性</h2><p>??A教室和B教室中间有一道墙，这道墙可以很厚，也可以很薄，这就是事务的隔离级别。这道墙越厚，表示隔离级别就越高。</p><p>事务和事务之间的隔离级别有4个级别：</p><ol><li>读未提交： read uncommitted（最低的隔离级别），即没有提交就读到。<br> 什么是读未提交？-&gt;事务A可以读取到事务B未提交的数据。<br> 这种隔离级别存在的问题就是：脏读现象(Dirty Read)！我们称读到了脏数据。<br> 这种隔离级别一般都是理论上的，大多数的数据库隔离级别都是二档起步！(比这个高)</li><li>读已提交： read committed，即提交之后才能读到。<br> 什么是读已提交？-&gt;事务A只能读取到事务B提交之后的数据。<br> 这种隔离级别解决了什么问题？-&gt;解决了脏读的现象。<br> 这种隔离级别存在什么问题？-&gt;不可重复读取数据。<br> 什么是不可重复读取数据呢？-&gt;在事务开启之后，第一次读到的数据是3条，当前事务还没有结束，可能第二次再读取的时候，读到的数据是4条，3不等于4称为不可重复读取。<br> 这种隔离级别是比较真实的数据，每一次读到的数据是<u>绝对的真实</u>。<br> <strong>oracle数据库默认的隔离级别是：read committed。</strong></li><li>可重复读： repeatable read，即提交之后也读不到，永远读取的都是刚开启事务时的数据。<br> 什么是可重复读取？-&gt;事务A开启之后，不管是多久，每一次在事务A中读取到的数据都是一致的。即使事务B将数据已经修改，并且提交了，事务A读取到的数据还是没有发生改变，这就是可重复读。<br> 可重复读解决了什么问题？解决了不可重复读取数据。<br> 可重复读存在的问题是什么？可能会出现幻影读。每一次读取到的数据都是幻象，不够真实！早晨9点开始开启了事务，只要事务不结束，到晚上9点，<u>读到的数据还是那样！</u>读到的是假象，不够绝对的真实。<br> <strong>mysql中默认的事务隔离级别就是这个！</strong></li><li>序列化/串行化： serializable（最高的隔离级别），这是最高隔离级别，效率最低。<br> 解决了所有的问题。<br> 这种隔离级别表示事务<strong>排队</strong>，不能并发！<br> synchronized，线程同步（事务同步）<br> 每一次读取到的数据都是最真实的，并且效率是最低的。</li></ol><h5 id="验证：read-uncommited"><a href="#验证：read-uncommited" class="headerlink" title="验证：read uncommited"></a>验证：read uncommited</h5><p><code>set global transaction isolation level read uncommitted;</code></p><h5 id="验证：read-commited"><a href="#验证：read-commited" class="headerlink" title="验证：read commited"></a>验证：read commited</h5><p><code>set global transaction isolation level read committed;</code></p><h5 id="验证：repeatable-read"><a href="#验证：repeatable-read" class="headerlink" title="验证：repeatable read"></a>验证：repeatable read</h5><p><code>set global transaction isolation level repeatable read;</code></p><h5 id="验证：serializable"><a href="#验证：serializable" class="headerlink" title="验证：serializable"></a>验证：serializable</h5><p><code>set global transaction isolation level serializable;</code></p><h1 id="索引-index"><a href="#索引-index" class="headerlink" title="索引(index)"></a>索引(index)</h1><h2 id="什么是索引"><a href="#什么是索引" class="headerlink" title="什么是索引"></a>什么是索引</h2><p>?索引（index）是在数据库表的<strong>字段</strong>上添加的，是为了提高查询效率存在的一种机制。一张表的一个字段可以添加一个索引，当然，多个字段联合起来也可以添加索引。索引相当于一本书的目录，是为了缩小扫描范围而存在的一种机制。</p><p>对于一本字典来说，查找某个汉字有两种方式：</p><ol><li>一页一页挨着找，直到找到为止，这种查找方式属于全字典扫描，效率比较低。</li><li>先通过目录（索引）去定位一个大概的位置，然后直接定位到这个位置，做局域性扫描，缩小扫描的范围，快速的查找。这种查找方式属于通过索引检索，效率较高。<br> MySQL在查询方面主要就是两种方式：<br> 第一种方式：全表扫描。<br>  第二种方式：根据索引检索。</li></ol><p>注意：<br>在实际中，汉语字典前面的目录是排序的，按照a b c d e f…排序。为什么排序呢？因为只有排序了才会有区间查找这一说！（缩小扫描范围，其实就是扫描某个区间！）<br>??在mysql数据库当中索引也是需要排序的，并且这个索引的排序和TreeSet数据结构相同。TreeSet（TreeMap）底层是一个自平衡的二叉树！<br>??在mysql当中，索引是一个B-Tree数据结构。遵循左小又大原则存放，采用中序遍历方式遍历取数据。</p><h2 id="索引的实现原理"><a href="#索引的实现原理" class="headerlink" title="索引的实现原理"></a>索引的实现原理</h2><p>注意：</p><ol><li>在任何数据库当中，主键上都会自动添加索引对象，id字段上自动有索引，因为id是PK。另外在mysql当中，一个字段上如果有unique约束的话，也会自动创建索引对象</li><li>在任何数据库当中，任何一张表的任何一条记录在硬盘存储上都有一个硬盘的物理存储编号</li><li>在mysql当中，索引是一个单独的对象，不同的存储引擎以不同的形式存在，在MyISAM存储引擎中，索引存储在一个.MYI文件中。在InnoDB存储引擎中，索引存储在一个逻辑名称叫做tablespace的当中。在MEMORY存储引擎当中，索引被存储在内存当中。不管索引存储在哪里，索引在mysql当中都是一个树的形式存在。（自平衡二叉树：B-Tree）</li></ol><p><strong>表中字段不会动,是对对象地址排序</strong></p><h2 id="添加索引的条件"><a href="#添加索引的条件" class="headerlink" title="添加索引的条件"></a>添加索引的条件</h2><p>在mysql当中，主键上以及unique字段上都会自动添加索引的。<br>什么条件下，我们会考虑给字段添加索引呢？<br>条件1：数据量庞大。（到底有多么庞大算庞大，这个需要测试，因为每一个硬件环境不同。）<br>条件2：该字段经常出现在where的后面，以条件的形式存在，也就是说这个字段总是被扫描。<br>条件3：该字段很少的DML(insert、delete、update)操作。（因为DML之后，索引需要重新排序。）</p><p>建议不要随意添加索引，因为索引也是需要维护的，太多的话反而会降低系统的性能。<br>建议通过主键查询，建议通过unique约束的字段进行查询，效率是比较高的。</p><h2 id="索引的创建和删除"><a href="#索引的创建和删除" class="headerlink" title="索引的创建和删除"></a>索引的创建和删除</h2><p>创建索引： <code>create index emp_ename_index on emp(ename);</code><br> 给emp表的ename字段添加索引，起名为emp_ename_index</p><p>删除索引： <code>drop index emp_ename_index on emp;</code><br> 将emp表上的emp_ename_index索引对象删除。</p><h2 id="如何查看SQL语句是否使用索引进行检索"><a href="#如何查看SQL语句是否使用索引进行检索" class="headerlink" title="如何查看SQL语句是否使用索引进行检索"></a>如何查看SQL语句是否使用索引进行检索</h2><p>在mysql当中，怎么查看一个SQL语句是否使用了索引进行检索？<br><code>explain select * from emp where ename = &#39;KING&#39;;</code><br>扫描14条记录：说明没有使用索引(type=ALL)。</p><h2 id="索引失效的情况"><a href="#索引失效的情况" class="headerlink" title="索引失效的情况"></a>索引失效的情况</h2><h3 id="失效的第1种情况：-使用模糊查询的时候，条件以“-”开始。"><a href="#失效的第1种情况：-使用模糊查询的时候，条件以“-”开始。" class="headerlink" title="失效的第1种情况： 使用模糊查询的时候，条件以“%”开始。"></a>失效的第1种情况： 使用模糊查询的时候，条件以“%”开始。</h3><p><code>select * from emp where ename like &#39;%T&#39;;</code><br>ename上即使添加了索引，也不会走索引，为什么？原因是因为模糊匹配当中以“%”开头了！ 尽量避免模糊查询的时候以“%”开始。这是一种优化的手段/策略。</p><h3 id="失效的第2种情况：-使用or的时候会失效"><a href="#失效的第2种情况：-使用or的时候会失效" class="headerlink" title="失效的第2种情况： 使用or的时候会失效"></a>失效的第2种情况： 使用or的时候会失效</h3><p>如果使用or，那么要求or两边的条件字段都要有索引，才会走索引。如果其中一边有一个字段没有索引，那么另一个字段上的索引也会失效，所以这就是为什么不建议使用or的原因</p><h3 id="失效的第3种情况：-使用复合索引的时候"><a href="#失效的第3种情况：-使用复合索引的时候" class="headerlink" title="失效的第3种情况： 使用复合索引的时候"></a>失效的第3种情况： 使用复合索引的时候</h3><p>没有使用左侧的列查找，则索引失效。什么是复合索引？<br>两个字段，或者更多的字段联合起来添加一个索引，叫做复合索引。<br>创建复合索引：<code>create index emp_job_sal_index on emp(job,sal);</code><br>使用左侧的列查找：<code>explain select * from emp where job = &#39;MANAGER&#39;;</code>，索引未失效。<br>没有使用左侧的列查找：<code>explain select * from emp where sal = 800;</code>，索引失效。</p><h3 id="失效的第4种情况：-在where当中索引列参加了运算的时候"><a href="#失效的第4种情况：-在where当中索引列参加了运算的时候" class="headerlink" title="失效的第4种情况： 在where当中索引列参加了运算的时候"></a>失效的第4种情况： 在where当中索引列参加了运算的时候</h3><p>创建索引：<code>create index emp_sal_index on emp(sal);</code><br>在where当中索引列为未进行运算：<code>explain select * from emp where sal = 800;</code>，索引未失效。<br>在where当中索引列进行了运算：<code>explain select * from emp where sal+1 = 800;</code>，索引失效。</p><h3 id="失效的第5种情况：-在where当中索引列使用了函数"><a href="#失效的第5种情况：-在where当中索引列使用了函数" class="headerlink" title="失效的第5种情况： 在where当中索引列使用了函数"></a>失效的第5种情况： 在where当中索引<u>列</u>使用了函数</h3><p>explain select * from emp where lower(ename) = ‘smith’;</p><h2 id="索引的分类"><a href="#索引的分类" class="headerlink" title="索引的分类"></a>索引的分类</h2><p>??索引是各种数据库进行优化的重要手段，优化的时候优先考虑的因素就是索引。</p><p>?索引在数据库当中的分类：</p><p>单一索引： 一个字段上添加索引。<br>复合索引： 两个字段或者更多的字段上添加索引。<br>主键索引： 主键上添加索引。<br>唯一性索引： 具有unique约束的字段上添加索引。</p><h1 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h1><h2 id="什么是视图"><a href="#什么是视图" class="headerlink" title="什么是视图"></a>什么是视图</h2><p>视图(view)：站在不同的角度去看待同一份数据。</p><h2 id="创建和删除视图对象"><a href="#创建和删除视图对象" class="headerlink" title="创建和删除视图对象"></a>创建和删除视图对象</h2><p>创建视图对象：<code>create view dept2_view as select * from dept2;</code></p><p>删除视图对象：<code>drop view dept2_view;</code></p><p>注意：只有DQL语句才能以view的形式创建。<code>create view view_name as</code> 这里的语句必须是DQL语句</p><h2 id="视图的作用"><a href="#视图的作用" class="headerlink" title="视图的作用"></a>视图的作用</h2><p>我们可以面向视图对象进行增删改查，<strong>对视图对象的增删改查，会导致原表被操作！</strong>（视图的特点： 通过对视图的操作，会影响到原表数据。）</p><p>面向视图查询：<code>select * from dept2_view;</code><br>查询原表数据：<code>select * from dept2;</code><br>查询视图对象：<code>select * from emp_dept_view;</code></p><p>面向视图插入：<code>insert into dept2_view(deptno,dname,loc) values(60,&#39;SALES&#39;, &#39;BEIJING&#39;);</code></p><p>面向视图删除：<code>delete from dept2_view;</code></p><p>面向视图更新：<code>update emp_dept_view set sal = 1000 where dname = &#39;ACCOUNTING&#39;;</code><br>原表数据被更新：<code>select * from emp;</code></p><h2 id="视图对象的作用"><a href="#视图对象的作用" class="headerlink" title="视图对象的作用"></a>视图对象的作用</h2><p>视图对象在实际开发中到底有什么用？<br>??方便，简化开发，利于维护。</p><p>假设<strong>有一条非常复杂的SQL语句，而这条SQL语句需要在不同的位置上反复使用。每一次使用这个SQL语句的时候都需要重新编写，很长，很麻烦</strong>，怎么办？<br>??可以把这条复杂的SQL语句以视图对象的形式新建。在需要编写这条SQL语句的位置直接使用视图对象，可以大大简化开发。并且利于后期的维护，因为修改的时候也只需要修改一个位置就行，只需要修改视图对象所映射的SQL语句。</p><p>??以后面向视图开发的时候，使用视图的时候可以像使用table一样，可以对视图进行增删改查等操作。视图不是在内存当中，视图对象也是存储在硬盘上的，不会消失。<br>??注意：视图对应的语句只能是DQL语句，但是视图对象创建完成之后，可以对视图进行增删改查等操作。</p><p>??增删改查，又叫做：CRUD。CRUD是在公司中程序员之间沟通的术语，一般我们很少说增删改查，一般都说CRUD。</p><p>C：Create（增）<br>R：Retrive（查：检索）<br>U：Update（改）<br>D：Delete（删）</p><h1 id="DBA常用命令"><a href="#DBA常用命令" class="headerlink" title="DBA常用命令"></a>DBA常用命令</h1><p>只需要掌握:数据的导入和导出（数据的备份）。<br>其它命令了解一下即可。(使用其他用户之类的,到时候去查一查就好了)</p><h2 id="数据导出"><a href="#数据导出" class="headerlink" title="数据导出`"></a>数据导出`</h2><p><code>mysqldump bjpowernode emp&gt;D:\bjpowernode.sql -uroot -p123456</code></p><h2 id="数据导入："><a href="#数据导入：" class="headerlink" title="数据导入："></a>数据导入：</h2><p>注意：需要先登录到mysql数据库服务器上。<br>然后创建数据库：<code>create database bjpowernode;</code><br>使用数据库：<code>use bjpowernode</code><br>然后初始化数据库：<code>source D:\bjpowernode.sql</code></p><h1 id="数据库设计三范式"><a href="#数据库设计三范式" class="headerlink" title="数据库设计三范式"></a>数据库设计三范式</h1><p>数据库设计范式： 数据库表的设计依据，教我们怎么进行数据库表的设计。</p><p>第一范式： 要求任何一张表必须有主键，每一个字段原子性不可再分。<br>第二范式： 建立在第一范式的基础之上，要求所有非主键字段完全依赖主键，不要产生部分依赖。<br>第三范式： 建立在第二范式的基础之上，要求所有非主键字段直接依赖主键，不要产生传递依赖。</p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> 数据库 </tag>
            
            <tag> Java后端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>StringBuffer StringBuilder</title>
      <link href="/posts/2364755265.html"/>
      <url>/posts/2364755265.html</url>
      
        <content type="html"><![CDATA[<details>B站 韩顺平 老师课程的笔记</details><h1 id="StringBuffer-and-StringBuilder"><a href="#StringBuffer-and-StringBuilder" class="headerlink" title="StringBuffer and StringBuilder"></a>StringBuffer and StringBuilder</h1><blockquote><p>这两个类在Java编程算法中比较常用</p></blockquote><p>当对字符串进行修改的时候，需要使用 StringBuffer 和 StringBuilder 类。<br>和 String 类不同的是，StringBuffer 和 StringBuilder 类的对象能够被多次的修改，并且不产生新的未使用对象。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-05-01%20224255.png" alt="图片"></p><p><strong>StringBuffer的主要方法和StringBuilder的几乎一样，注意考虑何时使用何方法即可</strong><br>在使用 StringBuffer 类时，每次都会对 StringBuffer 对象本身进行操作，而不是生成新的对象，所以如果需要对字符串进行修改推荐使用 StringBuffer。<br>StringBuilder 类在 Java 5 中被提出，它和 StringBuffer 之间的最大不同在于 StringBuilder 的方法不是线程安全的（不能同步访问）。<br>由于 StringBuilder 相较于 StringBuffer 有速度优势，所以多数情况下建议使用 StringBuilder 类。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RunoobTest</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span>&#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="number">10</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;Runoob..&quot;</span>);</span><br><span class="line">        System.out.println(sb);  </span><br><span class="line">        sb.append(<span class="string">&quot;!&quot;</span>);</span><br><span class="line">        System.out.println(sb); </span><br><span class="line">        sb.insert(<span class="number">8</span>, <span class="string">&quot;Java&quot;</span>);</span><br><span class="line">        System.out.println(sb); </span><br><span class="line">        sb.delete(<span class="number">5</span>,<span class="number">8</span>);</span><br><span class="line">        System.out.println(sb);  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>然而在应用程序要求线程安全的情况下，则必须使用 StringBuffer 类。</strong></p><h2 id="StringBuilder的重要方法的代码尝试"><a href="#StringBuilder的重要方法的代码尝试" class="headerlink" title="StringBuilder的重要方法的代码尝试"></a>StringBuilder的重要方法的代码尝试</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.String_Class;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 一个可变的字符序列。 此类提供与StringBuffer兼容的API，但不保证同步。</span></span><br><span class="line"><span class="comment"> *  此类设计用作StringBuffer替代品，用于单个线程使用字符串缓冲区的位置（通常情况下）。</span></span><br><span class="line"><span class="comment"> * 在可能的情况下，建议使用此类优先于StringBuffer因为在大多数实现中它会更快。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * StringBuilder上的主要操作是append和insert方法，它们被重载以便接受任何类型的数据。</span></span><br><span class="line"><span class="comment"> * 每个都有效地将给定的数据转换为字符串，然后将该字符串的字符追加或插入到字符串构建器中。</span></span><br><span class="line"><span class="comment"> *  append方法始终在构建器的末尾添加这些字符; insert方法在指定点添加字符。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringBuilderStudy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        //todo 构造方法</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * StringBuilder()</span></span><br><span class="line"><span class="comment">         *                  构造一个字符串构建器，其中不包含任何字符，初始容量为16个字符。</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * StringBuilder(int capacity)</span></span><br><span class="line"><span class="comment">         *                  构造一个字符串构建器，其中没有字符，并且具有 capacity参数指定的初始容量。</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * StringBuilder(CharSequence seq)</span></span><br><span class="line"><span class="comment">         *                  构造一个字符串构建器，其中包含与指定的 CharSequence相同的字符。</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         *StringBuilder(String str)</span></span><br><span class="line"><span class="comment">         *                  构造一个初始化为指定字符串内容的字符串构建器。</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        java.lang.<span class="type">StringBuilder</span> <span class="variable">sb1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        java.lang.<span class="type">StringBuilder</span> <span class="variable">sb2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="number">10</span>);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * append为追加命令，可将东西（Boolean、long long等）转换为字符串</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        sb1.append(<span class="string">&quot;zhang&quot;</span>);</span><br><span class="line">        sb1.append(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        sb1.append(<span class="string">&quot;yon&quot;</span>);</span><br><span class="line">        sb1.append(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        <span class="type">char</span>[] chars = &#123;<span class="string">&#x27;r&#x27;</span>,<span class="string">&#x27;u&#x27;</span>,<span class="string">&#x27;i&#x27;</span>&#125;;</span><br><span class="line">        sb1.append(chars);</span><br><span class="line">        System.out.println(sb1);</span><br><span class="line">        System.out.println(sb1.capacity());<span class="comment">//*返回当前容量</span></span><br><span class="line">        System.out.println(sb1.charAt(<span class="number">0</span>));<span class="comment">//*返回下标为0的字符</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">testString1</span> <span class="operator">=</span> <span class="string">&quot;yon&quot;</span>;</span><br><span class="line">        System.out.println(sb1.indexOf(testString1));<span class="comment">//*返回指定子字符串第一次出现的字符串中的索引。</span></span><br><span class="line">        System.out.println(sb1.indexOf(testString1,<span class="number">5</span>));<span class="comment">//*从指定的索引处开始，返回指定子字符串第一次出现的字符串中的索引。</span></span><br><span class="line">        sb1.deleteCharAt(<span class="number">3</span>);<span class="comment">//*删除下标为3的元素</span></span><br><span class="line">        System.out.println(sb1);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * insert()是插入命令，第一个参数为插入位置，第二个参数为插入如元素，insert()必须要有第一个参数</span></span><br><span class="line"><span class="comment">         * 如果第一个参数为sb1.length()是和append()同样的效果</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        sb1.insert(<span class="number">3</span>,<span class="string">&#x27;n&#x27;</span>);<span class="comment">//*插入后，此插入字符在第三给下标的位置</span></span><br><span class="line">        System.out.println(sb1);</span><br><span class="line">        sb1.delete(<span class="number">8</span>,<span class="number">10</span>);<span class="comment">//*删除下标区间为[8,10]的元素</span></span><br><span class="line">        System.out.println(sb1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//*下面的比对可以看出 容量和长度不同，容量一般大于等于长度</span></span><br><span class="line">        System.out.println(sb1.capacity());</span><br><span class="line">        System.out.println(sb1.length());</span><br><span class="line">        sb1.trimToSize();<span class="comment">//*尝试减少用于字符序列的存储空间。</span></span><br><span class="line">        System.out.println(sb1.capacity());</span><br><span class="line">        System.out.println(sb1.length());</span><br><span class="line"></span><br><span class="line">        sb1.setCharAt(<span class="number">0</span>,<span class="string">&#x27;f&#x27;</span>);<span class="comment">//*将下标为0的位置的字符修改为f</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         todo 取子字符串</span></span><br><span class="line"><span class="comment">         * Stringsubstring(int start)</span></span><br><span class="line"><span class="comment">         *          返回一个新的 String ，其中包含此字符序列中当前包含的字符的子序列。</span></span><br><span class="line"><span class="comment">         * Stringsubstring(int start, int end)</span></span><br><span class="line"><span class="comment">         *          返回一个新的 String ，其中包含当前包含在此序列中的字符的子序列。</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">testString2</span> <span class="operator">=</span> sb1.substring(<span class="number">4</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">testString3</span> <span class="operator">=</span> sb1.substring(<span class="number">4</span>,<span class="number">8</span>);</span><br><span class="line">        System.out.println(testString2);</span><br><span class="line">        System.out.println(testString3);</span><br><span class="line"></span><br><span class="line">        sb1.reverse();<span class="comment">//*导致此字符序列被序列的反向替换。</span></span><br><span class="line">        System.out.println(sb1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java基础 </tag>
            
            <tag> 集合 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Set接口</title>
      <link href="/posts/3312011324.html"/>
      <url>/posts/3312011324.html</url>
      
        <content type="html"><![CDATA[<details>B站 韩顺平 老师课程的笔记</details><h1 id="Set接口"><a href="#Set接口" class="headerlink" title="Set接口"></a>Set接口</h1><h2 id="基本介绍（实现Set接口的类的共性）"><a href="#基本介绍（实现Set接口的类的共性）" class="headerlink" title="基本介绍（实现Set接口的类的共性）"></a>基本介绍（实现Set接口的类的共性）</h2><ol><li>无序（添加和取出的顺序不一致，没有索引）</li><li>不允许有重复元素，所以最多包含一个null</li><li>实现接口的类很多，说明最常见的类</li><li>Set接口可List都是Collection的子接口，很多公有部分的方法都可以使用，建议先看一遍<a href="/posts/3546711884.html" title="集合">集合</a></li></ol><h2 id="基本方法"><a href="#基本方法" class="headerlink" title="基本方法"></a>基本方法</h2><p><strong>以实现Set接口的类HashSet来演示Set接口的方法</strong><br>只有两种遍历方法，因为没有索引</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Set</span> <span class="variable">set</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashSet</span>();</span><br><span class="line">    <span class="comment">//展示不能存放重复元素，顺序会变化(只是和添加进去的顺序不同，但是每次取出的顺序不会变)</span></span><br><span class="line">    set.add(<span class="string">&quot;john&quot;</span>);</span><br><span class="line">    set.add(<span class="string">&quot;lucy&quot;</span>);</span><br><span class="line">    set.add(<span class="string">&quot;john&quot;</span>);</span><br><span class="line">    set.add(<span class="string">&quot;jack&quot;</span>);</span><br><span class="line">    set.add(<span class="string">&quot;mary&quot;</span>);</span><br><span class="line">    set.add(<span class="literal">null</span>);</span><br><span class="line">    set.add(<span class="literal">null</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;set: &quot;</span> + set);<span class="comment">//输出set: [null, mary, john, lucy, jack],看后面的输出会发现输出的顺序不会变</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//遍历</span></span><br><span class="line">    <span class="comment">//方式1：使用迭代器</span></span><br><span class="line">    System.out.println(<span class="string">&quot;==使用迭代器遍历==&quot;</span>);</span><br><span class="line">    <span class="type">Iterator</span> <span class="variable">iterator</span> <span class="operator">=</span> set.iterator();</span><br><span class="line">    <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">        System.out.println(<span class="string">&quot;obj: &quot;</span> + obj);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//方式2：使用增强for(因为增强for的底层实现实际上还是迭代器)</span></span><br><span class="line">    System.out.println(<span class="string">&quot;==使用增强for遍历==&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(Object obj : set)&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;obj: &quot;</span> + obj);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其他看文件<a href="/posts/3546711884.html" title="集合">集合</a></p><h3 id="主要实现类"><a href="#主要实现类" class="headerlink" title="主要实现类"></a>主要实现类</h3><ol><li><a href="/posts/1222166338.html" title="HashSet">HashSet</a></li><li><a href="/posts/570165348.html" title="LinkedHashSet">LinkedHashSet</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Java基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java基础 </tag>
            
            <tag> 集合 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Map接口</title>
      <link href="/posts/3513711414.html"/>
      <url>/posts/3513711414.html</url>
      
        <content type="html"><![CDATA[<details>B站 韩顺平 老师课程的笔记</details><h1 id="Map接口"><a href="#Map接口" class="headerlink" title="Map接口"></a>Map接口</h1><h2 id="常用Map接口实现类"><a href="#常用Map接口实现类" class="headerlink" title="常用Map接口实现类"></a>常用Map接口实现类</h2><ol><li>HashMap</li><li>Hashtable</li><li>Properties</li></ol><h3 id="HashMap小结"><a href="#HashMap小结" class="headerlink" title="HashMap小结"></a>HashMap小结</h3><ul><li>HashMap是Map接口使用频率最高的实现类</li><li>HashMap是以key-value对的方式来储存数据</li><li>key不能重复,但是值可以重复,允许使用null键和null值</li><li>如果添加相同的key,则会覆盖原来的key-value,等同于修改(key不会替换,val会替换)</li><li>与HashSet一样,不能保证映射的顺序,因为底层是以hash表的方式来储存的(jdk8的hashMap底层是 数组+链表+红黑树)</li><li>HashMap没有实现同步,因此是线程不安全的</li></ul><h2 id="Map接口实现类-都有的特点"><a href="#Map接口实现类-都有的特点" class="headerlink" title="Map接口实现类 都有的特点"></a>Map接口实现类 都有的特点</h2><p>以HashMap举例:</p><ol><li>Map与Collection并列存在。用于保存具有映射关系的数据：Key-Value(无序)</li><li>Map中的key和value可以是任何引用类型的数据，会封装到HashMap$Node对象中</li><li>Map中的key不允许重复，原因和HashSet一样（前面分析过源码）</li><li>Map中的key可以为null，value也可以为null，注意，key为null，只能有一个，value为null，可以为多个</li><li>常用String类作为Map的key</li><li>key和value之间存在单向一对一关系，即通过指定的key总能找到对应的value</li><li>一对k-v是放在一个HashMap$Node中的，因为Node实现了Entry的接口，有些书也说 一对k-v就是一个Entry<br> 自我总结：key影响位置，value是值，key相等表示在同一个位置</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Map_</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//        1. Map与Collection并列存在。用于保存具有映射关系的数据：Key-Value(无序)</span></span><br><span class="line">        <span class="type">Map</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        map.put(<span class="string">&quot;no.1&quot;</span>,<span class="string">&quot;牛逼&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;no.2&quot;</span>,<span class="string">&quot;牛人&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;map= &quot;</span> + map);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        2. Map中的key和value可以是任何引用类型的数据，会封装到HashMap$Node对象中</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        3. Map中的key不允许重复，原因和HashSet一样（前面分析过源码）</span></span><br><span class="line">        map.put(<span class="string">&quot;no.1&quot;</span>,<span class="string">&quot;小狗&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;map= &quot;</span> + map);<span class="comment">//可以看出当key相等的时候就相当于是替换value</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        4. Map中的key可以为null，value也可以为null，注意，key为null，只能有一个，value为null，可以为多个</span></span><br><span class="line">        map.put(<span class="literal">null</span>,<span class="string">&quot;小牛&quot;</span>);</span><br><span class="line">        map.put(<span class="literal">null</span>,<span class="literal">null</span>);</span><br><span class="line">        map.put(<span class="string">&quot;no.3&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;map= &quot;</span> + map);<span class="comment">//因为多个key为null，既然都是null那么这几个的位置都相同，就会被替换</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        5. 常用String类作为Map的key//本例中基本上都是用到String类作为key（key可以为任何类型）</span></span><br><span class="line"><span class="comment">//        6. key和value之间存在单向一对一关系，即通过指定的key总能找到对应的value</span></span><br><span class="line">        System.out.println(map.get(<span class="string">&quot;no.2&quot;</span>));<span class="comment">//&quot;no.2&quot;是key，key相当于是位置，等价于数组中的下标，所以可以类似得到对应位置的值</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapSource_</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Map</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        map.put(<span class="string">&quot;no1&quot;</span>, <span class="string">&quot;韩顺平&quot;</span>);<span class="comment">//k-v</span></span><br><span class="line">        map.put(<span class="string">&quot;no2&quot;</span>, <span class="string">&quot;张无忌&quot;</span>);<span class="comment">//k-v</span></span><br><span class="line">        map.put(<span class="keyword">new</span> <span class="title class_">Car</span>(), <span class="keyword">new</span> <span class="title class_">Person</span>());<span class="comment">//k-v</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//1. k-v 最后是 HashMap$Node node = newNode(hash, key, value, null)</span></span><br><span class="line">        <span class="comment">//2. k-v 为了方便程序员的遍历，还会 创建 EntrySet 集合 ，该集合存放的元素的类型 Entry, 而一个Entry</span></span><br><span class="line">        <span class="comment">//   对象就有k,v EntrySet&lt;Entry&lt;K,V&gt;&gt; 即： transient Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet;</span></span><br><span class="line">        <span class="comment">//3. entrySet 中， 定义的类型是 Map.Entry ，但是实际上存放的还是 HashMap$Node</span></span><br><span class="line">        <span class="comment">//   这时因为 static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt;</span></span><br><span class="line">        <span class="comment">//4. 当把 HashMap$Node 对象 存放到 entrySet 就方便我们的遍历, 因为 Map.Entry 提供了重要方法</span></span><br><span class="line">        <span class="comment">//   K getKey(); V getValue();</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Set</span> <span class="variable">set</span> <span class="operator">=</span> map.entrySet();</span><br><span class="line">        System.out.println(set.getClass());<span class="comment">// HashMap$EntrySet</span></span><br><span class="line">        <span class="keyword">for</span> (Object obj : set) &#123;</span><br><span class="line">            <span class="comment">//System.out.println(obj.getClass()); //HashMap$Node</span></span><br><span class="line">            <span class="comment">//为了从 HashMap$Node 取出k-v</span></span><br><span class="line">            <span class="comment">//1. 先做一个向下转型</span></span><br><span class="line">            Map.<span class="type">Entry</span> <span class="variable">entry</span> <span class="operator">=</span> (Map.Entry) obj;</span><br><span class="line">            System.out.println(entry.getKey() + <span class="string">&quot;-&quot;</span> + entry.getValue() );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Set</span> <span class="variable">set1</span> <span class="operator">=</span> map.keySet();</span><br><span class="line">        System.out.println(set1.getClass());</span><br><span class="line">        <span class="type">Collection</span> <span class="variable">values</span> <span class="operator">=</span> map.values();</span><br><span class="line">        System.out.println(values.getClass());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h2><h3 id="方法列举"><a href="#方法列举" class="headerlink" title="方法列举"></a>方法列举</h3><ol><li>put():添加</li><li>remove():根据键删除映射关系</li><li>get():根据键获取值</li><li>size():获取元素个数</li><li>isEmpty():判断个数是否为0</li><li>clear():清除</li><li>containsKey():查找键是否存在</li><li>containsValue():查找值是否存在</li></ol><h3 id="代码尝试"><a href="#代码尝试" class="headerlink" title="代码尝试"></a>代码尝试</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapMethod_</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//演示Map常用方法</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//        1. put():添加 返回类型是Object</span></span><br><span class="line">        <span class="type">Map</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        map.put(<span class="string">&quot;邓超&quot;</span>,<span class="string">&quot;孙俪&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;牛逼&quot;</span>,<span class="string">&quot;小牛人&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;牛逼&quot;</span>,<span class="string">&quot;大牛人&quot;</span>);<span class="comment">//演示替换</span></span><br><span class="line">        map.put(<span class="string">&quot;zyr&quot;</span>,<span class="string">&quot;fengweng&quot;</span>);</span><br><span class="line">        map.put(<span class="literal">null</span>,<span class="string">&quot;单身狗&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;book&quot;</span>,<span class="keyword">new</span> <span class="title class_">Book</span>(<span class="string">&quot;无&quot;</span>,<span class="number">100</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;map= &quot;</span> + map);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        2. remove():根据键删除映射关系</span></span><br><span class="line">        map.remove(<span class="string">&quot;邓超&quot;</span>);<span class="comment">//删除key为&quot;邓超&quot;的一对k-v</span></span><br><span class="line">        System.out.println(<span class="string">&quot;map= &quot;</span> + map);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        3. get():根据键获取值,返回Object类型,只能是Object类型(可直接输出)</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">v</span> <span class="operator">=</span> map.get(<span class="literal">null</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;key=null对应value: &quot;</span> + v);</span><br><span class="line">        System.out.println(<span class="string">&quot;key=zyr对应value: &quot;</span> + map.get(<span class="string">&quot;zyr&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//        4. size():获取元素个数,返回值是int类型</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> map.size();</span><br><span class="line">        <span class="type">Map</span> <span class="variable">map1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        map1.put(<span class="string">&quot;测试&quot;</span>,<span class="string">&quot;个数&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;map.size() = &quot;</span> + num);</span><br><span class="line">        System.out.println(<span class="string">&quot;map1.size() = &quot;</span> + map1.size());</span><br><span class="line"></span><br><span class="line"><span class="comment">//        5. isEmpty():判断个数是否为0,返回值是boolean类型</span></span><br><span class="line"><span class="comment">//        6. clear():清除(将所有内容都删除)，返回类型是void</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">is</span> <span class="operator">=</span> map.isEmpty();</span><br><span class="line">        map1.clear();<span class="comment">//清空map1</span></span><br><span class="line">        System.out.println(<span class="string">&quot;map.isEmpty() = &quot;</span> + is);</span><br><span class="line">        System.out.println(<span class="string">&quot;map1.isEmpty() = &quot;</span> + map1.isEmpty());</span><br><span class="line"></span><br><span class="line"><span class="comment">//        7. containsKey():查找键是否存在,返回类型是boolean</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">ck</span> <span class="operator">=</span> map.containsKey(<span class="string">&quot;zyr&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;map.containsKey(\&quot;zyr\&quot;) = &quot;</span> + ck);</span><br><span class="line">        System.out.println(<span class="string">&quot;map.containsKey(\&quot;没有的键\&quot;) = &quot;</span> + map.containsKey(<span class="string">&quot;没有的键&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//        8.containsValue():查找值是否存在，返回类型是boolean</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">cv</span> <span class="operator">=</span> map.containsValue(<span class="string">&quot;fengweng&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;map.containsValue(\&quot;fengewng\&quot;) = &quot;</span> + cv);</span><br><span class="line">        System.out.println(<span class="string">&quot;map.containsVaule(\&quot;没有的值\&quot;) = &quot;</span> + map.containsValue(<span class="string">&quot;没有的值&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> num;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Book</span><span class="params">(String name, <span class="type">int</span> num)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.num = num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Book&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, num=&quot;</span> + num +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="输出展示"><a href="#输出展示" class="headerlink" title="输出展示"></a>输出展示</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">map= &#123;邓超=孙俪, <span class="literal">null</span>=单身狗, zyr=fengweng, book=Book&#123;name=<span class="string">&#x27;无&#x27;</span>, num=<span class="number">100</span>&#125;, 牛逼=大牛人&#125;</span><br><span class="line">map= &#123;<span class="literal">null</span>=单身狗, zyr=fengweng, book=Book&#123;name=<span class="string">&#x27;无&#x27;</span>, num=<span class="number">100</span>&#125;, 牛逼=大牛人&#125;</span><br><span class="line">key=<span class="literal">null</span>对应value: 单身狗</span><br><span class="line">key=zyr对应value: fengweng</span><br><span class="line">map.size() = <span class="number">4</span></span><br><span class="line">map1.size() = <span class="number">1</span></span><br><span class="line">map.isEmpty() = <span class="literal">false</span></span><br><span class="line">map1.isEmpty() = <span class="literal">true</span></span><br><span class="line">map.containsKey(<span class="string">&quot;zyr&quot;</span>) = <span class="literal">true</span></span><br><span class="line">map.containsKey(<span class="string">&quot;没有的键&quot;</span>) = <span class="literal">false</span></span><br><span class="line">map.containsValue(<span class="string">&quot;fengweng&quot;</span>) = <span class="literal">true</span></span><br><span class="line">map.containsVaule(<span class="string">&quot;没有的值&quot;</span>) = <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="Map六大遍历方式"><a href="#Map六大遍历方式" class="headerlink" title="Map六大遍历方式"></a>Map六大遍历方式</h2><ol><li>containsKey():查找键的方式</li><li>containsValue():查找值的方式</li><li>keySet():获取所有值v</li><li>entrySet():获取所有关系k-v</li><li>values():获取所有值v</li><li>key():获取所有键k</li></ol><h3 id="代码展示"><a href="#代码展示" class="headerlink" title="代码展示"></a>代码展示</h3><p>只展示了较复杂的遍历情况</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Map_traversal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//将六大遍历方式</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建待遍历map</span></span><br><span class="line">        <span class="type">Map</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        map.put(<span class="string">&quot;邓超&quot;</span>,<span class="string">&quot;孙俪&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;牛逼&quot;</span>,<span class="string">&quot;牛人&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;zyr&quot;</span>,<span class="string">&quot;fengweng&quot;</span>);</span><br><span class="line">        map.put(<span class="literal">null</span>,<span class="string">&quot;单身狗&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        3. keySet():获取所有值v</span></span><br><span class="line">        <span class="comment">//先取出所有的key，通过key取出对应的value (Set)</span></span><br><span class="line">        <span class="type">Set</span> <span class="variable">kset</span> <span class="operator">=</span> map.keySet();</span><br><span class="line">        <span class="comment">//Set又有两种遍历方式</span></span><br><span class="line">        <span class="comment">//(1)增强for</span></span><br><span class="line">        System.out.println(<span class="string">&quot;----keySet()增强for----&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(Object o : kset)&#123;</span><br><span class="line">            System.out.println(o + <span class="string">&quot;-&quot;</span> + map.get(o));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//(2)迭代器</span></span><br><span class="line">        System.out.println(<span class="string">&quot;----keySet()迭代器----&quot;</span>);</span><br><span class="line">        <span class="type">Iterator</span> <span class="variable">iterator</span> <span class="operator">=</span> kset.iterator();</span><br><span class="line">        <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">            <span class="comment">//System.out.println(iterator.next() + &quot;-&quot; + map.get(iterator.next()));//这样些有问题，两次next()</span></span><br><span class="line">            <span class="type">Object</span> <span class="variable">ob</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            System.out.println(ob + <span class="string">&quot;-&quot;</span> + map.get(ob));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        4. entrySet():获取所有关系k-v</span></span><br><span class="line">        <span class="type">Set</span> <span class="variable">entrySet</span> <span class="operator">=</span> map.entrySet();</span><br><span class="line">        <span class="comment">//(1)增强for</span></span><br><span class="line">        System.out.println(<span class="string">&quot;----entrySet()增强for----&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(Object entry : entrySet) &#123;</span><br><span class="line">            Map.<span class="type">Entry</span> <span class="variable">m</span> <span class="operator">=</span> (Map.Entry) entry;<span class="comment">//要先转型</span></span><br><span class="line">            System.out.println(m.getKey() + <span class="string">&quot;-&quot;</span> + m.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//(2)迭代器</span></span><br><span class="line">        System.out.println(<span class="string">&quot;----entrySet()迭代器----&quot;</span>);</span><br><span class="line">        <span class="type">Iterator</span> <span class="variable">iterator2</span> <span class="operator">=</span> entrySet.iterator();</span><br><span class="line">        <span class="keyword">while</span>(iterator2.hasNext())&#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">next</span> <span class="operator">=</span> iterator2.next();</span><br><span class="line"><span class="comment">//            System.out.println(next + &quot;-&quot; + map.get(next));//这一句也可输出</span></span><br><span class="line">            Map.<span class="type">Entry</span> <span class="variable">entry</span> <span class="operator">=</span> (Map.Entry) next;<span class="comment">//要先转型</span></span><br><span class="line">            System.out.println(entry.getKey() + <span class="string">&quot;-&quot;</span> + entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        5. values():获取所有值v</span></span><br><span class="line">        <span class="comment">//先把所有values取出来(Collection)</span></span><br><span class="line">        <span class="type">Collection</span> <span class="variable">vcol</span> <span class="operator">=</span> map.values();</span><br><span class="line">        <span class="comment">//Collection有两种遍历方式</span></span><br><span class="line">        <span class="comment">//(1)增强for</span></span><br><span class="line">        System.out.println(<span class="string">&quot;----values()增强for----&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(Object o : vcol)&#123;<span class="comment">//冒号后面其实也可以直接式map.values()</span></span><br><span class="line">            System.out.println(o + <span class="string">&quot;-&quot;</span> + map.get(o));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//(2)迭代器(省略)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java基础 </tag>
            
            <tag> 集合 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vector</title>
      <link href="/posts/482495853.html"/>
      <url>/posts/482495853.html</url>
      
        <content type="html"><![CDATA[<details>B站 韩顺平 老师课程的笔记</details><h1 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a>Vector</h1><h2 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h2><ul><li>Vector底层也是一个对象数组，<code>protected Object[] elementData;</code></li><li>Vector是线程同步的，即线程安全的，Vector类的操作方法带有  <code>synchronized</code>关键字，即：</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">synchronized</span> E <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(indexx &gt;= elementCount) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArrayIndexOutOfBoundsException</span>(index);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> elementDate(index);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>在开发中，需要线程同步安全时，考虑使用Vector</li></ul><h2 id="与ArrayList比较"><a href="#与ArrayList比较" class="headerlink" title="与ArrayList比较"></a>与ArrayList比较</h2><div class="table-container"><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">底层结构</th><th style="text-align:center">版本</th><th style="text-align:center">线程安全（同步）效率</th><th style="text-align:center">扩容倍速</th></tr></thead><tbody><tr><td style="text-align:center">ArrayList</td><td style="text-align:center">可变数组</td><td style="text-align:center">jdk1.2</td><td style="text-align:center">不安全，效率高</td><td style="text-align:center">如果是有参构造器就扩容1.5倍；如果是无参，第一次讲容量设为10，从第二次开始就扩容1.5倍</td></tr><tr><td style="text-align:center">Vector</td><td style="text-align:center">可变数组Object[]</td><td style="text-align:center">jdk1.0</td><td style="text-align:center">安全，效率不高</td><td style="text-align:center">如果是无参，默认容量为10，满后，就按2倍扩容；如果指定大小，则每次直接2被扩容</td></tr></tbody></table></div><h2 id="看源码"><a href="#看源码" class="headerlink" title="看源码"></a>看源码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">//无参构造器</span></span><br><span class="line">    <span class="comment">//有参数的构造</span></span><br><span class="line">    <span class="type">Vector</span> <span class="variable">vector</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Vector</span>(<span class="number">8</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        vector.add(<span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;vector=&quot;</span> + vector)</span><br><span class="line">    <span class="comment">//1. new Vector() 底层</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        public Vector() &#123;</span></span><br><span class="line"><span class="comment">        this(10);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        补充：如果是 Vector vector = new Vector(8);</span></span><br><span class="line"><span class="comment">        走的方法:</span></span><br><span class="line"><span class="comment">        public Vector(int initialCapacity) &#123;</span></span><br><span class="line"><span class="comment">        this(initialCapacity, 0);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">        2. vector.add(i)</span></span><br><span class="line"><span class="comment">        2.1 //下面这个方法就添加数据到 vector 集合</span></span><br><span class="line"><span class="comment">        public synchronized boolean add(E e) &#123;</span></span><br><span class="line"><span class="comment">        modCount++;</span></span><br><span class="line"><span class="comment">        ensureCapacityHelper(elementCount + 1);</span></span><br><span class="line"><span class="comment">        elementData[elementCount++] = e;</span></span><br><span class="line"><span class="comment">        return true;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        2.2 //确定是否需要扩容 条件 ： minCapacity - elementData.length&gt;0</span></span><br><span class="line"><span class="comment">        private void ensureCapacityHelper(int minCapacity) &#123;</span></span><br><span class="line"><span class="comment">        // overflow-conscious code</span></span><br><span class="line"><span class="comment">        if (minCapacity - elementData.length &gt; 0</span></span><br><span class="line"><span class="comment">        grow(minCapacity);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        2.3 //如果 需要的数组大小 不够用，就扩容 , 扩容的算法</span></span><br><span class="line"><span class="comment">        //newCapacity = oldCapacity + ((capacityIncrement &gt; 0) ?</span></span><br><span class="line"><span class="comment">        // capacityIncrement : oldCapacity);</span></span><br><span class="line"><span class="comment">        //就是扩容两倍. private void grow(int minCapacity) &#123;</span></span><br><span class="line"><span class="comment">        // overflow-conscious code</span></span><br><span class="line"><span class="comment">        int oldCapacity = elementData.length;</span></span><br><span class="line"><span class="comment">        int newCapacity = oldCapacity + ((capacityIncrement &gt; 0) ?</span></span><br><span class="line"><span class="comment">        capacityIncrement : oldCapacity);</span></span><br><span class="line"><span class="comment">        if (newCapacity - minCapacity &lt; 0)</span></span><br><span class="line"><span class="comment">        newCapacity = minCapacity;</span></span><br><span class="line"><span class="comment">        if (newCapacity - MAX_ARRAY_SIZE &gt; 0)</span></span><br><span class="line"><span class="comment">        newCapacity = hugeCapacity(minCapacity);</span></span><br><span class="line"><span class="comment">        elementData = Arrays.copyOf(elementData, newCapacity);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java基础 </tag>
            
            <tag> 集合 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>List接口</title>
      <link href="/posts/1168613674.html"/>
      <url>/posts/1168613674.html</url>
      
        <content type="html"><![CDATA[<details>B站 韩顺平 老师课程的笔记</details><h1 id="List接口"><a href="#List接口" class="headerlink" title="List接口"></a>List接口</h1><h2 id="List接口的介绍"><a href="#List接口的介绍" class="headerlink" title="List接口的介绍"></a>List接口的介绍</h2><p>List接口是Collection的子接口</p><ol><li>List集合类中的元素有序（即添加顺序和取出顺序一致）、且可重复</li><li>List集合类中的每个元素都有其对应的顺序索引，即支持索引(List特点)</li><li>List容器中的元素都对应一个整数型的序号记载其在容器中的位置，可以根据序号存取容器中的元素</li><li>常见的实现类有：ArrayList、LinkedList、Vector（基本一样，很多都有的方法，例如add,remove,set等）</li></ol><h2 id="选择使用"><a href="#选择使用" class="headerlink" title="选择使用"></a>选择使用</h2><ul><li>ArrayList效率高，但多线程的时候不安全，在非多线程的情况下使用ArrayList更好</li><li>Vector线程安全，在多线程情况下考虑用Vector更好</li><li>LinkedList增删效率最高，因为底层不是用数组实现的，线程也不安全</li></ul><h3 id="ArrayList与Vector比较"><a href="#ArrayList与Vector比较" class="headerlink" title="ArrayList与Vector比较"></a>ArrayList与Vector比较</h3><div class="table-container"><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">底层结构</th><th style="text-align:center">版本</th><th style="text-align:center">线程安全（同步）效率</th><th style="text-align:center">扩容倍速</th></tr></thead><tbody><tr><td style="text-align:center">ArrayList</td><td style="text-align:center">可变数组</td><td style="text-align:center">jdk1.2</td><td style="text-align:center">不安全，效率高</td><td style="text-align:center">如果是有参构造器就扩容1.5倍；如果是无参，第一次讲容量设为10，从第二次开始就扩容1.5倍</td></tr><tr><td style="text-align:center">Vector</td><td style="text-align:center">可变数组Object[]</td><td style="text-align:center">jdk1.0</td><td style="text-align:center">安全，效率不高</td><td style="text-align:center">如果是无参，默认容量为10，满后，就按2倍扩容；如果指定大小，则每次直接2被扩容</td></tr></tbody></table></div><h3 id="ArrayList与LinkedList比较"><a href="#ArrayList与LinkedList比较" class="headerlink" title="ArrayList与LinkedList比较"></a>ArrayList与LinkedList比较</h3><div class="table-container"><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">底层结构</th><th style="text-align:center">增删的效率</th><th style="text-align:center">改查效率</th></tr></thead><tbody><tr><td style="text-align:center">ArrayList</td><td style="text-align:center">可变数组</td><td style="text-align:center">较低，需要数组扩容</td><td style="text-align:center">较高，直接改下标位置值</td></tr><tr><td style="text-align:center">LinkedList</td><td style="text-align:center">双向链表</td><td style="text-align:center">较高，通过链表追加，不需要扩容</td><td style="text-align:center">较低，需要再建立连接等操作</td></tr></tbody></table></div><p>所以改查多用ArrayList，改查少用LinkedList<br>一般来说改查用到都多，一般都是ArrayList</p><h2 id="List常用方法介绍"><a href="#List常用方法介绍" class="headerlink" title="List常用方法介绍"></a>List常用方法介绍</h2><h3 id="常用方法："><a href="#常用方法：" class="headerlink" title="常用方法："></a>常用方法：</h3><ul><li>void add(int index, Object ele):在 index 位置插入 ele 元素</li><li>boolean addAll(int index, Collection eles):从 index 位置开始将 eles 中的所有元素添加进来</li><li>Object get(int index):获取指定 index 位置的元素</li><li>int indexOf(Object obj):返回 obj 在集合中首次出现的位置</li><li>int lastIndexOf(Object obj):返回 obj 在当前集合中末次出现的位置</li><li>Object remove(int index):移除指定 index 位置的元素，并返回此元素</li><li>Object set(int index, Object ele):设置指定 index 位置的元素为 ele , 相当于是替换. list.set(1, “玛丽”);</li><li>List subList(int fromIndex, int toIndex):返回从 fromIndex 到 toIndex 位置的子集合</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">List</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">    list.add(<span class="string">&quot;张三丰&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;贾宝玉&quot;</span>);</span><br><span class="line">    <span class="comment">// void add(int index, Object ele):在 index 位置插入 ele 元素</span></span><br><span class="line">    <span class="comment">//在 index = 1 的位置插入一个对象</span></span><br><span class="line">    list.add(<span class="number">1</span>, <span class="string">&quot;牛人&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;list=&quot;</span> + list);</span><br><span class="line">    <span class="comment">// boolean addAll(int index, Collection eles):从 index 位置开始将 eles 中的所有元素添加进来</span></span><br><span class="line">    <span class="type">List</span> <span class="variable">list2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">    list2.add(<span class="string">&quot;jack&quot;</span>);</span><br><span class="line">    list2.add(<span class="string">&quot;tom&quot;</span>);</span><br><span class="line">    list.addAll(<span class="number">1</span>, list2);</span><br><span class="line">    System.out.println(<span class="string">&quot;list=&quot;</span> + list);</span><br><span class="line">    <span class="comment">// Object get(int index):获取指定 index 位置的元素</span></span><br><span class="line">    <span class="comment">//说过</span></span><br><span class="line">    <span class="comment">// int indexOf(Object obj):返回 obj 在集合中首次出现的位置</span></span><br><span class="line">    System.out.println(list.indexOf(<span class="string">&quot;tom&quot;</span>));<span class="comment">//2</span></span><br><span class="line">    <span class="comment">// int lastIndexOf(Object obj):返回 obj 在当前集合中末次出现的位置</span></span><br><span class="line">    list.add(<span class="string">&quot;牛人&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;list=&quot;</span> + list);</span><br><span class="line">    System.out.println(list.lastIndexOf(<span class="string">&quot;牛人&quot;</span>));</span><br><span class="line">    <span class="comment">// Object remove(int index):移除指定 index 位置的元素，并返回此元素</span></span><br><span class="line">    list.remove(<span class="number">0</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;list=&quot;</span> + list);</span><br><span class="line">    <span class="comment">// Object set(int index, Object ele):设置指定 index 位置的元素为 ele , 相当于是替换. list.set(1, &quot;玛丽&quot;);</span></span><br><span class="line">    System.out.println(<span class="string">&quot;list=&quot;</span> + list);</span><br><span class="line">    <span class="comment">// List subList(int fromIndex, int toIndex):返回从 fromIndex 到 toIndex 位置的子集合</span></span><br><span class="line">    <span class="comment">// 注意返回的子集合 fromIndex &lt;= subList</span></span><br><span class="line">    <span class="type">List</span> <span class="variable">returnlist</span> <span class="operator">=</span> list.subList(<span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;returnlist=&quot;</span> + returnlist);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用普通for遍历输出"><a href="#使用普通for遍历输出" class="headerlink" title="使用普通for遍历输出"></a>使用普通for遍历输出</h2><p>由于List有<strong>索引</strong>的特点索引可以有第三种遍历输出方式(实现了List的类都可以)<br>第一种为迭代器输出，第二种为增强for循环输出（底层还是迭代器输出），具体看文章<a href="/posts/3546711884.html" title="集合">集合</a></p><h3 id="代码展示"><a href="#代码展示" class="headerlink" title="代码展示"></a>代码展示</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i&lt;list.size();i++)&#123;</span><br><span class="line">    <span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> list.get(i);</span><br><span class="line">    System.out.println(object);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="常用类解析"><a href="#常用类解析" class="headerlink" title="常用类解析"></a>常用类解析</h2><ol><li><a href="/posts/1219920510.html" title="ArrayList">ArrayList</a></li><li><a href="/posts/482495853.html" title="Vector">Vector</a></li><li><a href="/posts/707384687.html" title="LinkedList">LinkedList</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Java基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java基础 </tag>
            
            <tag> 集合 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LinkedList</title>
      <link href="/posts/707384687.html"/>
      <url>/posts/707384687.html</url>
      
        <content type="html"><![CDATA[<details>B站 韩顺平 老师课程的笔记</details><h1 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h1><h2 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h2><ol><li>LinkedList 底层实现了双向链表和双端队列</li><li>可以添加任意元素（元素可以重复），包括null</li><li>线程不安全，没有实现同步</li></ol><h2 id="LinkedList-底层结构"><a href="#LinkedList-底层结构" class="headerlink" title="LinkedList 底层结构"></a>LinkedList 底层结构</h2><ol><li>底层维护了一个双向链表</li><li>维护了两个属性first和last分别指向 首节点和尾节点</li><li>每个节点（Node对象），里面又维护了prev、next、item三个属性，其中通过prev指向前一个，通过next指向后一个节点。最终实现双向链表。</li><li>所以LinkedList的元素的添加和删除，不是通过数组完成的，相对来说效率较高</li><li>模拟一个简单的双向链表</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.list_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jdk.nashorn.internal.objects.annotations.Constructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedList_01</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">   <span class="comment">//模拟一个简单的双向链表(只是最简单的)</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">//先创建三个对象</span></span><br><span class="line">   <span class="type">Node</span> <span class="variable">jack</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="string">&quot;jack&quot;</span>);</span><br><span class="line">   <span class="type">Node</span> <span class="variable">niuren</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="string">&quot;牛人&quot;</span>);</span><br><span class="line">   <span class="type">Node</span> <span class="variable">tom</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="string">&quot;tom&quot;</span>);</span><br><span class="line"></span><br><span class="line">   <span class="comment">//将三个对象链接起来成为双向链表</span></span><br><span class="line">   <span class="comment">//先形成jack-&gt;tom-&gt;niuren的单向链表</span></span><br><span class="line">   jack.next = tom;</span><br><span class="line">   tom.next = niuren;</span><br><span class="line">   <span class="comment">//在形成jack&lt;-tom&lt;-niuren的链表，相当于就是双向了</span></span><br><span class="line">   niuren.pre = tom;</span><br><span class="line">   tom.pre = jack;</span><br><span class="line"></span><br><span class="line">   <span class="type">Node</span> <span class="variable">first</span> <span class="operator">=</span> jack;<span class="comment">//让first应用指向jack，就是双向链表的头结点</span></span><br><span class="line">   <span class="type">Node</span> <span class="variable">last</span> <span class="operator">=</span> niuren;<span class="comment">//让last引用指向niuren，就是双向链表的尾结点</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">//演示从头到尾遍历</span></span><br><span class="line">   System.out.println(<span class="string">&quot;====从头到尾遍历====&quot;</span>);</span><br><span class="line">   <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">       <span class="keyword">if</span>(first == <span class="literal">null</span>)&#123;</span><br><span class="line">           <span class="keyword">break</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//输出first的信息</span></span><br><span class="line">      System.out.println(first);</span><br><span class="line">       first = first.next;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//演示从尾到头遍历</span></span><br><span class="line">   System.out.println(<span class="string">&quot;====从尾到头遍历====&quot;</span>);</span><br><span class="line">   <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">       <span class="keyword">if</span>(last == <span class="literal">null</span>)&#123;</span><br><span class="line">           <span class="keyword">break</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//输出last的值</span></span><br><span class="line">       System.out.println(last);</span><br><span class="line">       last = last.pre;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//演示插入节点</span></span><br><span class="line">   <span class="comment">//先创建一个节点，插入到tom和niuren之间</span></span><br><span class="line">   <span class="type">Node</span> <span class="variable">smith</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="string">&quot;smith&quot;</span>);</span><br><span class="line">   tom.next = smith;</span><br><span class="line">   smith.next = niuren;</span><br><span class="line">   niuren.pre = smith;</span><br><span class="line">   smith.pre = tom;</span><br><span class="line">   <span class="comment">//遍历输出，就只展示从头到尾了，从尾到头很类似</span></span><br><span class="line">   <span class="comment">//之前的first已经移动过了，所以先要再次指向头部（jack）</span></span><br><span class="line">   System.out.println(<span class="string">&quot;====插入新结点后遍历====&quot;</span>);</span><br><span class="line">   first = jack;</span><br><span class="line">   <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">       <span class="keyword">if</span>(first == <span class="literal">null</span>)&#123;</span><br><span class="line">           <span class="keyword">break</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       System.out.println(first);</span><br><span class="line">       first = first.next;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//演示删除结点</span></span><br><span class="line">   <span class="comment">//删除tom</span></span><br><span class="line">   jack.next = smith;</span><br><span class="line">   smith.pre = jack;</span><br><span class="line">   tom = <span class="literal">null</span>;</span><br><span class="line">   <span class="comment">//遍历输出，就只展示从头到尾了，从尾到头很类似</span></span><br><span class="line">   <span class="comment">//之前的first已经移动过了，所以先要再次指向头部（jack）</span></span><br><span class="line">   System.out.println(<span class="string">&quot;====删除结点后遍历====&quot;</span>);</span><br><span class="line">   first = jack;</span><br><span class="line">   <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">       <span class="keyword">if</span>(first == <span class="literal">null</span>)&#123;</span><br><span class="line">           <span class="keyword">break</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       System.out.println(first);</span><br><span class="line">       first = first.next;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//定义一个Node类，，Node 对象 表示双向链表的一个节点</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>&#123;</span><br><span class="line"><span class="keyword">public</span> Object item;<span class="comment">//真正的数据</span></span><br><span class="line"><span class="keyword">public</span> Node next;<span class="comment">//指向下一个节点(相当于指针)</span></span><br><span class="line"><span class="keyword">public</span> Node pre;<span class="comment">//指向前一个节点(相当于指针)</span></span><br><span class="line"><span class="comment">//构造器</span></span><br><span class="line"><span class="keyword">public</span>  <span class="title function_">Node</span><span class="params">(Object name)</span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.item = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;Node name=&quot;</span> + item;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LinkedList-的增删改查案例"><a href="#LinkedList-的增删改查案例" class="headerlink" title="LinkedList 的增删改查案例"></a>LinkedList 的增删改查案例</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.list_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedListCRUD</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建LinkedList</span></span><br><span class="line">        <span class="type">LinkedList</span> <span class="variable">linkedList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinkedList</span>();</span><br><span class="line">        linkedList.add(<span class="number">1</span>);</span><br><span class="line">        linkedList.add(<span class="number">2</span>);</span><br><span class="line">        linkedList.add(<span class="number">3</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;linkedList=&quot;</span> + linkedList);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//演示一个删除结点的</span></span><br><span class="line">        linkedList.remove(); <span class="comment">// 这里默认删除的是第一个结点</span></span><br><span class="line">        <span class="comment">//linkedList.remove(2);</span></span><br><span class="line">        System.out.println(<span class="string">&quot;linkedList=&quot;</span> + linkedList);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//修改某个结点对象</span></span><br><span class="line">        linkedList.set(<span class="number">1</span>, <span class="number">999</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;linkedList=&quot;</span> + linkedList);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//得到某个结点对象</span></span><br><span class="line">        <span class="comment">//get(1) 是得到双向链表的第二个对象</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> linkedList.get(<span class="number">1</span>);</span><br><span class="line">        System.out.println(o);<span class="comment">//999</span></span><br><span class="line">        <span class="comment">//因为 LinkedList 是 实现了 List 接口, 遍历方式</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;===LinkeList 遍历迭代器====&quot;</span>);</span><br><span class="line">        <span class="type">Iterator</span> <span class="variable">iterator</span> <span class="operator">=</span> linkedList.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">next</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            System.out.println(<span class="string">&quot;next=&quot;</span> + next);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;===LinkeList 遍历增强 for====&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Object o1 : linkedList) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;o1=&quot;</span> + o1);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;===LinkeList 遍历普通 for====&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; linkedList.size(); i++) &#123;</span><br><span class="line">            System.out.println(linkedList.get(i));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//源码及解析：</span></span><br><span class="line">        <span class="comment">/* 1. LinkedList linkedList = new LinkedList();</span></span><br><span class="line"><span class="comment">            public LinkedList() &#123;&#125;</span></span><br><span class="line"><span class="comment">            2. 这时 linkeList 的属性 first = null last</span></span><br><span class="line"><span class="comment">            3. 执行 添加</span></span><br><span class="line"><span class="comment">            public boolean add(E e) &#123;</span></span><br><span class="line"><span class="comment">                linkLast(e);</span></span><br><span class="line"><span class="comment">                return true;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">            4.将新的结点，加入到双向链表的最后</span></span><br><span class="line"><span class="comment">            void linkLast(E e) &#123;</span></span><br><span class="line"><span class="comment">                final Node&lt;E&gt; l = last;</span></span><br><span class="line"><span class="comment">                final Node&lt;E&gt; newNode = new Node&lt;&gt;(l, e, null);</span></span><br><span class="line"><span class="comment">                last = newNode;</span></span><br><span class="line"><span class="comment">                if (l == null)</span></span><br><span class="line"><span class="comment">                first = newNode;</span></span><br><span class="line"><span class="comment">                else</span></span><br><span class="line"><span class="comment">                l.next = newNode;</span></span><br><span class="line"><span class="comment">                size++;</span></span><br><span class="line"><span class="comment">                modCount++;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">            linkedList.remove(); // 这里默认删除的是第一个结点</span></span><br><span class="line"><span class="comment">            1. 执行 removeFirst</span></span><br><span class="line"><span class="comment">            public E remove() &#123;</span></span><br><span class="line"><span class="comment">                return removeFirst();</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">            2. 执行</span></span><br><span class="line"><span class="comment">            public E removeFirst() &#123;</span></span><br><span class="line"><span class="comment">                final Node&lt;E&gt; f = first;</span></span><br><span class="line"><span class="comment">                if (f == null)</span></span><br><span class="line"><span class="comment">                    throw new NoSuchElementException();</span></span><br><span class="line"><span class="comment">                return unlinkFirst(f);</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">            3. 执行 unlinkFirst, 将 f 指向的双向链表的第一个结点拿掉</span></span><br><span class="line"><span class="comment">            private E unlinkFirst(Node&lt;E&gt; f) &#123;</span></span><br><span class="line"><span class="comment">                // assert f == first &amp;&amp; f != null;</span></span><br><span class="line"><span class="comment">                final E element = f.item;</span></span><br><span class="line"><span class="comment">                final Node&lt;E&gt; next = f.next;</span></span><br><span class="line"><span class="comment">                f.item = null;</span></span><br><span class="line"><span class="comment">                f.next = null; // help GC</span></span><br><span class="line"><span class="comment">                first = next;</span></span><br><span class="line"><span class="comment">                if (next == null)</span></span><br><span class="line"><span class="comment">                    last = null;</span></span><br><span class="line"><span class="comment">                else</span></span><br><span class="line"><span class="comment">                    next.prev = null;</span></span><br><span class="line"><span class="comment">                size--;</span></span><br><span class="line"><span class="comment">                modCount++;</span></span><br><span class="line"><span class="comment">                return element;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="特殊点"><a href="#特殊点" class="headerlink" title="特殊点"></a>特殊点</h2><p>remove有三种，可选择下标删除，可选择指定对象删除<br>第三种，没有参数，默认删除最后一个元素</p>]]></content>
      
      
      <categories>
          
          <category> Java基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java基础 </tag>
            
            <tag> 集合 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LinkedHashSet</title>
      <link href="/posts/570165348.html"/>
      <url>/posts/570165348.html</url>
      
        <content type="html"><![CDATA[<details>B站 韩顺平 老师课程的笔记</details><h1 id="LinkedHashSet"><a href="#LinkedHashSet" class="headerlink" title="LinkedHashSet"></a>LinkedHashSet</h1><h2 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h2><ul><li>LinkedHashSet继承了HashSet</li><li>LinkedHashSet的底层是一个LinkedHashMap(HashMap的一个子类),底层维护了一个 数组+==双向==链表（不同索引上的元素构成这个双向链表，即所有元素来形成链表，而不是在单个索引的范围内相互形成链表）</li><li>LinkedHashSet根据元素的hashCode值来决定元素的储存位置，同时使用链表来维护元素的次序，这使得元素看起来是以插入排序保存的（加入顺序和取出顺序相同）。==有顺序就是LinkedHashMap的优点==</li><li>LinkedHashSet也是Set接口实现类所以也不允许有重复的元素</li></ul><h2 id="实践尝试"><a href="#实践尝试" class="headerlink" title="实践尝试"></a>实践尝试</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Car 类(属性:name,price)，  如果 name 和 price 一样，</span></span><br><span class="line"><span class="comment"> * 则认为是相同元素，就不能添加。 </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedHashSetExercise</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">LinkedHashSet</span> <span class="variable">linkedHashSet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinkedHashSet</span>();</span><br><span class="line">        linkedHashSet.add(<span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&quot;奥拓&quot;</span>, <span class="number">1000</span>));<span class="comment">//OK</span></span><br><span class="line">        linkedHashSet.add(<span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&quot;奥迪&quot;</span>, <span class="number">300000</span>));<span class="comment">//OK</span></span><br><span class="line">        linkedHashSet.add(<span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&quot;法拉利&quot;</span>, <span class="number">10000000</span>));<span class="comment">//OK</span></span><br><span class="line">        linkedHashSet.add(<span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&quot;奥迪&quot;</span>, <span class="number">300000</span>));<span class="comment">//加入不了</span></span><br><span class="line">        linkedHashSet.add(<span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&quot;保时捷&quot;</span>, <span class="number">70000000</span>));<span class="comment">//OK</span></span><br><span class="line">        linkedHashSet.add(<span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&quot;奥迪&quot;</span>, <span class="number">300000</span>));<span class="comment">//加入不了</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;linkedHashSet=&quot;</span> + linkedHashSet);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> price;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">(String name, <span class="type">double</span> price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPrice</span><span class="params">(<span class="type">double</span> price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;\nCar&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, price=&quot;</span> + price +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重写equals 方法 和 hashCode</span></span><br><span class="line">    <span class="comment">//当 name 和 price 相同时， 就返回相同的 hashCode 值, equals返回t</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span> == o) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="literal">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> (Car) o;</span><br><span class="line">        <span class="keyword">return</span> Double.compare(car.price, price) == <span class="number">0</span> &amp;&amp;</span><br><span class="line">                Objects.equals(name, car.name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.hash(name, price);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedHashSetSource</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//分析一下LinkedHashSet的底层机制</span></span><br><span class="line">        <span class="type">Set</span> <span class="variable">set</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinkedHashSet</span>();</span><br><span class="line">        set.add(<span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;AA&quot;</span>));</span><br><span class="line">        set.add(<span class="number">456</span>);</span><br><span class="line">        set.add(<span class="number">456</span>);</span><br><span class="line">        set.add(<span class="keyword">new</span> <span class="title class_">Customer</span>(<span class="string">&quot;刘&quot;</span>, <span class="number">1001</span>));</span><br><span class="line">        set.add(<span class="number">123</span>);</span><br><span class="line">        set.add(<span class="string">&quot;HSP&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;set=&quot;</span> + set);</span><br><span class="line">        <span class="comment">//1. LinkedHashSet 加入顺序和取出元素/数据的顺序一致</span></span><br><span class="line">        <span class="comment">//2. LinkedHashSet 底层维护的是一个LinkedHashMap(是HashMap的子类)</span></span><br><span class="line">        <span class="comment">//3. LinkedHashSet 底层结构 (数组table+双向链表)</span></span><br><span class="line">        <span class="comment">//4. 添加第一次时，直接将 数组table 扩容到 16 ,存放的结点类型是 LinkedHashMap$Entry</span></span><br><span class="line">        <span class="comment">//5. 数组是 HashMap$Node[] 存放的元素/数据是 LinkedHashMap$Entry类型</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">                //继承关系是在内部类完成.</span></span><br><span class="line"><span class="comment">                static class Entry&lt;K,V&gt; extends HashMap.Node&lt;K,V&gt; &#123;</span></span><br><span class="line"><span class="comment">                    Entry&lt;K,V&gt; before, after;</span></span><br><span class="line"><span class="comment">                    Entry(int hash, K key, V value, Node&lt;K,V&gt; next) &#123;</span></span><br><span class="line"><span class="comment">                        super(hash, key, value, next);</span></span><br><span class="line"><span class="comment">                    &#125;</span></span><br><span class="line"><span class="comment">                &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Customer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> no;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Customer</span><span class="params">(String name, <span class="type">int</span> no)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.no = no;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java基础 </tag>
            
            <tag> 集合 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HashSet</title>
      <link href="/posts/1222166338.html"/>
      <url>/posts/1222166338.html</url>
      
        <content type="html"><![CDATA[<details>B站 韩顺平 老师课程的笔记</details><h1 id="HashSet"><a href="#HashSet" class="headerlink" title="HashSet"></a>HashSet</h1><h2 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h2><ul><li>实现了Set接口</li><li>底层实际上是HashMap，HashMap的底层机制实际上是数组+链表+红黑树（目的是高效）（也就不能再用索引了）</li><li>可以存放null值，但只能有一个null</li><li>HashSet不保证元素是有序的，取决于hash后，再确定索引的结果</li><li>不能有重复的元素/对象。实现Set接口的类的共同点</li></ul><h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><p>在执行add方法后，会返回一个boolean值，如果添加成功，返回true，如果添加失败返回false</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Set</span> <span class="variable">set</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashSet</span>();<span class="comment">//底层走的是HashMap</span></span><br><span class="line"></span><br><span class="line">System.out.println(set.add(<span class="string">&quot;john&quot;</span>));<span class="comment">//true</span></span><br><span class="line">System.out.println(set.add(<span class="string">&quot;lucy&quot;</span>));<span class="comment">//true</span></span><br><span class="line">System.out.println(set.add(<span class="string">&quot;john&quot;</span>));<span class="comment">//false</span></span><br><span class="line">System.out.println(set.add(<span class="string">&quot;jack&quot;</span>));<span class="comment">//true</span></span><br><span class="line">System.out.println(set.add(<span class="string">&quot;mary&quot;</span>));<span class="comment">//true</span></span><br><span class="line">System.out.println(set.add(<span class="literal">null</span>));<span class="comment">//true</span></span><br><span class="line">System.out.println(set.add(<span class="literal">null</span>));<span class="comment">//false</span></span><br></pre></td></tr></table></figure><p>这样就知道为什么set中没有重复的元素了</p><h2 id="添加机制"><a href="#添加机制" class="headerlink" title="添加机制"></a>添加机制</h2><p><strong>先获取哈希值（hashCode()方法），对哈希值进行运算，得出一个索引值为要存放在哈希标中的位置号，如果该位置上没有其他元素，则直接存放，若该位置上已经有其他元素了就需要调用equals判断，如果相等则不再添加</strong><br>如果每次添加的元素都是新的对象那一般都能加进去，不管对象内容是否一样都可以（因为是不同对象）因为比较的是对象的equals（可以重写），如果添加对象的equals相同则添加失败<br>如果equals相等表示可以添加，如果hashCode值相同则放在同一链表上（因为计算出来的位置索引都是一样的）<br>由于要用hashCode计算索引值，所以元素再HashSet中不一定是从第一个位置开始排列<br>一般添加对象要求不能添加相同内容的对象，那么对象的hashCode()方法就要重写，返回相同hashCode值</p><h3 id="添加实践代码"><a href="#添加实践代码" class="headerlink" title="添加实践代码"></a>添加实践代码</h3><p>初步尝试：（姓名和年龄下同就表示同一个人，则不在添加）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashSetExercise</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Set</span> <span class="variable">set</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashSet</span>();</span><br><span class="line">        set.add(<span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="string">&quot;牛人&quot;</span>,<span class="number">13</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="string">&quot;牛逼&quot;</span>,<span class="number">13</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="string">&quot;牛人&quot;</span>,<span class="number">13</span>));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;set= &quot;</span> + set);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Employee</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">this</span> == o)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(o <span class="keyword">instanceof</span> Employee)&#123;</span><br><span class="line">            <span class="type">Employee</span> <span class="variable">e</span> <span class="operator">=</span> (Employee) o;</span><br><span class="line">            <span class="keyword">if</span>(((Employee) o).age == <span class="built_in">this</span>.age &amp;&amp; ((Employee) o).name.equals(<span class="built_in">this</span>.name))&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&quot;</span>+<span class="string">&quot;name: &quot;</span> + <span class="built_in">this</span>.name + <span class="string">&quot; 年龄&quot;</span> + <span class="built_in">this</span>.age+<span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>进阶尝试：(如果姓名和生日相同就表示同一个人，不能再添加了，其中生日的数据要是另外一个类，重点就是这个类的引入增加了难度)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashSetExercise02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Set</span> <span class="variable">set</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashSet</span>();</span><br><span class="line">        set.add(<span class="keyword">new</span> <span class="title class_">Employee2</span>(<span class="string">&quot;牛逼&quot;</span>,<span class="number">2500</span>,<span class="keyword">new</span> <span class="title class_">MyDate</span>(<span class="number">2003</span>,<span class="number">7</span>,<span class="number">20</span>)));</span><br><span class="line">        set.add(<span class="keyword">new</span> <span class="title class_">Employee2</span>(<span class="string">&quot;牛人&quot;</span>,<span class="number">3500</span>,<span class="keyword">new</span> <span class="title class_">MyDate</span>(<span class="number">2003</span>,<span class="number">12</span>,<span class="number">25</span>)));</span><br><span class="line">        set.add(<span class="keyword">new</span> <span class="title class_">Employee2</span>(<span class="string">&quot;牛逼&quot;</span>,<span class="number">3500</span>,<span class="keyword">new</span> <span class="title class_">MyDate</span>(<span class="number">2003</span>,<span class="number">7</span>,<span class="number">20</span>)));</span><br><span class="line">        System.out.println(<span class="string">&quot;set = &quot;</span> + set);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyDate</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> year;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> month;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> day;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyDate</span><span class="params">(<span class="type">int</span> year, <span class="type">int</span> month, <span class="type">int</span> day)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.year = year;</span><br><span class="line">        <span class="built_in">this</span>.month = month;</span><br><span class="line">        <span class="built_in">this</span>.day = day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span> == o) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="literal">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">MyDate</span> <span class="variable">myDate</span> <span class="operator">=</span> (MyDate) o;</span><br><span class="line">        <span class="keyword">return</span> year == myDate.year &amp;&amp; month == myDate.month &amp;&amp; day == myDate.day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;MyDate&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;year=&quot;</span> + year +</span><br><span class="line">                <span class="string">&quot;, month=&quot;</span> + month +</span><br><span class="line">                <span class="string">&quot;, day=&quot;</span> + day +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Employee2</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> sal;</span><br><span class="line">    <span class="keyword">private</span> MyDate birthday;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Employee2</span><span class="params">(String name, <span class="type">int</span> sal, MyDate birthday)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.sal = sal;</span><br><span class="line">        <span class="built_in">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span> == o) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="literal">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">Employee2</span> <span class="variable">employee2</span> <span class="operator">=</span> (Employee2) o;</span><br><span class="line">        <span class="keyword">return</span> Objects.equals(name, employee2.name) &amp;&amp; Objects.equals(birthday, employee2.birthday);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Employee2&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, sal=&quot;</span> + sal +</span><br><span class="line">                <span class="string">&quot;, birthday=&quot;</span> + birthday +</span><br><span class="line">                <span class="string">&quot;&#125;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="源码查看"><a href="#源码查看" class="headerlink" title="源码查看"></a>源码查看</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashSetSource</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">HashSet</span> <span class="variable">hashSet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashSet</span>();</span><br><span class="line">        hashSet.add(<span class="string">&quot;java&quot;</span>);<span class="comment">//到此位置，第1次add分析完毕.</span></span><br><span class="line">        hashSet.add(<span class="string">&quot;php&quot;</span>);<span class="comment">//到此位置，第2次add分析完毕</span></span><br><span class="line">        hashSet.add(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;set=&quot;</span> + hashSet);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        1. 执行 HashSet()</span></span><br><span class="line"><span class="comment">            public HashSet() &#123;</span></span><br><span class="line"><span class="comment">                map = new HashMap&lt;&gt;();</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        2. 执行 add()</span></span><br><span class="line"><span class="comment">           public boolean add(E e) &#123;//e = &quot;java&quot;</span></span><br><span class="line"><span class="comment">                return map.put(e, PRESENT)==null;//(static) PRESENT = new Object();-&gt;PRESENT是静态共享的</span></span><br><span class="line"><span class="comment">           &#125;</span></span><br><span class="line"><span class="comment">         3.执行 put() , 该方法会执行 hash(key) 得到key对应的hash值 算法h = key.hashCode()) ^ (h &gt;&gt;&gt; 16)-&gt;[无符号右移16位]</span></span><br><span class="line"><span class="comment">             public V put(K key, V value) &#123;//key = &quot;java&quot; value = PRESENT-&gt;共享</span></span><br><span class="line"><span class="comment">                return putVal(hash(key), key, value, false, true);</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">         4.执行 putVal   (*核心代码*)</span></span><br><span class="line"><span class="comment">         final V putVal(int hash, K key, V value, boolean onlyIfAbsent,</span></span><br><span class="line"><span class="comment">                   boolean evict) &#123;</span></span><br><span class="line"><span class="comment">                Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i; //定义了辅助变量</span></span><br><span class="line"><span class="comment">                //table 就是 HashMap 的一个数组，类型是 Node[]   (用来形成链表)</span></span><br><span class="line"><span class="comment">                //if 语句表示如果当前table 是null, 或者 大小=0</span></span><br><span class="line"><span class="comment">                //就是第一次扩容，到16个空间.</span></span><br><span class="line"><span class="comment">                if ((tab = table) == null || (n = tab.length) == 0)</span></span><br><span class="line"><span class="comment">                    n = (tab = resize()).length;   -&gt;resize()返回一个newtable</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                //(1)根据key，得到hash 去计算该key应该存放到table表的哪个索引位置并把这个位置的对象，赋给 p</span></span><br><span class="line"><span class="comment">                //(2)判断p 是否为null</span></span><br><span class="line"><span class="comment">                //(2.1) 如果p 为null, 表示还没有存放元素, 就创建一个Node (key=&quot;java&quot;,value=PRESENT)</span></span><br><span class="line"><span class="comment">                //(2.2) 就放在该位置 tab[i] = newNode(hash, key, value, null)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                if ((p = tab[i = (n - 1) &amp; hash]) == null)//比较能否添加</span></span><br><span class="line"><span class="comment">                    tab[i] = newNode(hash, key, value, null);</span></span><br><span class="line"><span class="comment">                else &#123;</span></span><br><span class="line"><span class="comment">                    //一个开发技巧提示： 在需要局部变量(辅助变量)时候，在创建</span></span><br><span class="line"><span class="comment">                    Node&lt;K,V&gt; e; K k; </span></span><br><span class="line"><span class="comment">                    //如果当前索引位置对应的链表的第一个元素和准备添加的key的hash值一样</span></span><br><span class="line"><span class="comment">                    //并且满足 下面两个条件之一:</span></span><br><span class="line"><span class="comment">                    //(1) 准备加入的key 和 p 指向的Node 结点的 key 是同一个对象</span></span><br><span class="line"><span class="comment">                    //(2)  p 指向的Node 结点的 key 的equals() 和准备加入的key比较后相同</span></span><br><span class="line"><span class="comment">                    //就不能加入</span></span><br><span class="line"><span class="comment">                    if (p.hash == hash &amp;&amp;</span></span><br><span class="line"><span class="comment">                        ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))</span></span><br><span class="line"><span class="comment">                        e = p;</span></span><br><span class="line"><span class="comment">                    //再判断 p 是不是一颗红黑树,</span></span><br><span class="line"><span class="comment">                    //如果是一颗红黑树，就调用 putTreeVal , 来进行添加</span></span><br><span class="line"><span class="comment">                    else if (p instanceof TreeNode)</span></span><br><span class="line"><span class="comment">                        e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value);</span></span><br><span class="line"><span class="comment">                    else &#123;//如果table对应索引位置，已经是一个链表, 就使用for循环比较</span></span><br><span class="line"><span class="comment">                          //(1) 依次和该链表的每一个元素比较后，都不相同, 则加入到该链表的最后</span></span><br><span class="line"><span class="comment">                          //    注意在把元素添加到链表后，立即判断 该链表是否已经达到8个结点</span></span><br><span class="line"><span class="comment">                          //    , 就调用 treeifyBin() 对当前这个链表进行树化-&gt;(转成红黑树)</span></span><br><span class="line"><span class="comment">                          //    注意，在转成红黑树时，要进行判断, 判断条件</span></span><br><span class="line"><span class="comment">                          //    if (tab == null || (n = tab.length) &lt; MIN_TREEIFY_CAPACITY(值为64))</span></span><br><span class="line"><span class="comment">                          //            resize();</span></span><br><span class="line"><span class="comment">                          //    如果上面条件成立，先table扩容.</span></span><br><span class="line"><span class="comment">                          //    只有上面条件不成立时，才进行转成红黑树</span></span><br><span class="line"><span class="comment">                          //(2) 依次和该链表的每一个元素比较过程中，如果有相同情况,就直接break</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                        for (int binCount = 0; ; ++binCount) &#123;</span></span><br><span class="line"><span class="comment">                            if ((e = p.next) == null) &#123;</span></span><br><span class="line"><span class="comment">                                p.next = newNode(hash, key, value, null);//加入到链表的最后</span></span><br><span class="line"><span class="comment">                                if (binCount &gt;= TREEIFY_THRESHOLD【值为8】 - 1) // -1 for 1st</span></span><br><span class="line"><span class="comment">                                    treeifyBin(tab, hash);</span></span><br><span class="line"><span class="comment">                                break;</span></span><br><span class="line"><span class="comment">                            &#125;</span></span><br><span class="line"><span class="comment">                            if (e.hash == hash &amp;&amp;</span></span><br><span class="line"><span class="comment">                                ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))</span></span><br><span class="line"><span class="comment">                                break;</span></span><br><span class="line"><span class="comment">                            p = e;</span></span><br><span class="line"><span class="comment">                        &#125;</span></span><br><span class="line"><span class="comment">                    &#125;</span></span><br><span class="line"><span class="comment">                    if (e != null) &#123; // existing mapping for key</span></span><br><span class="line"><span class="comment">                        V oldValue = e.value;</span></span><br><span class="line"><span class="comment">                        if (!onlyIfAbsent || oldValue == null)</span></span><br><span class="line"><span class="comment">                            e.value = value;</span></span><br><span class="line"><span class="comment">                        afterNodeAccess(e);</span></span><br><span class="line"><span class="comment">                        return oldValue;</span></span><br><span class="line"><span class="comment">                    &#125;</span></span><br><span class="line"><span class="comment">                &#125;</span></span><br><span class="line"><span class="comment">                ++modCount;</span></span><br><span class="line"><span class="comment">                //size 就是我们每加入一个结点Node(k,v,h,next), size++</span></span><br><span class="line"><span class="comment">                if (++size &gt; threshold)</span></span><br><span class="line"><span class="comment">                    resize();//扩容</span></span><br><span class="line"><span class="comment">                afterNodeInsertion(evict);</span></span><br><span class="line"><span class="comment">                return null;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="源码总结"><a href="#源码总结" class="headerlink" title="源码总结"></a>源码总结</h2><ol><li>HashSet的底层实际上是HashMap，第一次添加时，table数扩容到16，临界值（threshold）[是16]*加载因子（loadFactor）[是0.75]=12</li><li>如果table数组使用到了临界值12，就会扩容到16<em>2 = 32，新的临界值就是32</em>0.75=24，以此类推（==只要是添加了对象size就会++==，即单个链表中添加一个结点，table的size就会++，到了临界值就扩容）</li><li>在Java8中，如果一条链表的元素个数到达TREEIFY_THRESHOLD（默认为8），并且table的大小 &gt;= MIN_TREEIFY_CAPACITY（默认为64，即数组的大小），就进行树化（树化为红黑树）</li></ol>]]></content>
      
      
      <categories>
          
          <category> Java基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java基础 </tag>
            
            <tag> 集合 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ArrayList</title>
      <link href="/posts/1219920510.html"/>
      <url>/posts/1219920510.html</url>
      
        <content type="html"><![CDATA[<details>B站 韩顺平 老师课程的笔记</details><h1 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h1><h2 id="基本函数介绍"><a href="#基本函数介绍" class="headerlink" title="基本函数介绍"></a>基本函数介绍</h2><div class="table-container"><table><thead><tr><th style="text-align:left">方法原型</th><th style="text-align:left">作用</th></tr></thead><tbody><tr><td style="text-align:left">add(Object elem)</td><td style="text-align:left">在list中加入对象参数（添加元素）</td></tr><tr><td style="text-align:left">add(int index,Objece elem)</td><td style="text-align:left">指定在下标index前添加一个对象</td></tr><tr><td style="text-align:left">remove(int index)</td><td style="text-align:left">根据下标索引删除元素</td></tr><tr><td style="text-align:left">remove(Object elem)</td><td style="text-align:left">删除具体对象（元素）</td></tr><tr><td style="text-align:left">contains(Object elem)</td><td style="text-align:left">如果和对象参数匹配就返回true</td></tr><tr><td style="text-align:left">isEmpty()</td><td style="text-align:left">如果list中没有元素就返回“true”</td></tr><tr><td style="text-align:left">indexOf(Object elem)</td><td style="text-align:left">返回对象的参数的索引或-1（如果没有这个元素）</td></tr><tr><td style="text-align:left">size()</td><td style="text-align:left">返回list中的元素的一个数</td></tr><tr><td style="text-align:left">get(int index)</td><td style="text-align:left">返回当前索引的对象</td></tr></tbody></table></div><h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//假设有个类叫Egg</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Egg</span>&#123;&#125;</span><br><span class="line"><span class="comment">//创建一个包含Egg对象的ArrayList</span></span><br><span class="line">ArrayList&lt;Egg&gt; myList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Egg&gt; ();</span><br><span class="line"><span class="comment">//加入元素</span></span><br><span class="line"><span class="type">Egg</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Egg</span>();<span class="comment">//创建一个对象（后面可以赋值）</span></span><br><span class="line">myList.add(s);<span class="comment">//添加</span></span><br><span class="line"><span class="comment">//再加入一次元素</span></span><br><span class="line"><span class="type">Egg</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Egg</span>();</span><br><span class="line">myList.add(b);</span><br><span class="line"><span class="comment">//查询大小</span></span><br><span class="line"><span class="type">int</span> <span class="variable">theSize</span> <span class="operator">=</span> myList.size();</span><br><span class="line"><span class="comment">//查询特定元素</span></span><br><span class="line"><span class="type">boolean</span> isIn myList.contains(s);<span class="comment">//查询是否含有s对象</span></span><br><span class="line"><span class="comment">//查询特定元素的位置</span></span><br><span class="line"><span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> myList.indexOf(b);<span class="comment">//查询得到b对象再myList中的索引</span></span><br><span class="line"><span class="comment">//判断集合是否为空</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">empty</span> <span class="operator">=</span> myList.isEmpty();</span><br><span class="line"><span class="comment">//删除b对象</span></span><br><span class="line">myList.remove(b);</span><br><span class="line"><span class="comment">//得到下标索引为0的对象</span></span><br><span class="line"><span class="type">Egg</span> <span class="variable">k</span> <span class="operator">=</span> myList.get(<span class="number">0</span>);<span class="comment">//实际上就是让k也指向s指向的对象</span></span><br><span class="line"><span class="comment">//删除下标为0的对象</span></span><br><span class="line">myList.remove(<span class="number">0</span>);</span><br></pre></td></tr></table></figure><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ol><li>ArrayList的大小是可变化的，不需要规定大小</li><li>存放对象是不用给定下标位置，可以直接在后面添加</li><li>也可指定添加</li><li>不能使用[]运算符</li><li>格式要为ArrayList<Type>,即创建包含元素为Type类型的元素</li></ol><h2 id="实际使用代码"><a href="#实际使用代码" class="headerlink" title="实际使用代码"></a>实际使用代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">  <span class="type">List</span> <span class="variable">arrayList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();<span class="comment">//编译类型为ArrayList的接口</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        add:添加当单个元素,参数类型是Object，所以所有类型的对象都可添加进同一个arrayList</span></span><br><span class="line">  arrayList.add(<span class="string">&quot;jack&quot;</span>);</span><br><span class="line">  arrayList.add(<span class="number">10</span>);</span><br><span class="line">  arrayList.add(<span class="literal">true</span>);</span><br><span class="line">  arrayList.add(<span class="number">21.001</span>);</span><br><span class="line">  arrayList.add(<span class="number">3</span>, <span class="literal">false</span>);<span class="comment">//在指定位置（下标为3的前面,添加后新的对象的下标就是3了）添加一个对象（false）</span></span><br><span class="line">  <span class="comment">//可如此直接输出集合内容，格式和Arrays.toString()一样，输出结果：arrayList= [jack, 10, true, false, 21.001]</span></span><br><span class="line">  System.out.println(<span class="string">&quot;arrayList= &quot;</span> + arrayList);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        remove:删除单个元素</span></span><br><span class="line">  arrayList.remove(<span class="number">0</span>);<span class="comment">//删除第一个元素（按下标索引删除）</span></span><br><span class="line">  System.out.println(<span class="string">&quot;arrayList= &quot;</span> + arrayList);<span class="comment">//输出arrayList= [10, true, false, 21.001]</span></span><br><span class="line">  arrayList.remove(<span class="literal">true</span>);<span class="comment">//指定对象删除</span></span><br><span class="line">  System.out.println(<span class="string">&quot;arrayList= &quot;</span> + arrayList);<span class="comment">//输出arrayList= [10, false, 21.001]</span></span><br><span class="line">  arrayList.add(<span class="number">0</span>, <span class="string">&quot;tom&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        contains:查找元素是否存在，返回值为Boolean类型</span></span><br><span class="line">  System.out.println(<span class="string">&quot;找jack &quot;</span> + arrayList.contains(<span class="string">&quot;jack&quot;</span>));<span class="comment">//输出：找jack false</span></span><br><span class="line">  System.out.println(<span class="string">&quot;找tom &quot;</span> + arrayList.contains(<span class="string">&quot;tom&quot;</span>));<span class="comment">//输出：找tom true</span></span><br><span class="line">  <span class="type">boolean</span> <span class="variable">con</span> <span class="operator">=</span> arrayList.contains(<span class="literal">false</span>);</span><br><span class="line">  System.out.println(<span class="string">&quot;找false(arrayList中的一个对象) &quot;</span> + con);<span class="comment">//输出：找false(arrayList中的一个对象) true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        size:获取元素个数，返回值是int类型的</span></span><br><span class="line">  System.out.println(<span class="string">&quot;先看一下有几个元素：&quot;</span> + arrayList);<span class="comment">//输出：先看一下有几个元素：[tom, 10, false, 21.001]（4个元素）</span></span><br><span class="line">  System.out.println(<span class="string">&quot;用size()输出元素个数：&quot;</span> + arrayList.size());<span class="comment">//输出：用size()输出元素个数：4</span></span><br><span class="line">  <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> arrayList.size();</span><br><span class="line">  System.out.println(<span class="string">&quot;得到返回值后再输出&quot;</span> + size);<span class="comment">//输出：得到返回值后再输出4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        isEmpty:判断是否为空，返回值为boolean</span></span><br><span class="line">  System.out.println(<span class="string">&quot;arrayList.isEmpty(): &quot;</span> + arrayList.isEmpty());<span class="comment">//输出：arrayList.isEmpty(): false</span></span><br><span class="line">  <span class="type">List</span> <span class="variable">arrayList2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();<span class="comment">//创建一个空集合</span></span><br><span class="line">  System.out.println(<span class="string">&quot;arrayList2.isEmoty(): &quot;</span> + arrayList2.isEmpty());<span class="comment">//输出：arrayList2.isEmoty(): true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        clear:清空</span></span><br><span class="line">  arrayList2.add(<span class="string">&quot;有元素了&quot;</span>);</span><br><span class="line">  arrayList2.add(<span class="string">&quot;yes&quot;</span>);</span><br><span class="line">  System.out.println(<span class="string">&quot;调用clear()前的arrayList2: &quot;</span>+arrayList2);<span class="comment">//输出：调用clear()前的arrayList2: [有元素了, yes]</span></span><br><span class="line">  arrayList2.clear();<span class="comment">//将arratList2的元素清空</span></span><br><span class="line">  System.out.println(<span class="string">&quot;调用clear()后的arrayList2: &quot;</span>+arrayList2);<span class="comment">//输出：调用clear()后的arrayList2: []</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        addAll:添加多个元素</span></span><br><span class="line">  System.out.println(<span class="string">&quot;使用addAll()前的arrayList: &quot;</span> + arrayList);<span class="comment">//输出：使用addAll()前的arrayList: [tom, 10, false, 21.001]</span></span><br><span class="line">  <span class="comment">//先给arrayList2添加两个元素（之前被clear()了）</span></span><br><span class="line">  arrayList2.add(<span class="string">&quot;西游记&quot;</span>);</span><br><span class="line">  arrayList2.add(<span class="string">&quot;三国演义&quot;</span>);</span><br><span class="line">  arrayList.addAll(arrayList2);<span class="comment">//将arrayList2的所有元素添加到末尾</span></span><br><span class="line">  System.out.println(<span class="string">&quot;使用addAll()后的arrayList: &quot;</span> + arrayList);<span class="comment">//输出：使用addAll()后的arrayList: [tom, 10, false, 21.001, 西游记, 三国演义]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        containsAll:查找多个元素是否都存在,也是返回boolean类型的值</span></span><br><span class="line">  System.out.println(<span class="string">&quot;arrayList&quot;</span> + arrayList);</span><br><span class="line">  System.out.println(<span class="string">&quot;arrayList2&quot;</span> + arrayList2);</span><br><span class="line">  System.out.println(arrayList.containsAll(arrayList2));<span class="comment">//输出true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        removeAll:删除多个元素</span></span><br><span class="line">  arrayList.removeAll(arrayList2);</span><br><span class="line">  System.out.println(<span class="string">&quot;删除arrayList2元素后的arrayList：&quot;</span> + arrayList);<span class="comment">//输出删除arrayList2元素后的arrayList：[tom, 10, false, 21.001]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ArrayList-使用细节"><a href="#ArrayList-使用细节" class="headerlink" title="ArrayList 使用细节"></a>ArrayList 使用细节</h1><ol><li>ArrayList可以放任何值，包括null，并且多个</li><li>ArrayList是由数组来实现的数据存储的</li><li>ArrayList基本等同于Vector,除了ArrayList是线程不安全（但执行效率高）,在多线程的情况下，不建议使用ArrayList<br> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-03-04%20143557.png" alt=""><br> 可用debug追看一下源码<br> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-03-04%20152038.png" alt=""><br> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-03-04%20152126.png" alt=""></li></ol>]]></content>
      
      
      <categories>
          
          <category> Java基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java基础 </tag>
            
            <tag> 集合 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>集合</title>
      <link href="/posts/3546711884.html"/>
      <url>/posts/3546711884.html</url>
      
        <content type="html"><![CDATA[<details>B站 韩顺平 老师课程的笔记</details><h1 id="集合（collection）"><a href="#集合（collection）" class="headerlink" title="集合（collection）"></a>集合（collection）</h1><p>本文件讲的是实现Collection接口的集合的共性<br>独有的看别的文件</p><h2 id="集合的优点"><a href="#集合的优点" class="headerlink" title="集合的优点"></a>集合的优点</h2><ol><li>可以==动态==保存任意多个对象，使用比较方便</li><li>提供一系列方便的操作对象的方法：add、remove、set、get等（相当于增删改查都写好了）</li><li>使用集合添加，删除新元素更简洁方便</li></ol><h2 id="数组的不足之处"><a href="#数组的不足之处" class="headerlink" title="数组的不足之处"></a>数组的不足之处</h2><ol><li>长度开始必须指定，而且一旦指定不能更改</li><li>保存的必须为同一类型的的元素</li><li>使用数组进行增加/删除元素比较麻烦<br> 总之，灵活性不够</li></ol><h2 id="集合的框架体系（常用）"><a href="#集合的框架体系（常用）" class="headerlink" title="集合的框架体系（常用）"></a>集合的框架体系（常用）</h2><p>Collection接口继承了Iterable接口<br>Collection接口被List接口和Set接口实现了<br>List接口被Vector、ArrayList、LinkedList类实现了<br>Set接口被TreeSet、HashSet类实现了<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-03-04%20124708.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-03-04%20124744.png" alt=""><br>List是有序的，Set是无序的(有序指的是添加顺序和取出顺序相同)</p><h3 id="不同集合之间的区别"><a href="#不同集合之间的区别" class="headerlink" title="不同集合之间的区别"></a>不同集合之间的区别</h3><h4 id="取长度方面"><a href="#取长度方面" class="headerlink" title="取长度方面"></a>取长度方面</h4><p>==主要注意是length、length()还是size()==</p><p>普通数组：int[] a = new int[10]; ==&gt; a.length;</p><p>字符串：String a = “zhang”; ==&gt; a.length();<br>StringBuffer、StringBuilder ==&gt; a.length();</p><p>Collection(List(ArrayList、LinkedList、Vector)、Set(TreeSet、HashSet)) ==&gt; col.zise();<br>Map(HashMap、TreeMap、HashTable) ==&gt; map.size();</p><p>Stack ==&gt; stack.size();<br>Queue(LinkedList、ArrayQueue) ==&gt; queue.size();<br>Deque(ArrayDeque、LinkedList) ==&gt; deque.size();<br>==总结==<br><strong>普通数组用length;字符串以及和字符串有关的StringBuffer等用length();集合有关的都用size()</strong></p><h4 id="存取方法"><a href="#存取方法" class="headerlink" title="存取方法"></a>存取方法</h4><p>Collection接口下的List、Set接口的方法都是使用add()添加、使用get()取出元素</p><p>Map接口下的实现类都是使用put(K,V)进行存，使用get()取</p><p>Stack使用push()或add()存、使用pop()、get()、peek()取</p><p>Queue、和Deque都是接口，其实现类都可是LinkedList,使用offer()、add()进行存、使用poll()、pop()、peek()、get()取</p><h3 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h3><p>add:添加单个元素<br>remove:删除单个元素<br>contains：查找元素是否存在<br>size:获取元素个数<br>isEmpty:判断是否为空<br>clear:清空<br>addAll:添加多个元素<br>containsAll:查找多个元素是否都存在<br>removeAll:删除多个元素<br>以ArrayList演示，可看文件：<a href="/posts/1219920510.html" title="ArrayList">ArrayList</a></p><h4 id="代码展示"><a href="#代码展示" class="headerlink" title="代码展示"></a>代码展示</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">  <span class="type">List</span> <span class="variable">arrayList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();<span class="comment">//编译类型为ArrayList的接口</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        add:添加当单个元素,参数类型是Object，所以所有类型的对象都可添加进同一个arrayList</span></span><br><span class="line">  arrayList.add(<span class="string">&quot;jack&quot;</span>);</span><br><span class="line">  arrayList.add(<span class="number">10</span>);</span><br><span class="line">  arrayList.add(<span class="literal">true</span>);</span><br><span class="line">  arrayList.add(<span class="number">21.001</span>);</span><br><span class="line">  arrayList.add(<span class="number">3</span>, <span class="literal">false</span>);<span class="comment">//在指定位置（下标为3的前面,添加后新的对象的下标就是3了）添加一个对象（false）(List接口中特有的)</span></span><br><span class="line">  <span class="comment">//可如此直接输出集合内容，格式和Arrays.toString()一样，输出结果：arrayList= [jack, 10, true, false, 21.001]</span></span><br><span class="line">  System.out.println(<span class="string">&quot;arrayList= &quot;</span> + arrayList);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        remove:删除单个元素</span></span><br><span class="line">  arrayList.remove(<span class="number">0</span>);<span class="comment">//删除第一个元素（按下标索引删除）</span></span><br><span class="line">  System.out.println(<span class="string">&quot;arrayList= &quot;</span> + arrayList);<span class="comment">//输出arrayList= [10, true, false, 21.001]</span></span><br><span class="line">  arrayList.remove(<span class="literal">true</span>);<span class="comment">//指定对象删除</span></span><br><span class="line">  System.out.println(<span class="string">&quot;arrayList= &quot;</span> + arrayList);<span class="comment">//输出arrayList= [10, false, 21.001]</span></span><br><span class="line">  arrayList.add(<span class="number">0</span>, <span class="string">&quot;tom&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        contains:查找元素是否存在，返回值为Boolean类型</span></span><br><span class="line">  System.out.println(<span class="string">&quot;找jack &quot;</span> + arrayList.contains(<span class="string">&quot;jack&quot;</span>));<span class="comment">//输出：找jack false</span></span><br><span class="line">  System.out.println(<span class="string">&quot;找tom &quot;</span> + arrayList.contains(<span class="string">&quot;tom&quot;</span>));<span class="comment">//输出：找tom true</span></span><br><span class="line">  <span class="type">boolean</span> <span class="variable">con</span> <span class="operator">=</span> arrayList.contains(<span class="literal">false</span>);</span><br><span class="line">  System.out.println(<span class="string">&quot;找false(arrayList中的一个对象) &quot;</span> + con);<span class="comment">//输出：找false(arrayList中的一个对象) true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        size:获取元素个数，返回值是int类型的</span></span><br><span class="line">  System.out.println(<span class="string">&quot;先看一下有几个元素：&quot;</span> + arrayList);<span class="comment">//输出：先看一下有几个元素：[tom, 10, false, 21.001]（4个元素）</span></span><br><span class="line">  System.out.println(<span class="string">&quot;用size()输出元素个数：&quot;</span> + arrayList.size());<span class="comment">//输出：用size()输出元素个数：4</span></span><br><span class="line">  <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> arrayList.size();</span><br><span class="line">  System.out.println(<span class="string">&quot;得到返回值后再输出&quot;</span> + size);<span class="comment">//输出：得到返回值后再输出4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        isEmpty:判断是否为空，返回值为boolean</span></span><br><span class="line">  System.out.println(<span class="string">&quot;arrayList.isEmpty(): &quot;</span> + arrayList.isEmpty());<span class="comment">//输出：arrayList.isEmpty(): false</span></span><br><span class="line">  <span class="type">List</span> <span class="variable">arrayList2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();<span class="comment">//创建一个空集合</span></span><br><span class="line">  System.out.println(<span class="string">&quot;arrayList2.isEmoty(): &quot;</span> + arrayList2.isEmpty());<span class="comment">//输出：arrayList2.isEmoty(): true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        clear:清空</span></span><br><span class="line">  arrayList2.add(<span class="string">&quot;有元素了&quot;</span>);</span><br><span class="line">  arrayList2.add(<span class="string">&quot;yes&quot;</span>);</span><br><span class="line">  System.out.println(<span class="string">&quot;调用clear()前的arrayList2: &quot;</span>+arrayList2);<span class="comment">//输出：调用clear()前的arrayList2: [有元素了, yes]</span></span><br><span class="line">  arrayList2.clear();<span class="comment">//将arratList2的元素清空</span></span><br><span class="line">  System.out.println(<span class="string">&quot;调用clear()后的arrayList2: &quot;</span>+arrayList2);<span class="comment">//输出：调用clear()后的arrayList2: []</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        addAll:添加多个元素</span></span><br><span class="line">  System.out.println(<span class="string">&quot;使用addAll()前的arrayList: &quot;</span> + arrayList);<span class="comment">//输出：使用addAll()前的arrayList: [tom, 10, false, 21.001]</span></span><br><span class="line">  <span class="comment">//先给arrayList2添加两个元素（之前被clear()了）</span></span><br><span class="line">  arrayList2.add(<span class="string">&quot;西游记&quot;</span>);</span><br><span class="line">  arrayList2.add(<span class="string">&quot;三国演义&quot;</span>);</span><br><span class="line">  arrayList.addAll(arrayList2);<span class="comment">//将arrayList2的所有元素添加到末尾</span></span><br><span class="line">  System.out.println(<span class="string">&quot;使用addAll()后的arrayList: &quot;</span> + arrayList);<span class="comment">//输出：使用addAll()后的arrayList: [tom, 10, false, 21.001, 西游记, 三国演义]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        containsAll:查找多个元素是否都存在,也是返回boolean类型的值</span></span><br><span class="line">  System.out.println(<span class="string">&quot;arrayList&quot;</span> + arrayList);</span><br><span class="line">  System.out.println(<span class="string">&quot;arrayList2&quot;</span> + arrayList2);</span><br><span class="line">  System.out.println(arrayList.containsAll(arrayList2));<span class="comment">//输出true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        removeAll:删除多个元素</span></span><br><span class="line">  arrayList.removeAll(arrayList2);</span><br><span class="line">  System.out.println(<span class="string">&quot;删除arrayList2元素后的arrayList：&quot;</span> + arrayList);<span class="comment">//输出删除arrayList2元素后的arrayList：[tom, 10, false, 21.001]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="集合遍历"><a href="#集合遍历" class="headerlink" title="集合遍历"></a>集合遍历</h2><h3 id="迭代器遍历"><a href="#迭代器遍历" class="headerlink" title="迭代器遍历"></a>迭代器遍历</h3><p>iterator对象成为迭代器，主要用于遍历Collection集合中的元素<br>实现了Collection接口的的集合类都有一个iterator()方法，用以返回一个实现了iterator接口的对象</p><h4 id="iterator的方法"><a href="#iterator的方法" class="headerlink" title="iterator的方法"></a>iterator的方法</h4><p>Iterator iterator = coll.iterator();//得到一个集合的迭代器<br>hasNext():判断是否还有下一个元素<br>next():指针下移，将下移以后集合位置上的元素返回（有两步）<br>==在使用next()前一定要使用hasNext()判断==<br>==得到next一定要用Object类型来引用，即只能：Object = iterator.next()==</p><h4 id="使用代码"><a href="#使用代码" class="headerlink" title="使用代码"></a>使用代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CollectionIterator01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Collection</span> <span class="variable">col</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line"></span><br><span class="line">        col.add(<span class="keyword">new</span> <span class="title class_">Book</span>(<span class="string">&quot;三国演义&quot;</span>,<span class="string">&quot;罗贯中&quot;</span> , <span class="number">110</span>));</span><br><span class="line">        col.add(<span class="keyword">new</span> <span class="title class_">Book</span>(<span class="string">&quot;西游记&quot;</span>,<span class="string">&quot;吴承恩&quot;</span>,<span class="number">150</span>));</span><br><span class="line">        col.add(<span class="keyword">new</span> <span class="title class_">Book</span>(<span class="string">&quot;红楼梦&quot;</span>,<span class="string">&quot;曹雪芹&quot;</span>,<span class="number">115</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//第一种输出</span></span><br><span class="line">        System.out.println(col);<span class="comment">//输出：[书名：三国演义 作者：罗贯中 价格：110, 书名：西游记 作者：吴承恩 价格：150, 书名：红楼梦 作者：曹雪芹 价格：115]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用迭代器遍历输出</span></span><br><span class="line">        <span class="type">Iterator</span> <span class="variable">iterator</span> <span class="operator">=</span> col.iterator();<span class="comment">//实现Collection接口的类都有iterator()对象直接取出来用</span></span><br><span class="line">        <span class="comment">//使用while循环遍历输出</span></span><br><span class="line">        <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">next</span> <span class="operator">=</span> iterator.next();<span class="comment">//接收下一个位置的返回值</span></span><br><span class="line">            System.out.println(next);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//输出：</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 书名：三国演义 作者：罗贯中 价格：110</span></span><br><span class="line"><span class="comment">         * 书名：西游记 作者：吴承恩 价格：150</span></span><br><span class="line"><span class="comment">         * 书名：红楼梦 作者：曹雪芹 价格：115</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">//退出循环后iterator要指向最后一个元素</span></span><br><span class="line">        <span class="comment">//如果需要再次遍历需要重置迭代器，方式：</span></span><br><span class="line">        iterator = col.iterator();</span><br><span class="line">        <span class="comment">//重置迭代器后，第二次遍历输出</span></span><br><span class="line">        <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">next</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            System.out.println(next);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> price;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Book</span><span class="params">(String name, String author, <span class="type">int</span> price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.author = author;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAuthor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> author;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAuthor</span><span class="params">(String author)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.author = author;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPrice</span><span class="params">(<span class="type">int</span> price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;书名：&quot;</span> + name + <span class="string">&quot; 作者：&quot;</span> + author + <span class="string">&quot; 价格：&quot;</span> + price;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="增强for循环遍历"><a href="#增强for循环遍历" class="headerlink" title="增强for循环遍历"></a>增强for循环遍历</h3><p>相当于是使用简便的迭代器</p><h4 id="使用代码-1"><a href="#使用代码-1" class="headerlink" title="使用代码"></a>使用代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Collection</span> <span class="variable">col</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line"></span><br><span class="line">    col.add(<span class="keyword">new</span> <span class="title class_">Book</span>(<span class="string">&quot;三国演义&quot;</span>,<span class="string">&quot;罗贯中&quot;</span> , <span class="number">110</span>));</span><br><span class="line">    col.add(<span class="keyword">new</span> <span class="title class_">Book</span>(<span class="string">&quot;西游记&quot;</span>,<span class="string">&quot;吴承恩&quot;</span>,<span class="number">150</span>));</span><br><span class="line">    col.add(<span class="keyword">new</span> <span class="title class_">Book</span>(<span class="string">&quot;红楼梦&quot;</span>,<span class="string">&quot;曹雪芹&quot;</span>,<span class="number">115</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//使用增强for循环遍历</span></span><br><span class="line">    <span class="keyword">for</span>(Object book : col)&#123;<span class="comment">//底层其实还是用的迭代器，只是使用起来更方便,一定要用Object来接收</span></span><br><span class="line">        System.out.println(<span class="string">&quot;book = &quot;</span> + book);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/** 输出：</span></span><br><span class="line"><span class="comment">        * book = 书名：三国演义 作者：罗贯中 价格：110</span></span><br><span class="line"><span class="comment">        * book = 书名：西游记 作者：吴承恩 价格：150</span></span><br><span class="line"><span class="comment">        * book = 书名：红楼梦 作者：曹雪芹 价格：115</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java基础 </tag>
            
            <tag> 集合 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>泛型</title>
      <link href="/posts/1987617322.html"/>
      <url>/posts/1987617322.html</url>
      
        <content type="html"><![CDATA[<details>B站 韩顺平 老师课程的笔记</details><h1 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h1><h2 id="泛型引入"><a href="#泛型引入" class="headerlink" title="泛型引入"></a>泛型引入</h2><h3 id="需要泛型的体现"><a href="#需要泛型的体现" class="headerlink" title="需要泛型的体现"></a>需要泛型的体现</h3><h4 id="使用代码"><a href="#使用代码" class="headerlink" title="使用代码"></a>使用代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Needgenericity</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//        //传统</span></span><br><span class="line"><span class="comment">//        ArrayList arrayList = new ArrayList();</span></span><br><span class="line"><span class="comment">//        arrayList.add(new Dog(&quot;小黄&quot;,10));</span></span><br><span class="line"><span class="comment">//        arrayList.add(new Dog(&quot;旺财&quot;,5));</span></span><br><span class="line"><span class="comment">//        arrayList.add(new Dog(&quot;牛狗&quot;,6));</span></span><br><span class="line"><span class="comment">//        //加入不小心添加了一只猫</span></span><br><span class="line"><span class="comment">//        arrayList.add(new Cat(&quot;招财猫&quot;,8));//因为ArrayList实现了泛型所以没有错误</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        //遍历，当添加了猫进去后就会出问题，不能将Cat转型为Dog(只能运行到Cat这里才会抛出异常，编译器开始不报错)，所以前面需要泛型，限制添加类型</span></span><br><span class="line"><span class="comment">//        for(Object o : arrayList)&#123;</span></span><br><span class="line"><span class="comment">//            Dog dog  = (Dog) o;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;名字：&quot; + dog.getName() +&quot; 年龄&quot;+ dog.getAge());</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用泛型</span></span><br><span class="line">        ArrayList&lt;Dog&gt; arrayList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Dog&gt;();</span><br><span class="line">        arrayList.add(<span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;小黄&quot;</span>,<span class="number">10</span>));</span><br><span class="line">        arrayList.add(<span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;旺财&quot;</span>,<span class="number">5</span>));</span><br><span class="line">        arrayList.add(<span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;牛狗&quot;</span>,<span class="number">6</span>));</span><br><span class="line">        <span class="comment">//arrayList.add(new Cat(&quot;招财猫&quot;,8));//报错，编译时就会报错，表示不能添加</span></span><br><span class="line">        <span class="comment">//使用泛型后遍历</span></span><br><span class="line">        <span class="keyword">for</span>(Dog dog : arrayList)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;名字：&quot;</span> + dog.getName() + <span class="string">&quot; 年龄：&quot;</span> + dog.getAge());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Dog</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;<span class="keyword">return</span> name;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;<span class="built_in">this</span>.name = name;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;<span class="keyword">return</span> age;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;<span class="built_in">this</span>.age = age;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Cat</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;<span class="keyword">return</span> name;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;<span class="built_in">this</span>.name = name;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;<span class="keyword">return</span> age;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;<span class="built_in">this</span>.age = age;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="代码说明"><a href="#代码说明" class="headerlink" title="代码说明"></a>代码说明</h4><ul><li><p>使用<code>ArrayList&lt;Dog&gt;()</code>替换原本的<code>ArrayList()</code>表示存放到ArrayList集合中的元素只能是Dog的对象实例</p></li><li><p>当编译器发现添加的类型不满足要求就会提前报错(不会在等到运行时再报错)</p></li><li><p>在遍历时可以直接取出Dog类型,而不是Object<br>  原本:</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(Object obj : arrayList) &#123;...&#125;</span><br></pre></td></tr></table></figure><p>  使用泛型后:</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(Dog dog : arrayList) &#123;...&#125;</span><br></pre></td></tr></table></figure></li><li><p>ArrayList的原型为:</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayList</span>&lt;E&gt; &#123;...&#125;</span><br></pre></td></tr></table></figure><p>  这个E称为泛型,当上面使用泛型后,那么E就全用Dog来表示了<br>  E相当于C++的模板中的Type,声明是写就好了,可以不仅仅是E也可以是Q,A,R等任意名字,用来代表传入的类型</p></li></ul><h2 id="泛型基本介绍"><a href="#泛型基本介绍" class="headerlink" title="泛型基本介绍"></a>泛型基本介绍</h2><ol><li>泛型有称为参数化类型,时JDK5.0出现的新特性,解决数据类型的安全性问题</li><li>在类声明或实例化时只要指定好需要的具体类型即可</li><li>java泛型可以保证如果程序在编译时没有发出警告,那么在运行时也不会产生ClassCastException异常</li><li>java泛型也会放代码更简洁,健壮</li><li>泛型的作用是:可以在类声明时同时通过一个标识符表示类中的某个属性的类型,或是某个方法的返回值的类型,或者是参数模型</li></ol><h3 id="代码演示"><a href="#代码演示" class="headerlink" title="代码演示"></a>代码演示</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Generic03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//注意：E 具体的数据类型在定义Person对象的时候指定，即在编译期间，就确定E是什么类型</span></span><br><span class="line">        Person&lt;String&gt; Person = <span class="keyword">new</span> <span class="title class_">Person</span>&lt;String&gt;(<span class="string">&quot;牛人&quot;</span>);<span class="comment">//构造器传参类型不同也会报错</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 上面的初始化相当于调用：</span></span><br><span class="line"><span class="comment">         * class Person &#123;</span></span><br><span class="line"><span class="comment">         *     private String s;</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         *     public Person(String s) &#123;</span></span><br><span class="line"><span class="comment">         *         this.s = s;</span></span><br><span class="line"><span class="comment">         *     &#125;</span></span><br><span class="line"><span class="comment">         *     public String getS() &#123;</span></span><br><span class="line"><span class="comment">         *         return s;</span></span><br><span class="line"><span class="comment">         *     &#125;</span></span><br><span class="line"><span class="comment">         * &#125;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Person&lt;Integer&gt; integerPerson = <span class="keyword">new</span> <span class="title class_">Person</span>&lt;Integer&gt;(<span class="number">100</span>);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 同样相当于：</span></span><br><span class="line"><span class="comment">         * class Person &#123;</span></span><br><span class="line"><span class="comment">         *     private Integer s;</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         *     public Person(Integer s) &#123;</span></span><br><span class="line"><span class="comment">         *         this.s = s;</span></span><br><span class="line"><span class="comment">         *     &#125;</span></span><br><span class="line"><span class="comment">         *     public Integer getS() &#123;</span></span><br><span class="line"><span class="comment">         *         return s;</span></span><br><span class="line"><span class="comment">         *     &#125;</span></span><br><span class="line"><span class="comment">         * &#125;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&lt;E&gt; &#123;<span class="comment">//E是什么类型都可以（包括之定义类型）</span></span><br><span class="line">    <span class="keyword">private</span> E s;<span class="comment">//E类型的s对象,可以直接把E就看作是一个类型</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(E s)</span> &#123;<span class="comment">//可以是参数类型</span></span><br><span class="line">        <span class="built_in">this</span>.s = s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">getS</span><span class="params">()</span> &#123;<span class="comment">//可以是返回类型</span></span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当然也可以有多个类型:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&lt;E,T,K&gt; &#123;</span><br><span class="line">    ...;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="泛型注意细节"><a href="#泛型注意细节" class="headerlink" title="泛型注意细节"></a>泛型注意细节</h2><ol><li><p>假设有interface List<T> {},public class HashSet<E>{}…..&lt;/br&gt;说明:T,E只能为引用类型,不能是基本类型,所以:</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();<span class="comment">//正确</span></span><br><span class="line">List&lt;<span class="type">int</span>&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;<span class="type">int</span>&gt;();<span class="comment">//错误</span></span><br></pre></td></tr></table></figure></li><li><p>在指定泛型具体类型后,可以传入该类型或<u>该类型的子类型</u></p></li><li><p>泛型使用形式:</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; list1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line">List&lt;Integer&gt; list2 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br></pre></td></tr></table></figure><p> 如果像后者一样写,看等号右边默认给它的泛型是Object,但是等号左边给定了是Integer,所以实际上泛型类型是Integer,若等号左边也没规定,就会像之前没有引入泛型一样,为默认的Object</p></li></ol><h2 id="练习-重要"><a href="#练习-重要" class="headerlink" title="练习(重要)"></a>练习(重要)</h2><p>注意多看，认真看sort()写得很好,尤其是MyDate的compareTo()的封装</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenericExercise</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Emp&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list.add(<span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="string">&quot;Smith&quot;</span>,<span class="number">2500.1</span>,<span class="keyword">new</span> <span class="title class_">MyDate</span>(<span class="number">2003</span>,<span class="number">12</span>,<span class="number">5</span>)));</span><br><span class="line">        list.add(<span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="string">&quot;Smith&quot;</span>,<span class="number">2500.1</span>,<span class="keyword">new</span> <span class="title class_">MyDate</span>(<span class="number">2002</span>,<span class="number">12</span>,<span class="number">5</span>)));</span><br><span class="line">        list.add(<span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="string">&quot;Rose&quot;</span>,<span class="number">25000.4</span>,<span class="keyword">new</span> <span class="title class_">MyDate</span>(<span class="number">2004</span>,<span class="number">2</span>,<span class="number">15</span>)));</span><br><span class="line">        list.add(<span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="string">&quot;Jack&quot;</span>,<span class="number">2503.13</span>,<span class="keyword">new</span> <span class="title class_">MyDate</span>(<span class="number">2003</span>,<span class="number">1</span>,<span class="number">6</span>)));</span><br><span class="line">        </span><br><span class="line">        list.sort(<span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Emp&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Emp emp, Emp t1)</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(!((emp <span class="keyword">instanceof</span> Emp) &amp;&amp; (t1 <span class="keyword">instanceof</span> Emp)))&#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;类型不正确&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="comment">//比较姓名</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> emp.getName().compareTo(t1.getName());</span><br><span class="line">                <span class="keyword">if</span>(i != <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> i;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="comment">//将生日的比较封装到MyDate的类定义里去</span></span><br><span class="line">                <span class="keyword">return</span> emp.getBirthday().compareTo(t1.getBirthday());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(<span class="string">&quot;list = &quot;</span> + list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyDate</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;MyDate&gt;&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> year;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> month;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> day;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyDate</span><span class="params">(<span class="type">int</span> year, <span class="type">int</span> month, <span class="type">int</span> day)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.year = year;</span><br><span class="line">        <span class="built_in">this</span>.month = month;</span><br><span class="line">        <span class="built_in">this</span>.day = day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getYear</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> year;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setYear</span><span class="params">(<span class="type">int</span> year)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.year = year;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMonth</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> month;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMonth</span><span class="params">(<span class="type">int</span> month)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.month = month;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getDay</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDay</span><span class="params">(<span class="type">int</span> day)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.day = day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;MyDate&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;year=&quot;</span> + year +</span><br><span class="line">                <span class="string">&quot;, month=&quot;</span> + month +</span><br><span class="line">                <span class="string">&quot;, day=&quot;</span> + day +</span><br><span class="line">                <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(MyDate o)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">yd</span> <span class="operator">=</span>year - o.getYear();</span><br><span class="line">        <span class="keyword">if</span>(yd != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> yd;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">md</span> <span class="operator">=</span> month - o.getMonth();</span><br><span class="line">        <span class="keyword">if</span>(md != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> md;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> dd;</span><br><span class="line">        <span class="type">return</span> <span class="variable">dd</span> <span class="operator">=</span> day - o.getDay();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Emp</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> sal;</span><br><span class="line">    <span class="keyword">private</span> MyDate birthday;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Emp</span><span class="params">(String name, <span class="type">double</span> sal, MyDate birthday)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.sal = sal;</span><br><span class="line">        <span class="built_in">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Emp&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, sal=&quot;</span> + sal +</span><br><span class="line">                <span class="string">&quot;, birthday=&quot;</span> + birthday +</span><br><span class="line">                <span class="string">&quot;&#125;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getSal</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSal</span><span class="params">(<span class="type">double</span> sal)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sal = sal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> MyDate <span class="title function_">getBirthday</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBirthday</span><span class="params">(MyDate birthday)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="自定义泛型类"><a href="#自定义泛型类" class="headerlink" title="自定义泛型类"></a>自定义泛型类</h2><h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class 类名 &lt;T,R&gt; &#123;<span class="comment">//可以是多个</span></span><br><span class="line">    成员;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="注意细节"><a href="#注意细节" class="headerlink" title="注意细节"></a>注意细节</h3><ol><li>普通成员可以使用泛型</li><li>使用泛型的数组,不能初始化(不能new,意思是不能直接实例化,因为不知道类型,不知道开辟多大空间,避免之后空间冲突)</li><li>静态方法中不能使用泛型(因为静态是和类相关的,在类被加载的时候,对象都还没创建,JVM还不知道什么类型,就无法在静态方法中将类型改变为指定类型,所以JVM不能完成这样的初始化,就会报错)</li><li>泛型的类型,是在创建对象时就确定的(因为创建对象需要确定类型)</li><li>如果在创建对象时,没有指定类型,默认为Object</li></ol><h3 id="代码演示-1"><a href="#代码演示-1" class="headerlink" title="代码演示"></a>代码演示</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Tiger 类后面有&lt;&gt;所以Tiger是一个泛型类</span></span><br><span class="line"><span class="comment">//T,R,M时泛型常用的标识符，一般标识符都是大写</span></span><br><span class="line"><span class="comment">//泛型标识符可以有多个</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tiger</span> &lt;T,R,M&gt; &#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="comment">//属性使用泛型</span></span><br><span class="line">    T t;</span><br><span class="line">    R r;</span><br><span class="line">    M m;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//普通方法可以使用泛型</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">f1</span> <span class="params">(M m1)</span> &#123;&#125;</span><br><span class="line">    <span class="comment">//public static void f2 (M m2)&#123;&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//方法使用泛型（使用泛型作为参数）</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Tiger</span><span class="params">(String name, T t, R r, M m)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.t = t;</span><br><span class="line">        <span class="built_in">this</span>.r = r;</span><br><span class="line">        <span class="built_in">this</span>.m = m;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//方法使用泛型（使用泛型作为返回值）</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getT</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setT</span><span class="params">(T t)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.t = t;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">getR</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setR</span><span class="params">(R r)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.r = r;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> M <span class="title function_">getM</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> m;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setM</span><span class="params">(M m)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.m = m;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../屏幕截图%202022-03-05%20163713.png" alt="" title="静态成员不能使用泛型"></p><h2 id="自定义泛型接口"><a href="#自定义泛型接口" class="headerlink" title="自定义泛型接口"></a>自定义泛型接口</h2><h3 id="基本语法-1"><a href="#基本语法-1" class="headerlink" title="基本语法"></a>基本语法</h3><p>interface 接口名<R,T> {}</p><h3 id="注意细节-1"><a href="#注意细节-1" class="headerlink" title="注意细节"></a>注意细节</h3><ol><li>接口中,静态成员也不能使用泛型(这个和<a href="#自定义泛型类">泛型类</a>规定一样)</li><li>泛型接口的类型,在继承接口或者实现接口时确定</li><li>没有指定类型时,默认为Object</li></ol><h3 id="代码演示-2"><a href="#代码演示-2" class="headerlink" title="代码演示"></a>代码演示</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IUsb</span>&lt;U,R&gt; &#123;</span><br><span class="line">    <span class="comment">//普通方法可以使用接口泛型</span></span><br><span class="line">    R <span class="title function_">get</span><span class="params">(U u)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">hi</span><span class="params">(R r)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">run</span> <span class="params">(R r1,R r2,U u1 ,U u2)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> R <span class="title function_">method</span><span class="params">(U u)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//下面这样没有直接说明类型就会报错，一定要先将类型说明清楚</span></span><br><span class="line"><span class="comment">//class AA implements IUsb&lt;&gt;&#123;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AB</span> <span class="keyword">implements</span> <span class="title class_">IUsb</span>&#123;<span class="comment">//但是什么都不写也可以，但是是默认的Object，不好（最好直接指明）</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">get</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hi</span><span class="params">(Object o)</span> &#123;&#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(Object r1, Object r2, Object u1, Object u2)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//实现IUsb的时候自动填入对应类型</span></span><br><span class="line"><span class="comment">//U指定为String,R指定为Double</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AA</span> <span class="keyword">implements</span> <span class="title class_">IUsb</span>&lt;String, Double&gt;&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">get</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hi</span><span class="params">(Double aDouble)</span> &#123;&#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(Double r1, Double r2, String u1, String u2)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//接口只能继承接口不能实现接口，和类实现接口差不多，但可以不用实现接口方法（可以等着实现此接口的类来实现）</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IA</span> <span class="keyword">extends</span> <span class="title class_">IUsb</span>&lt;String, Double&gt; &#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="自定义泛型方法"><a href="#自定义泛型方法" class="headerlink" title="自定义泛型方法"></a>自定义泛型方法</h2><h3 id="基本语法-2"><a href="#基本语法-2" class="headerlink" title="基本语法"></a>基本语法</h3><p>修饰符 <T,R> 返回类型 方法名(参数列表){…}</p><h3 id="注意细节-2"><a href="#注意细节-2" class="headerlink" title="注意细节"></a>注意细节</h3><ol><li>泛型方法,可以定义在普通类中,也可以定义在泛型类中</li><li>当泛型方法被调用时,类型会确定</li><li>像<code>public void eat(E e)&#123;&#125;</code>这样,修饰符后面没有<T,R...>,所以eat()就不是泛型方法,而是使用泛型的方法</li><li>一般时参数类型是什么标识符,泛型的修饰符后面就写什么标识符</li></ol><h3 id="代码演示-3"><a href="#代码演示-3" class="headerlink" title="代码演示"></a>代码演示</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SelfGeneric03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">        car.fly(<span class="string">&quot;宝马&quot;</span>, <span class="number">100</span>);<span class="comment">//当调用方法时，传入参数，编译器，就会确定类型</span></span><br><span class="line">        System.out.println(<span class="string">&quot;=======&quot;</span>);</span><br><span class="line">        car.fly(<span class="number">300</span>, <span class="number">100.1</span>);<span class="comment">//当调用方法时，传入参数，编译器，就会确定类型</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//测试</span></span><br><span class="line">        <span class="comment">//T-&gt;String, R-&gt; ArrayList</span></span><br><span class="line">        Fish&lt;String, ArrayList&gt; fish = <span class="keyword">new</span> <span class="title class_">Fish</span>&lt;&gt;();</span><br><span class="line">        fish.hello(<span class="keyword">new</span> <span class="title class_">ArrayList</span>(), <span class="number">11.3f</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//泛型方法，可以定义在普通类中, 也可以定义在泛型类中</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;<span class="comment">//普通类</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;<span class="comment">//普通方法</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//说明 泛型方法</span></span><br><span class="line">    <span class="comment">//1. &lt;T,R&gt; 就是泛型</span></span><br><span class="line">    <span class="comment">//2. 是提供给 fly使用的</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T, R&gt; <span class="keyword">void</span> <span class="title function_">fly</span><span class="params">(T t, R r)</span> &#123;<span class="comment">//泛型方法</span></span><br><span class="line">        System.out.println(t.getClass());<span class="comment">//String</span></span><br><span class="line">        System.out.println(r.getClass());<span class="comment">//Integer</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Fish</span>&lt;T, R&gt; &#123;<span class="comment">//泛型类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;<span class="comment">//普通方法</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span>&lt;U,M&gt; <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">(U u, M m)</span> &#123;<span class="comment">//泛型方法</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//说明</span></span><br><span class="line">    <span class="comment">//1. 下面hi方法不是泛型方法</span></span><br><span class="line">    <span class="comment">//2. 是hi方法使用了类声明的 泛型</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hi</span><span class="params">(T t)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//泛型方法，可以使用类声明的泛型，也可以使用自己声明泛型</span></span><br><span class="line">    <span class="keyword">public</span>&lt;K&gt; <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">(R r, K k)</span> &#123;</span><br><span class="line">        System.out.println(r.getClass());<span class="comment">//ArrayList</span></span><br><span class="line">        System.out.println(k.getClass());<span class="comment">//Float</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="泛型的继承和通配符说明"><a href="#泛型的继承和通配符说明" class="headerlink" title="泛型的继承和通配符说明"></a>泛型的继承和通配符说明</h2><ol><li>泛型不具备继承性<br> <code>List&lt;Object&gt; list = new ArrayList&lt;String&gt;();//报错</code><br> 意思是尖括号里的类型要前后一致,继承也不行</li><li><code>&lt;?&gt;:支持任意泛型类型</code></li><li><code>&lt;? extends A&gt;:支持A类以及A类的子类,规定了泛型的上限(为A类,比A高就不能用了)</code></li><li><code>&lt;? super A&gt;:支持A类以及A类的父类,不限于直接父类,规定了泛型的下限(为A类,比A低就不能用了)</code></li></ol><h3 id="演示代码"><a href="#演示代码" class="headerlink" title="演示代码"></a>演示代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenericExtends</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;xx&quot;</span>);</span><br><span class="line">        <span class="comment">//List&lt;Object&gt; list = new ArrayList&lt;String&gt;();//报错，原因是泛型不具备继承性</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//举例使用下面的三个方法</span></span><br><span class="line">        List&lt;Object&gt; list1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        List&lt;String&gt; list2 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        List&lt;Integer&gt; list3 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        List&lt;A&gt; list4 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        List&lt;B&gt; list5 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        List&lt;C&gt; list6 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//如果是 List&lt;?&gt; c 类型的参数就可都可以</span></span><br><span class="line">        printCollection1(list1);</span><br><span class="line">        printCollection1(list2);</span><br><span class="line">        printCollection1(list3);</span><br><span class="line">        printCollection1(list4);</span><br><span class="line">        printCollection1(list5);</span><br><span class="line">        printCollection1(list6);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//如果是 List&lt;? extends A&gt; c 类型的参数，则只能A以及A的子类能够传入，所以前三个均报错</span></span><br><span class="line"><span class="comment">//        printCollection2(list1);</span></span><br><span class="line"><span class="comment">//        printCollection2(list2);</span></span><br><span class="line"><span class="comment">//        printCollection2(list3);</span></span><br><span class="line">        printCollection2(list4);</span><br><span class="line">        printCollection2(list5);</span><br><span class="line">        printCollection2(list6);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//如果是 List&lt;? super A&gt; c 类型的参数，则只能A以及A的父类才能够参入参数，所以list2\list3\list5\list6均报错</span></span><br><span class="line">        <span class="comment">//list1为Object类型是A的父类，list4是A类，所以吧报错</span></span><br><span class="line">        printCollection3(list1);</span><br><span class="line"><span class="comment">//        printCollection3(list2);</span></span><br><span class="line"><span class="comment">//        printCollection3(list3);</span></span><br><span class="line">        printCollection3(list4);</span><br><span class="line"><span class="comment">//        printCollection3(list5);</span></span><br><span class="line"><span class="comment">//        printCollection3(list6);</span></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//写几个测试方法</span></span><br><span class="line">    <span class="comment">//List&lt;?&gt;说明：标识任意的泛型类型都能接收</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printCollection1</span><span class="params">(List&lt;?&gt; c)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(Object object : c)&#123; <span class="comment">//使用通配符，取出是就是Object</span></span><br><span class="line">            System.out.println(object);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//支持A类以及A类的子类,规定了泛型的上限</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printCollection2</span><span class="params">(List&lt;? extends A&gt; c)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(Object object : c)&#123;</span><br><span class="line">            System.out.println(object);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//支持A类以及A类的父类,不限于直接父类,规定了泛型的下限</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printCollection3</span><span class="params">(List&lt;? <span class="built_in">super</span> A&gt; c)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(Object object : c)&#123;</span><br><span class="line">            System.out.println(object);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_">A</span>&#123;&#125;</span><br><span class="line"><span class="meta">@SuppressWarnings(&#123;&quot;unused&quot;&#125;)</span></span><br><span class="line"><span class="meta">@Deprecated</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> <span class="keyword">extends</span> <span class="title class_">B</span>&#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="泛型进阶尝试"><a href="#泛型进阶尝试" class="headerlink" title="泛型进阶尝试"></a>泛型进阶尝试</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 张永锐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenericExercise01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        DAO&lt;User&gt; userDAO = <span class="keyword">new</span> <span class="title class_">DAO</span>&lt;User&gt;();</span><br><span class="line">        <span class="comment">//使用save</span></span><br><span class="line">        userDAO.save(<span class="string">&quot;牛人&quot;</span>, <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">123</span>,<span class="number">25</span>,<span class="string">&quot;牛人&quot;</span>));</span><br><span class="line">        userDAO.save(<span class="string">&quot;Jack&quot;</span>, <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">125</span>,<span class="number">24</span>,<span class="string">&quot;Jack&quot;</span>));</span><br><span class="line">        userDAO.save(<span class="string">&quot;Smith&quot;</span>, <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">133</span>,<span class="number">19</span>,<span class="string">&quot;Smith&quot;</span>));</span><br><span class="line">        userDAO.save(<span class="string">&quot;Tom&quot;</span>, <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">159</span>,<span class="number">20</span>,<span class="string">&quot;Tom&quot;</span>));</span><br><span class="line">        userDAO.save(<span class="string">&quot;Mary&quot;</span>, <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">115</span>,<span class="number">49</span>,<span class="string">&quot;Mary&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用get</span></span><br><span class="line">        System.out.println(<span class="string">&quot;----使用get----&quot;</span>);</span><br><span class="line">        System.out.println(userDAO.get(<span class="string">&quot;Jack&quot;</span>));</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDAO.get(<span class="string">&quot;Tom&quot;</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用update</span></span><br><span class="line">        System.out.println(<span class="string">&quot;----使用update----&quot;</span>);</span><br><span class="line">        userDAO.update(<span class="string">&quot;牛人&quot;</span>,<span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">110</span>,<span class="number">48</span>,<span class="string">&quot;牛人他爹&quot;</span>));</span><br><span class="line">        System.out.println(userDAO.get(<span class="string">&quot;牛人&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用list</span></span><br><span class="line">        System.out.println(<span class="string">&quot;----使用list----&quot;</span>);</span><br><span class="line">        List&lt;User&gt; ts = userDAO.list();</span><br><span class="line">        <span class="keyword">for</span>(Object obj : ts)&#123;</span><br><span class="line">            System.out.println(obj);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用delete</span></span><br><span class="line">        System.out.println(<span class="string">&quot;----使用delete----&quot;</span>);</span><br><span class="line">        userDAO.delete(<span class="string">&quot;牛人&quot;</span>);</span><br><span class="line">        ts = userDAO.list();</span><br><span class="line">        <span class="keyword">for</span>(Object obj : ts)&#123;</span><br><span class="line">            System.out.println(obj);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DAO</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, T&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();<span class="comment">//注意要让map指向对象实例（之前没有等号后面一段，程序就报错了）</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(String id,T entity)</span>&#123;</span><br><span class="line">        map.put(id,entity);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">get</span><span class="params">(String id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.get(id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(String id , T entity)</span>&#123;</span><br><span class="line">        map.put(id,entity);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//要遍历map[k-v],将map中的所以value(T entity),封装到ArrayList中</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;T&gt; <span class="title function_">list</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//创建ArrayList</span></span><br><span class="line">        ArrayList&lt;T&gt; ts = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//遍历map</span></span><br><span class="line">        Set&lt;String&gt; keySet = map.keySet();</span><br><span class="line">        Iterator&lt;String&gt; iterator = keySet.iterator();</span><br><span class="line">        <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> (String) o;</span><br><span class="line">            ts.add(get(s));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ts;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(String id)</span>&#123;</span><br><span class="line">        map.remove(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(<span class="type">int</span> id, <span class="type">int</span> age, String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>latex语法字典</title>
      <link href="/posts/3259212833.html"/>
      <url>/posts/3259212833.html</url>
      
        <content type="html"><![CDATA[<p>${\Large LaTex}$是一种高质量的排版格式，可以生成复杂的表格与数学公式，是当前电子与数学出版行业的事实标准。本文以 markdown 作为 LaTex 渲染引擎（一款用于标记语言文档转换的命令行工具），分门别类的总结了撰写$\colorbox{LimeGreen}{数学公式}$所需要经常使用到的 LaTeX 语法，方便写作相关科技类文章时随手查阅。</p><p>由于大部分内容都是使用表格的方式陈列的，且大部分表格都比较长，在排版的过程中分页方面会不太美观。</p><h2 id="保留字符"><a href="#保留字符" class="headerlink" title="保留字符"></a>保留字符</h2><p>LaTeX 环境中具有特殊含义的保留字符，不能直接使用，必须通过指定的语法实现：</p><div class="table-container"><table><thead><tr><th style="text-align:center">序号</th><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th><th style="text-align:center">序号</th><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th></tr></thead><tbody><tr><td style="text-align:center"><strong>1</strong></td><td style="text-align:center"><script type="math/tex">\#</script></td><td style="text-align:center"><code>\#</code></td><td style="text-align:center"><strong>6</strong></td><td style="text-align:center"><script type="math/tex">\{</script></td><td style="text-align:center"><code>\&#123;</code></td></tr><tr><td style="text-align:center"><strong>2</strong></td><td style="text-align:center"><script type="math/tex">\%</script></td><td style="text-align:center"><code>\%</code></td><td style="text-align:center"><strong>7</strong></td><td style="text-align:center"><script type="math/tex">\}</script></td><td style="text-align:center"><code>\&#125;</code></td></tr><tr><td style="text-align:center"><strong>3</strong></td><td style="text-align:center"><script type="math/tex">^\wedge</script></td><td style="text-align:center"><code>^\wedge</code></td><td style="text-align:center"><strong>8</strong></td><td style="text-align:center"><script type="math/tex">\sim</script></td><td style="text-align:center"><code>\sim</code></td></tr><tr><td style="text-align:center"><strong>4</strong></td><td style="text-align:center"><script type="math/tex">\&</script></td><td style="text-align:center"><code>\&amp;</code></td><td style="text-align:center"><strong>9</strong></td><td style="text-align:center"><script type="math/tex">\backslash</script></td><td style="text-align:center"><code>\backslash</code></td></tr><tr><td style="text-align:center"><strong>5</strong></td><td style="text-align:center"><script type="math/tex">\_</script></td><td style="text-align:center"><code>\_</code></td><td style="text-align:center"></td><td style="text-align:center"></td></tr></tbody></table></div><h2 id="希腊字母"><a href="#希腊字母" class="headerlink" title="希腊字母"></a>希腊字母</h2><div class="table-container"><table><thead><tr><th style="text-align:center">序号</th><th style="text-align:center">标准符号</th><th style="text-align:center">LaTeX</th><th style="text-align:center">首字母大写</th><th style="text-align:center">LaTeX</th><th style="text-align:center">使用 <code>var</code> 前缀</th><th style="text-align:center">LaTeX</th><th style="text-align:center">读音</th></tr></thead><tbody><tr><td style="text-align:center"><strong>1</strong></td><td style="text-align:center">$\alpha$</td><td style="text-align:center"><code>\alpha</code></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">/ˈælfə/</td></tr><tr><td style="text-align:center"><strong>2</strong></td><td style="text-align:center">$\beta$</td><td style="text-align:center"><code>\beta</code></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">/ˈbeɪtə/</td></tr><tr><td style="text-align:center"><strong>3</strong></td><td style="text-align:center">$\gamma$</td><td style="text-align:center"><code>\gamma</code></td><td style="text-align:center">$\Gamma$</td><td style="text-align:center"><code>\Gamma</code></td><td style="text-align:center">$\varGamma$</td><td style="text-align:center"><code>\varGamma</code></td><td style="text-align:center">/ˈɡæmə/</td></tr><tr><td style="text-align:center"><strong>4</strong></td><td style="text-align:center">$\delta$</td><td style="text-align:center"><code>\delta</code></td><td style="text-align:center">$\Delta$</td><td style="text-align:center"><code>\Delta</code></td><td style="text-align:center">$\varDelta$</td><td style="text-align:center"><code>\varDelta</code></td><td style="text-align:center">/ˈdɛltə/</td></tr><tr><td style="text-align:center"><strong>5</strong></td><td style="text-align:center">$\epsilon$</td><td style="text-align:center"><code>\epsilon</code></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">$\varepsilon$</td><td style="text-align:center"><code>\varepsilon</code></td><td style="text-align:center">/ˈɛpsɪlɒn/</td></tr><tr><td style="text-align:center"><strong>6</strong></td><td style="text-align:center">$\zeta$</td><td style="text-align:center"><code>\zeta</code></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">/ˈzeɪtə/</td></tr><tr><td style="text-align:center"><strong>7</strong></td><td style="text-align:center">$\eta$</td><td style="text-align:center"><code>\eta</code></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">/ˈeɪtə/</td></tr><tr><td style="text-align:center"><strong>8</strong></td><td style="text-align:center">θ</td><td style="text-align:center"><code>\theta</code></td><td style="text-align:center">$\Theta$</td><td style="text-align:center"><code>\Theta</code></td><td style="text-align:center">$\vartheta$、$\varTheta$</td><td style="text-align:center"><code>\vartheta</code>、<code>\varTheta</code></td><td style="text-align:center">/ˈθiːtə/</td></tr><tr><td style="text-align:center"><strong>9</strong></td><td style="text-align:center">$\iota$</td><td style="text-align:center"><code>\iota</code></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">/aɪˈoʊtə/</td></tr><tr><td style="text-align:center"><strong>10</strong></td><td style="text-align:center">$\kappa$</td><td style="text-align:center"><code>\kappa</code></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">$\varkappa$</td><td style="text-align:center"><code>\varkappa</code></td><td style="text-align:center">/ˈkæpə/</td></tr><tr><td style="text-align:center"><strong>11</strong></td><td style="text-align:center">$\lambda$</td><td style="text-align:center"><code>\lambda</code></td><td style="text-align:center">$\Lambda$</td><td style="text-align:center"><code>\Lambda</code></td><td style="text-align:center">$\varLambda$</td><td style="text-align:center"><code>\varLambda</code></td><td style="text-align:center">/ˈlæmdə/</td></tr><tr><td style="text-align:center"><strong>12</strong></td><td style="text-align:center">$\mu$</td><td style="text-align:center"><code>\mu</code></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">/mjuː/</td></tr><tr><td style="text-align:center"><strong>13</strong></td><td style="text-align:center">$\nu$</td><td style="text-align:center"><code>\nu</code></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">/njuː/</td></tr><tr><td style="text-align:center"><strong>14</strong></td><td style="text-align:center">$\xi$</td><td style="text-align:center"><code>\xi</code></td><td style="text-align:center">$\Xi$</td><td style="text-align:center"><code>\Xi</code></td><td style="text-align:center">$\varXi$</td><td style="text-align:center"><code>\varXi</code></td><td style="text-align:center">/zaɪ, ksaɪ/</td></tr><tr><td style="text-align:center"><strong>15</strong></td><td style="text-align:center">$o$</td><td style="text-align:center"><code>o</code></td><td style="text-align:center">$O$</td><td style="text-align:center"><code>O</code></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">/ˈɒmɪkrɒn/</td></tr><tr><td style="text-align:center"><strong>16</strong></td><td style="text-align:center">$\pi$</td><td style="text-align:center"><code>\pi</code></td><td style="text-align:center">$\Pi$</td><td style="text-align:center"><code>\Pi</code></td><td style="text-align:center">$\varpi$、$\varPi$</td><td style="text-align:center"><code>\varpi</code>、<code>\varPi</code></td><td style="text-align:center">/paɪ/</td></tr><tr><td style="text-align:center"><strong>17</strong></td><td style="text-align:center">$\rho$</td><td style="text-align:center"><code>\rho</code></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">$\varrho$</td><td style="text-align:center"><code>\varrho</code></td><td style="text-align:center">/roʊ/</td></tr><tr><td style="text-align:center"><strong>18</strong></td><td style="text-align:center">$\sigma$</td><td style="text-align:center"><code>\sigma</code></td><td style="text-align:center">$\Sigma$</td><td style="text-align:center"><code>\Sigma</code></td><td style="text-align:center">$\varsigma$、$\varSigma$</td><td style="text-align:center"><code>\varsigma</code>、<code>\varSigma</code></td><td style="text-align:center">/ˈsɪɡmə/</td></tr><tr><td style="text-align:center"><strong>19</strong></td><td style="text-align:center">$\tau$</td><td style="text-align:center"><code>\tau</code></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">/taʊ, tɔː/</td></tr><tr><td style="text-align:center"><strong>20</strong></td><td style="text-align:center">$\upsilon$</td><td style="text-align:center"><code>\upsilon</code></td><td style="text-align:center">$\Upsilon$</td><td style="text-align:center"><code>\Upsilon</code></td><td style="text-align:center">$\varUpsilon$</td><td style="text-align:center"><code>\varUpsilon</code></td><td style="text-align:center">/ˈʌpsɪlɒn/</td></tr><tr><td style="text-align:center"><strong>21</strong></td><td style="text-align:center">$\phi$</td><td style="text-align:center"><code>\phi</code></td><td style="text-align:center">$\Phi$</td><td style="text-align:center"><code>\Phi</code></td><td style="text-align:center">$\varphi$、$\varPhi$</td><td style="text-align:center"><code>\varphi</code>、<code>\varPhi</code></td><td style="text-align:center">/faɪ/</td></tr><tr><td style="text-align:center"><strong>22</strong></td><td style="text-align:center">$\chi$</td><td style="text-align:center"><code>\chi</code></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">/kaɪ/</td></tr><tr><td style="text-align:center"><strong>23</strong></td><td style="text-align:center">$\psi$</td><td style="text-align:center"><code>\psi</code></td><td style="text-align:center">$\Psi$</td><td style="text-align:center"><code>\Psi</code></td><td style="text-align:center">$\varPsi$</td><td style="text-align:center"><code>\varPsi</code></td><td style="text-align:center">/psaɪ/</td></tr><tr><td style="text-align:center"><strong>24</strong></td><td style="text-align:center">$\omega$</td><td style="text-align:center"><code>\omega</code></td><td style="text-align:center">$\Omega$</td><td style="text-align:center"><code>\Omega</code></td><td style="text-align:center">$\varOmega$</td><td style="text-align:center"><code>\varOmega</code></td><td style="text-align:center">/oʊˈmeɪɡə/</td></tr><tr><td style="text-align:center"><strong>25</strong></td><td style="text-align:center">$\digamma$</td><td style="text-align:center"><code>\digamma</code></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">/daɪ’gæmə/</td></tr></tbody></table></div><h2 id="希伯来字母"><a href="#希伯来字母" class="headerlink" title="希伯来字母"></a>希伯来字母</h2><div class="table-container"><table><thead><tr><th style="text-align:center">序号</th><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th><th style="text-align:center">英文</th><th style="text-align:center">序号</th><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th><th style="text-align:center">英文</th></tr></thead><tbody><tr><td style="text-align:center"><strong>1</strong></td><td style="text-align:center">$\aleph$</td><td style="text-align:center"><code>\aleph</code></td><td style="text-align:center">aleph</td><td style="text-align:center"><strong>3</strong></td><td style="text-align:center">$\gimel$</td><td style="text-align:center"><code>\gimel</code></td><td style="text-align:center">gimel</td></tr><tr><td style="text-align:center"><strong>2</strong></td><td style="text-align:center">$\beth$</td><td style="text-align:center"><code>\beth</code></td><td style="text-align:center">beth</td><td style="text-align:center"><strong>4</strong></td><td style="text-align:center">$\daleth$</td><td style="text-align:center"><code>\daleth</code></td><td style="text-align:center">daleth</td></tr></tbody></table></div><h2 id="二元运算符"><a href="#二元运算符" class="headerlink" title="二元运算符"></a>二元运算符</h2><div class="table-container"><table><thead><tr><th style="text-align:center">序号</th><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th><th style="text-align:center">序号</th><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th></tr></thead><tbody><tr><td style="text-align:center"><strong>1</strong></td><td style="text-align:center">$+$</td><td style="text-align:center"><code>+</code></td><td style="text-align:center"><strong>20</strong></td><td style="text-align:center">$\bullet$</td><td style="text-align:center"><code>\bullet</code></td></tr><tr><td style="text-align:center"><strong>2</strong></td><td style="text-align:center">$−$</td><td style="text-align:center"><code>-</code></td><td style="text-align:center"><strong>21</strong></td><td style="text-align:center">$\oplus$</td><td style="text-align:center"><code>\oplus</code></td></tr><tr><td style="text-align:center"><strong>3</strong></td><td style="text-align:center">$\times$</td><td style="text-align:center"><code>\times</code></td><td style="text-align:center"><strong>22</strong></td><td style="text-align:center">$\ominus$</td><td style="text-align:center"><code>\ominus</code></td></tr><tr><td style="text-align:center"><strong>4</strong></td><td style="text-align:center">$\div$</td><td style="text-align:center"><code>\div</code></td><td style="text-align:center"><strong>23</strong></td><td style="text-align:center">$\odot$</td><td style="text-align:center"><code>\odot</code></td></tr><tr><td style="text-align:center"><strong>5</strong></td><td style="text-align:center">$\pm$</td><td style="text-align:center"><code>\pm</code></td><td style="text-align:center"><strong>24</strong></td><td style="text-align:center">$\oslash$</td><td style="text-align:center"><code>\oslash</code></td></tr><tr><td style="text-align:center"><strong>6</strong></td><td style="text-align:center">$\mp$</td><td style="text-align:center"><code>\mp</code></td><td style="text-align:center"><strong>25</strong></td><td style="text-align:center">$\otimes$</td><td style="text-align:center"><code>\otimes</code></td></tr><tr><td style="text-align:center"><strong>7</strong></td><td style="text-align:center">$\triangleleft$</td><td style="text-align:center"><code>\triangleleft</code></td><td style="text-align:center"><strong>26</strong></td><td style="text-align:center">$\bigcirc$</td><td style="text-align:center"><code>\bigcirc</code></td></tr><tr><td style="text-align:center"><strong>8</strong></td><td style="text-align:center">$\triangleright$</td><td style="text-align:center"><code>\triangleright</code></td><td style="text-align:center"><strong>27</strong></td><td style="text-align:center">$\diamond$</td><td style="text-align:center"><code>\diamond</code></td></tr><tr><td style="text-align:center"><strong>9</strong></td><td style="text-align:center">$\cdot$</td><td style="text-align:center"><code>\cdot</code></td><td style="text-align:center"><strong>28</strong></td><td style="text-align:center">$\uplus$</td><td style="text-align:center"><code>\uplus</code></td></tr><tr><td style="text-align:center"><strong>10</strong></td><td style="text-align:center">$\setminus$</td><td style="text-align:center"><code>\setminus</code></td><td style="text-align:center"><strong>29</strong></td><td style="text-align:center">$\bigtriangleup$</td><td style="text-align:center"><code>\bigtriangleup</code></td></tr><tr><td style="text-align:center"><strong>11</strong></td><td style="text-align:center">$\star$</td><td style="text-align:center"><code>\star</code></td><td style="text-align:center"><strong>30</strong></td><td style="text-align:center">$\bigtriangledown$</td><td style="text-align:center"><code>\bigtriangledown</code></td></tr><tr><td style="text-align:center"><strong>12</strong></td><td style="text-align:center">$\ast$</td><td style="text-align:center"><code>\ast</code></td><td style="text-align:center"><strong>31</strong></td><td style="text-align:center">$\lhd$</td><td style="text-align:center"><code>\lhd</code></td></tr><tr><td style="text-align:center"><strong>13</strong></td><td style="text-align:center">$\cup$</td><td style="text-align:center"><code>\cup</code></td><td style="text-align:center"><strong>32</strong></td><td style="text-align:center">$\rhd$</td><td style="text-align:center"><code>\rhd</code></td></tr><tr><td style="text-align:center"><strong>14</strong></td><td style="text-align:center">$\cap$</td><td style="text-align:center"><code>\cap</code></td><td style="text-align:center"><strong>33</strong></td><td style="text-align:center">$\unlhd$</td><td style="text-align:center"><code>\unlhd</code></td></tr><tr><td style="text-align:center"><strong>15</strong></td><td style="text-align:center">$\sqcup$</td><td style="text-align:center"><code>\sqcup</code></td><td style="text-align:center"><strong>34</strong></td><td style="text-align:center">$\unrhd$</td><td style="text-align:center"><code>\unrhd</code></td></tr><tr><td style="text-align:center"><strong>16</strong></td><td style="text-align:center">$\sqcap$</td><td style="text-align:center"><code>\sqcap</code></td><td style="text-align:center"><strong>35</strong></td><td style="text-align:center">$\amalg$</td><td style="text-align:center"><code>\amalg</code></td></tr><tr><td style="text-align:center"><strong>17</strong></td><td style="text-align:center">$\vee$</td><td style="text-align:center"><code>\vee</code></td><td style="text-align:center"><strong>36</strong></td><td style="text-align:center">$\wr$</td><td style="text-align:center"><code>\wr</code></td></tr><tr><td style="text-align:center"><strong>18</strong></td><td style="text-align:center">$\wedge$</td><td style="text-align:center"><code>\wedge</code></td><td style="text-align:center"><strong>37</strong></td><td style="text-align:center">$\dagger$</td><td style="text-align:center"><code>\dagger</code></td></tr><tr><td style="text-align:center"><strong>19</strong></td><td style="text-align:center">$\circ$</td><td style="text-align:center"><code>\circ</code></td><td style="text-align:center"><strong>38</strong></td><td style="text-align:center">$\ddagger$</td><td style="text-align:center"><code>\ddagger</code></td></tr></tbody></table></div><h2 id="二元关系符"><a href="#二元关系符" class="headerlink" title="二元关系符"></a>二元关系符</h2><div class="table-container"><table><thead><tr><th style="text-align:center">序号</th><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th><th style="text-align:center">序号</th><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th></tr></thead><tbody><tr><td style="text-align:center"><strong>1</strong></td><td style="text-align:center">$=$</td><td style="text-align:center"><code>=</code></td><td style="text-align:center"><strong>49</strong></td><td style="text-align:center">$\gneq$</td><td style="text-align:center"><code>\gneq</code></td></tr><tr><td style="text-align:center"><strong>2</strong></td><td style="text-align:center">$\ne$</td><td style="text-align:center"><code>\ne</code></td><td style="text-align:center"><strong>50</strong></td><td style="text-align:center">$\geqq$</td><td style="text-align:center"><code>\geqq</code></td></tr><tr><td style="text-align:center"><strong>3</strong></td><td style="text-align:center">$\neq$</td><td style="text-align:center"><code>\neq</code></td><td style="text-align:center"><strong>51</strong></td><td style="text-align:center">$\ngeq$</td><td style="text-align:center"><code>\ngeq</code></td></tr><tr><td style="text-align:center"><strong>4</strong></td><td style="text-align:center">$\equiv$</td><td style="text-align:center"><code>\equiv</code></td><td style="text-align:center"><strong>52</strong></td><td style="text-align:center">$\ngeqq$</td><td style="text-align:center"><code>\ngeqq</code></td></tr><tr><td style="text-align:center"><strong>5</strong></td><td style="text-align:center">$\not\equiv$</td><td style="text-align:center"><code>\not\equiv</code></td><td style="text-align:center"><strong>53</strong></td><td style="text-align:center">$\gneqq$</td><td style="text-align:center"><code>\gneqq</code></td></tr><tr><td style="text-align:center"><strong>6</strong></td><td style="text-align:center">$\doteq$</td><td style="text-align:center"><code>\doteq</code></td><td style="text-align:center"><strong>54</strong></td><td style="text-align:center">$\gvertneqq$</td><td style="text-align:center"><code>\gvertneqq</code></td></tr><tr><td style="text-align:center"><strong>7</strong></td><td style="text-align:center">$\doteqdot$</td><td style="text-align:center"><code>\doteqdot</code></td><td style="text-align:center"><strong>55</strong></td><td style="text-align:center">$\lessgtr$</td><td style="text-align:center"><code>\lessgtr</code></td></tr><tr><td style="text-align:center"><strong>8</strong></td><td style="text-align:center">$\overset{\underset{\mathrm{def}}{}}{=}$</td><td style="text-align:center"><code>\overset&#123;\underset&#123;\mathrm&#123;def&#125;&#125;&#123;&#125;&#125;&#123;=&#125;</code></td><td style="text-align:center"><strong>56</strong></td><td style="text-align:center">$\lesseqgtr$</td><td style="text-align:center"><code>\lesseqgtr</code></td></tr><tr><td style="text-align:center"><strong>9</strong></td><td style="text-align:center">$:=$</td><td style="text-align:center"><code>:=</code></td><td style="text-align:center"><strong>57</strong></td><td style="text-align:center">$\lesseqqgtr$</td><td style="text-align:center"><code>\lesseqqgtr</code></td></tr><tr><td style="text-align:center"><strong>10</strong></td><td style="text-align:center">$\sim$</td><td style="text-align:center"><code>\sim</code></td><td style="text-align:center"><strong>58</strong></td><td style="text-align:center">$\gtrless$</td><td style="text-align:center"><code>\gtrless</code></td></tr><tr><td style="text-align:center"><strong>11</strong></td><td style="text-align:center">$\nsim$</td><td style="text-align:center"><code>\nsim</code></td><td style="text-align:center"><strong>59</strong></td><td style="text-align:center">$\gtreqless$</td><td style="text-align:center"><code>\gtreqless</code></td></tr><tr><td style="text-align:center"><strong>12</strong></td><td style="text-align:center">$\backsim$</td><td style="text-align:center"><code>\backsim</code></td><td style="text-align:center"><strong>60</strong></td><td style="text-align:center">$\gtreqqless$</td><td style="text-align:center"><code>\gtreqqless</code></td></tr><tr><td style="text-align:center"><strong>13</strong></td><td style="text-align:center">$\thicksim$</td><td style="text-align:center"><code>\thicksim</code></td><td style="text-align:center"><strong>61</strong></td><td style="text-align:center">$\leqslant$</td><td style="text-align:center"><code>\leqslant</code></td></tr><tr><td style="text-align:center"><strong>14</strong></td><td style="text-align:center">$\simeq$</td><td style="text-align:center"><code>\simeq</code></td><td style="text-align:center"><strong>62</strong></td><td style="text-align:center">$\nleqslant$</td><td style="text-align:center"><code>\nleqslant</code></td></tr><tr><td style="text-align:center"><strong>15</strong></td><td style="text-align:center">$\eqsim$</td><td style="text-align:center"><code>\backsimeq</code></td><td style="text-align:center"><strong>63</strong></td><td style="text-align:center">$\eqslantless$</td><td style="text-align:center"><code>\eqslantless</code></td></tr><tr><td style="text-align:center"><strong>16</strong></td><td style="text-align:center">$\eqsim$</td><td style="text-align:center"><code>\eqsim</code></td><td style="text-align:center"><strong>64</strong></td><td style="text-align:center">$\geqslant$</td><td style="text-align:center"><code>\geqslant</code></td></tr><tr><td style="text-align:center"><strong>17</strong></td><td style="text-align:center">$\cong$</td><td style="text-align:center"><code>\cong</code></td><td style="text-align:center"><strong>65</strong></td><td style="text-align:center">$\ngeqslant$</td><td style="text-align:center"><code>\ngeqslant</code></td></tr><tr><td style="text-align:center"><strong>18</strong></td><td style="text-align:center">$\ncong$</td><td style="text-align:center"><code>\ncong</code></td><td style="text-align:center"><strong>66</strong></td><td style="text-align:center">$\eqslantgtr$</td><td style="text-align:center"><code>\eqslantgtr</code></td></tr><tr><td style="text-align:center"><strong>19</strong></td><td style="text-align:center">$\approx$</td><td style="text-align:center"><code>\approx</code></td><td style="text-align:center"><strong>67</strong></td><td style="text-align:center">$\lesssim$</td><td style="text-align:center"><code>\lesssim</code></td></tr><tr><td style="text-align:center"><strong>20</strong></td><td style="text-align:center">$\thickapprox$</td><td style="text-align:center"><code>\thickapprox</code></td><td style="text-align:center"><strong>68</strong></td><td style="text-align:center">$\lnsim$</td><td style="text-align:center"><code>\lnsim</code></td></tr><tr><td style="text-align:center"><strong>21</strong></td><td style="text-align:center">$\approxeq$</td><td style="text-align:center"><code>\approxeq</code></td><td style="text-align:center"><strong>69</strong></td><td style="text-align:center">$\lessapprox$</td><td style="text-align:center"><code>\lessapprox</code></td></tr><tr><td style="text-align:center"><strong>22</strong></td><td style="text-align:center">$\asymp$</td><td style="text-align:center"><code>\asymp</code></td><td style="text-align:center"><strong>70</strong></td><td style="text-align:center">$\lnapprox$</td><td style="text-align:center"><code>\lnapprox</code></td></tr><tr><td style="text-align:center"><strong>23</strong></td><td style="text-align:center">$\propto$</td><td style="text-align:center"><code>\propto</code></td><td style="text-align:center"><strong>71</strong></td><td style="text-align:center">$\gtrsim$</td><td style="text-align:center"><code>\gtrsim</code></td></tr><tr><td style="text-align:center"><strong>24</strong></td><td style="text-align:center">$\varpropto$</td><td style="text-align:center"><code>\varpropto</code></td><td style="text-align:center"><strong>72</strong></td><td style="text-align:center">$\gnsim$</td><td style="text-align:center"><code>\gnsim</code></td></tr><tr><td style="text-align:center"><strong>25</strong></td><td style="text-align:center">$&lt;$</td><td style="text-align:center"><code>&lt;</code></td><td style="text-align:center"><strong>73</strong></td><td style="text-align:center">$\gtrapprox$</td><td style="text-align:center"><code>\gtrapprox</code></td></tr><tr><td style="text-align:center"><strong>26</strong></td><td style="text-align:center">$\nless$</td><td style="text-align:center"><code>\nless</code></td><td style="text-align:center"><strong>74</strong></td><td style="text-align:center">$\gnapprox$</td><td style="text-align:center"><code>\gnapprox</code></td></tr><tr><td style="text-align:center"><strong>27</strong></td><td style="text-align:center">$\ll$</td><td style="text-align:center"><code>\ll</code></td><td style="text-align:center"><strong>75</strong></td><td style="text-align:center">$\prec$</td><td style="text-align:center"><code>\prec</code></td></tr><tr><td style="text-align:center"><strong>28</strong></td><td style="text-align:center">$\not\ll$</td><td style="text-align:center"><code>\not\ll</code></td><td style="text-align:center"><strong>76</strong></td><td style="text-align:center">$\nprec$</td><td style="text-align:center"><code>\nprec</code></td></tr><tr><td style="text-align:center"><strong>29</strong></td><td style="text-align:center">$\lll$</td><td style="text-align:center"><code>\lll</code></td><td style="text-align:center"><strong>77</strong></td><td style="text-align:center">$\preceq$</td><td style="text-align:center"><code>\preceq</code></td></tr><tr><td style="text-align:center"><strong>30</strong></td><td style="text-align:center">$\not\lll$</td><td style="text-align:center"><code>\not\lll</code></td><td style="text-align:center"><strong>78</strong></td><td style="text-align:center">$\npreceq$</td><td style="text-align:center"><code>\npreceq</code></td></tr><tr><td style="text-align:center"><strong>31</strong></td><td style="text-align:center">$\lessdot$</td><td style="text-align:center"><code>\lessdot</code></td><td style="text-align:center"><strong>79</strong></td><td style="text-align:center">$\precneqq$</td><td style="text-align:center"><code>\precneqq</code></td></tr><tr><td style="text-align:center"><strong>32</strong></td><td style="text-align:center">$&gt;$</td><td style="text-align:center"><code>&gt;</code></td><td style="text-align:center"><strong>80</strong></td><td style="text-align:center">$\succ$</td><td style="text-align:center"><code>\succ</code></td></tr><tr><td style="text-align:center"><strong>33</strong></td><td style="text-align:center">$\ngtr$</td><td style="text-align:center"><code>\ngtr</code></td><td style="text-align:center"><strong>81</strong></td><td style="text-align:center">$\nsucc$</td><td style="text-align:center"><code>\nsucc</code></td></tr><tr><td style="text-align:center"><strong>34</strong></td><td style="text-align:center">$\gg$</td><td style="text-align:center"><code>\gg</code></td><td style="text-align:center"><strong>82</strong></td><td style="text-align:center">$\succeq$</td><td style="text-align:center"><code>\succeq</code></td></tr><tr><td style="text-align:center"><strong>35</strong></td><td style="text-align:center">$\not\gg$</td><td style="text-align:center"><code>\not\gg</code></td><td style="text-align:center"><strong>83</strong></td><td style="text-align:center">$\nsucceq$</td><td style="text-align:center"><code>\nsucceq</code></td></tr><tr><td style="text-align:center"><strong>36</strong></td><td style="text-align:center">$\ggg$</td><td style="text-align:center"><code>\ggg</code></td><td style="text-align:center"><strong>84</strong></td><td style="text-align:center">$\succneqq$</td><td style="text-align:center"><code>\succneqq</code></td></tr><tr><td style="text-align:center"><strong>37</strong></td><td style="text-align:center">$\not\ggg$</td><td style="text-align:center"><code>\not\ggg</code></td><td style="text-align:center"><strong>85</strong></td><td style="text-align:center">$\preccurlyeq$</td><td style="text-align:center"><code>\preccurlyeq</code></td></tr><tr><td style="text-align:center"><strong>38</strong></td><td style="text-align:center">$\gtrdot$</td><td style="text-align:center"><code>\gtrdot</code></td><td style="text-align:center"><strong>86</strong></td><td style="text-align:center">$\curlyeqprec$</td><td style="text-align:center"><code>\curlyeqprec</code></td></tr><tr><td style="text-align:center"><strong>39</strong></td><td style="text-align:center">$\le$</td><td style="text-align:center"><code>\le</code></td><td style="text-align:center"><strong>87</strong></td><td style="text-align:center">$\succcurlyeq$</td><td style="text-align:center"><code>\succcurlyeq</code></td></tr><tr><td style="text-align:center"><strong>40</strong></td><td style="text-align:center">$\leq$</td><td style="text-align:center"><code>\leq</code></td><td style="text-align:center"><strong>88</strong></td><td style="text-align:center">$\curlyeqsucc$</td><td style="text-align:center"><code>\curlyeqsucc</code></td></tr><tr><td style="text-align:center"><strong>41</strong></td><td style="text-align:center">$\lneq$</td><td style="text-align:center"><code>\lneq</code></td><td style="text-align:center"><strong>89</strong></td><td style="text-align:center">$\precsim$</td><td style="text-align:center"><code>\precsim</code></td></tr><tr><td style="text-align:center"><strong>42</strong></td><td style="text-align:center">$\leqq$</td><td style="text-align:center"><code>\leqq</code></td><td style="text-align:center"><strong>90</strong></td><td style="text-align:center">$\precnsim$</td><td style="text-align:center"><code>\precnsim</code></td></tr><tr><td style="text-align:center"><strong>43</strong></td><td style="text-align:center">$\nleq$</td><td style="text-align:center"><code>\nleq</code></td><td style="text-align:center"><strong>91</strong></td><td style="text-align:center">$\precapprox$</td><td style="text-align:center"><code>\precapprox</code></td></tr><tr><td style="text-align:center"><strong>44</strong></td><td style="text-align:center">$\nleqq$</td><td style="text-align:center"><code>\nleqq</code></td><td style="text-align:center"><strong>92</strong></td><td style="text-align:center">$\precnapprox$</td><td style="text-align:center"><code>\precnapprox</code></td></tr><tr><td style="text-align:center"><strong>45</strong></td><td style="text-align:center">$\lneqq$</td><td style="text-align:center"><code>\lneqq</code></td><td style="text-align:center"><strong>93</strong></td><td style="text-align:center">$\succsim$</td><td style="text-align:center"><code>\succsim</code></td></tr><tr><td style="text-align:center"><strong>46</strong></td><td style="text-align:center">$\lvertneqq$</td><td style="text-align:center"><code>\lvertneqq</code></td><td style="text-align:center"><strong>94</strong></td><td style="text-align:center">$\succnsim$</td><td style="text-align:center"><code>\succnsim</code></td></tr><tr><td style="text-align:center"><strong>47</strong></td><td style="text-align:center">$\ge$</td><td style="text-align:center"><code>\ge</code></td><td style="text-align:center"><strong>95</strong></td><td style="text-align:center">$\succapprox$</td><td style="text-align:center"><code>\succapprox</code></td></tr><tr><td style="text-align:center"><strong>48</strong></td><td style="text-align:center">$\geq$</td><td style="text-align:center"><code>\geq</code></td><td style="text-align:center"><strong>96</strong></td><td style="text-align:center">$\succnapprox$</td><td style="text-align:center"><code>\succnapprox</code></td></tr></tbody></table></div><h2 id="几何符号"><a href="#几何符号" class="headerlink" title="几何符号"></a>几何符号</h2><div class="table-container"><table><thead><tr><th style="text-align:center">序号</th><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th><th style="text-align:center">序号</th><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th></tr></thead><tbody><tr><td style="text-align:center"><strong>1</strong></td><td style="text-align:center">$\parallel$</td><td style="text-align:center"><code>\parallel</code></td><td style="text-align:center"><strong>14</strong></td><td style="text-align:center">$\lozenge$</td><td style="text-align:center"><code>\lozenge</code></td></tr><tr><td style="text-align:center"><strong>2</strong></td><td style="text-align:center">$\nparallel$</td><td style="text-align:center"><code>\nparallel</code></td><td style="text-align:center"><strong>15</strong></td><td style="text-align:center">$\blacklozenge$</td><td style="text-align:center"><code>\blacklozenge</code></td></tr><tr><td style="text-align:center"><strong>3</strong></td><td style="text-align:center">$\shortparallel$</td><td style="text-align:center"><code>\shortparallel</code></td><td style="text-align:center"><strong>16</strong></td><td style="text-align:center">$\bigstar$</td><td style="text-align:center"><code>\bigstar</code></td></tr><tr><td style="text-align:center"><strong>4</strong></td><td style="text-align:center">$\nshortparallel$</td><td style="text-align:center"><code>\nshortparallel</code></td><td style="text-align:center"><strong>17</strong></td><td style="text-align:center">$\bigcirc$</td><td style="text-align:center"><code>\bigcirc</code></td></tr><tr><td style="text-align:center"><strong>5</strong></td><td style="text-align:center">$\perp$</td><td style="text-align:center"><code>\perp</code></td><td style="text-align:center"><strong>18</strong></td><td style="text-align:center">$\triangle$</td><td style="text-align:center"><code>\triangle</code></td></tr><tr><td style="text-align:center"><strong>6</strong></td><td style="text-align:center">$\angle$</td><td style="text-align:center"><code>\angle</code></td><td style="text-align:center"><strong>19</strong></td><td style="text-align:center">$\bigtriangleup$</td><td style="text-align:center"><code>\bigtriangleup</code></td></tr><tr><td style="text-align:center"><strong>7</strong></td><td style="text-align:center">$\sphericalangle$</td><td style="text-align:center"><code>\sphericalangle</code></td><td style="text-align:center"><strong>20</strong></td><td style="text-align:center">$\bigtriangledown$</td><td style="text-align:center"><code>\bigtriangledown</code></td></tr><tr><td style="text-align:center"><strong>8</strong></td><td style="text-align:center">$\measuredangle$</td><td style="text-align:center"><code>\measuredangle</code></td><td style="text-align:center"><strong>21</strong></td><td style="text-align:center">$\vartriangle$</td><td style="text-align:center"><code>\vartriangle</code></td></tr><tr><td style="text-align:center"><strong>9</strong></td><td style="text-align:center">$45^\circ$</td><td style="text-align:center"><code>45^\circ</code></td><td style="text-align:center"><strong>22</strong></td><td style="text-align:center">$\triangledown$</td><td style="text-align:center"><code>\triangledown</code></td></tr><tr><td style="text-align:center"><strong>10</strong></td><td style="text-align:center">$\Box$</td><td style="text-align:center"><code>\Box</code></td><td style="text-align:center"><strong>23</strong></td><td style="text-align:center">$\blacktriangle$</td><td style="text-align:center"><code>\blacktriangle</code></td></tr><tr><td style="text-align:center"><strong>11</strong></td><td style="text-align:center">$\blacksquare$</td><td style="text-align:center"><code>\blacksquare</code></td><td style="text-align:center"><strong>24</strong></td><td style="text-align:center">$\blacktriangledown$</td><td style="text-align:center"><code>\blacktriangledown</code></td></tr><tr><td style="text-align:center"><strong>12</strong></td><td style="text-align:center">$\diamond$</td><td style="text-align:center"><code>\diamond</code></td><td style="text-align:center"><strong>25</strong></td><td style="text-align:center">$\blacktriangleleft$</td><td style="text-align:center"><code>\blacktriangleleft</code></td></tr><tr><td style="text-align:center"><strong>13</strong></td><td style="text-align:center">$\Diamond\lozenge$</td><td style="text-align:center"><code>\Diamond \lozenge</code></td><td style="text-align:center"><strong>26</strong></td><td style="text-align:center">$\blacktriangleright$</td><td style="text-align:center"><code>\blacktriangleright</code></td></tr></tbody></table></div><h2 id="逻辑符号"><a href="#逻辑符号" class="headerlink" title="逻辑符号"></a>逻辑符号</h2><div class="table-container"><table><thead><tr><th style="text-align:center">序号</th><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th><th style="text-align:center">序号</th><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th></tr></thead><tbody><tr><td style="text-align:center"><strong>1</strong></td><td style="text-align:center">$\forall$</td><td style="text-align:center"><code>\forall</code></td><td style="text-align:center"><strong>20</strong></td><td style="text-align:center">$\neg$</td><td style="text-align:center"><code>\neg</code></td></tr><tr><td style="text-align:center"><strong>2</strong></td><td style="text-align:center">$\exists$</td><td style="text-align:center"><code>\exists</code></td><td style="text-align:center"><strong>21</strong></td><td style="text-align:center">$\not\operatorname{R}$</td><td style="text-align:center"><code>\not\operatorname&#123;R&#125;</code></td></tr><tr><td style="text-align:center"><strong>3</strong></td><td style="text-align:center">$\nexists$</td><td style="text-align:center"><code>\nexists</code></td><td style="text-align:center"><strong>22</strong></td><td style="text-align:center">$\bot$</td><td style="text-align:center"><code>\bot</code></td></tr><tr><td style="text-align:center"><strong>4</strong></td><td style="text-align:center">$\therefore$</td><td style="text-align:center"><code>\therefore</code></td><td style="text-align:center"><strong>23</strong></td><td style="text-align:center">$\top$</td><td style="text-align:center"><code>\top</code></td></tr><tr><td style="text-align:center"><strong>5</strong></td><td style="text-align:center">$\because$</td><td style="text-align:center"><code>\because</code></td><td style="text-align:center"><strong>24</strong></td><td style="text-align:center">$\vdash$</td><td style="text-align:center"><code>\vdash</code></td></tr><tr><td style="text-align:center"><strong>6</strong></td><td style="text-align:center">$\And$</td><td style="text-align:center"><code>\And</code></td><td style="text-align:center"><strong>25</strong></td><td style="text-align:center">$\dashv$</td><td style="text-align:center"><code>\dashv</code></td></tr><tr><td style="text-align:center"><strong>7</strong></td><td style="text-align:center">$\lor$</td><td style="text-align:center"><code>\lor</code></td><td style="text-align:center"><strong>26</strong></td><td style="text-align:center">$\vDash$</td><td style="text-align:center"><code>\vDash</code></td></tr><tr><td style="text-align:center"><strong>8</strong></td><td style="text-align:center">$\vee$</td><td style="text-align:center"><code>\vee</code></td><td style="text-align:center"><strong>27</strong></td><td style="text-align:center">$\vdash$</td><td style="text-align:center"><code>\Vdash</code></td></tr><tr><td style="text-align:center"><strong>9</strong></td><td style="text-align:center">$\curlyvee$</td><td style="text-align:center"><code>\curlyvee</code></td><td style="text-align:center"><strong>28</strong></td><td style="text-align:center">$\models$</td><td style="text-align:center"><code>\models</code></td></tr><tr><td style="text-align:center"><strong>10</strong></td><td style="text-align:center">$\bigvee$</td><td style="text-align:center"><code>\bigvee</code></td><td style="text-align:center"><strong>29</strong></td><td style="text-align:center">$\Vvdash$</td><td style="text-align:center"><code>\Vvdash</code></td></tr><tr><td style="text-align:center"><strong>11</strong></td><td style="text-align:center">$\land$</td><td style="text-align:center"><code>\land</code></td><td style="text-align:center"><strong>30</strong></td><td style="text-align:center">$\nvdash$</td><td style="text-align:center"><code>\nvdash</code></td></tr><tr><td style="text-align:center"><strong>12</strong></td><td style="text-align:center">$\wedge$</td><td style="text-align:center"><code>\wedge</code></td><td style="text-align:center"><strong>31</strong></td><td style="text-align:center">$\nVdash$</td><td style="text-align:center"><code>\nVdash</code></td></tr><tr><td style="text-align:center"><strong>13</strong></td><td style="text-align:center">$\curlywedge$</td><td style="text-align:center"><code>\curlywedge</code></td><td style="text-align:center"><strong>32</strong></td><td style="text-align:center">$\nvdash$</td><td style="text-align:center"><code>\nvDash</code></td></tr><tr><td style="text-align:center"><strong>14</strong></td><td style="text-align:center">$\bigwedge$</td><td style="text-align:center"><code>\bigwedge</code></td><td style="text-align:center"><strong>33</strong></td><td style="text-align:center">$\nVDash$</td><td style="text-align:center"><code>\nVDash</code></td></tr><tr><td style="text-align:center"><strong>15</strong></td><td style="text-align:center">$\bar{q}$</td><td style="text-align:center"><code>\bar&#123;q&#125;</code></td><td style="text-align:center"><strong>34</strong></td><td style="text-align:center">$\ulcorner$</td><td style="text-align:center"><code>\ulcorner</code></td></tr><tr><td style="text-align:center"><strong>16</strong></td><td style="text-align:center">$\bar{abc}$</td><td style="text-align:center"><code>\bar&#123;abc&#125;</code></td><td style="text-align:center"><strong>35</strong></td><td style="text-align:center">$\urcorner$</td><td style="text-align:center"><code>\urcorner</code></td></tr><tr><td style="text-align:center"><strong>17</strong></td><td style="text-align:center">$\overline{q}$</td><td style="text-align:center"><code>\overline&#123;q&#125;</code></td><td style="text-align:center"><strong>36</strong></td><td style="text-align:center">$\llcorner$</td><td style="text-align:center"><code>\llcorner</code></td></tr><tr><td style="text-align:center"><strong>18</strong></td><td style="text-align:center">$\overline{abc}$</td><td style="text-align:center"><code>\overline&#123;abc&#125;</code></td><td style="text-align:center"><strong>37</strong></td><td style="text-align:center">$\lrcorner$</td><td style="text-align:center"><code>\lrcorner</code></td></tr><tr><td style="text-align:center"><strong>19</strong></td><td style="text-align:center">$\lnot$</td><td style="text-align:center"><code>\lnot</code></td><td style="text-align:center"></td><td style="text-align:center"></td></tr></tbody></table></div><h2 id="集合符号"><a href="#集合符号" class="headerlink" title="集合符号"></a>集合符号</h2><div class="table-container"><table><thead><tr><th style="text-align:center">序号</th><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th><th style="text-align:center">序号</th><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th></tr></thead><tbody><tr><td style="text-align:center"><strong>1</strong></td><td style="text-align:center">${}$</td><td style="text-align:center"><code>\&#123; \&#125;</code></td><td style="text-align:center"><strong>23</strong></td><td style="text-align:center">$\sqsubset$</td><td style="text-align:center"><code>\sqsubset</code></td></tr><tr><td style="text-align:center"><strong>2</strong></td><td style="text-align:center">$\emptyset$</td><td style="text-align:center"><code>\emptyset</code></td><td style="text-align:center"><strong>24</strong></td><td style="text-align:center">$\supset$</td><td style="text-align:center"><code>\supset</code></td></tr><tr><td style="text-align:center"><strong>3</strong></td><td style="text-align:center">$\varnothing$</td><td style="text-align:center"><code>\varnothing</code></td><td style="text-align:center"><strong>25</strong></td><td style="text-align:center">$\Supset$</td><td style="text-align:center"><code>\Supset</code></td></tr><tr><td style="text-align:center"><strong>4</strong></td><td style="text-align:center">$\in$</td><td style="text-align:center"><code>\in</code></td><td style="text-align:center"><strong>26</strong></td><td style="text-align:center">$\sqsupset$</td><td style="text-align:center"><code>\sqsupset</code></td></tr><tr><td style="text-align:center"><strong>5</strong></td><td style="text-align:center">$\notin$</td><td style="text-align:center"><code>\notin</code></td><td style="text-align:center"><strong>27</strong></td><td style="text-align:center">$\subseteq$</td><td style="text-align:center"><code>\subseteq</code></td></tr><tr><td style="text-align:center"><strong>6</strong></td><td style="text-align:center">$\ni$</td><td style="text-align:center"><code>\ni</code></td><td style="text-align:center"><strong>28</strong></td><td style="text-align:center">$\nsubseteq$</td><td style="text-align:center"><code>\nsubseteq</code></td></tr><tr><td style="text-align:center"><strong>7</strong></td><td style="text-align:center">$\cap$</td><td style="text-align:center"><code>\cap</code></td><td style="text-align:center"><strong>29</strong></td><td style="text-align:center">$\subsetneq$</td><td style="text-align:center"><code>\subsetneq</code></td></tr><tr><td style="text-align:center"><strong>8</strong></td><td style="text-align:center">$\Cap$</td><td style="text-align:center"><code>\Cap</code></td><td style="text-align:center"><strong>30</strong></td><td style="text-align:center">$\varsubsetneq$</td><td style="text-align:center"><code>\varsubsetneq</code></td></tr><tr><td style="text-align:center"><strong>9</strong></td><td style="text-align:center">$\sqcap$</td><td style="text-align:center"><code>\sqcap</code></td><td style="text-align:center"><strong>31</strong></td><td style="text-align:center">$\sqsubseteq$</td><td style="text-align:center"><code>\sqsubseteq</code></td></tr><tr><td style="text-align:center"><strong>10</strong></td><td style="text-align:center">$\bigcap$</td><td style="text-align:center"><code>\bigcap</code></td><td style="text-align:center"><strong>32</strong></td><td style="text-align:center">$\supseteq$</td><td style="text-align:center"><code>\supseteq</code></td></tr><tr><td style="text-align:center"><strong>11</strong></td><td style="text-align:center">$\cup$</td><td style="text-align:center"><code>\cup</code></td><td style="text-align:center"><strong>33</strong></td><td style="text-align:center">$\nsupseteq$</td><td style="text-align:center"><code>\nsupseteq</code></td></tr><tr><td style="text-align:center"><strong>12</strong></td><td style="text-align:center">$\Cup$</td><td style="text-align:center"><code>\Cup</code></td><td style="text-align:center"><strong>34</strong></td><td style="text-align:center">$\supsetneq$</td><td style="text-align:center"><code>\supsetneq</code></td></tr><tr><td style="text-align:center"><strong>13</strong></td><td style="text-align:center">$\sqcup$</td><td style="text-align:center"><code>\sqcup</code></td><td style="text-align:center"><strong>35</strong></td><td style="text-align:center">$\varsupsetneq$</td><td style="text-align:center"><code>\varsupsetneq</code></td></tr><tr><td style="text-align:center"><strong>14</strong></td><td style="text-align:center">$\bigcup$</td><td style="text-align:center"><code>\bigcup</code></td><td style="text-align:center"><strong>36</strong></td><td style="text-align:center">$\sqsupseteq$</td><td style="text-align:center"><code>\sqsupseteq</code></td></tr><tr><td style="text-align:center"><strong>15</strong></td><td style="text-align:center">$\bigsqcup$</td><td style="text-align:center"><code>\bigsqcup</code></td><td style="text-align:center"><strong>37</strong></td><td style="text-align:center">$\subseteqq$</td><td style="text-align:center"><code>\subseteqq</code></td></tr><tr><td style="text-align:center"><strong>16</strong></td><td style="text-align:center">$\uplus$</td><td style="text-align:center"><code>\uplus</code></td><td style="text-align:center"><strong>38</strong></td><td style="text-align:center">$\nsubseteqq$</td><td style="text-align:center"><code>\nsubseteqq</code></td></tr><tr><td style="text-align:center"><strong>17</strong></td><td style="text-align:center">$\biguplus$</td><td style="text-align:center"><code>\biguplus</code></td><td style="text-align:center"><strong>39</strong></td><td style="text-align:center">$\subsetneqq$</td><td style="text-align:center"><code>\subsetneqq</code></td></tr><tr><td style="text-align:center"><strong>18</strong></td><td style="text-align:center">$\setminus$</td><td style="text-align:center"><code>\setminus</code></td><td style="text-align:center"><strong>40</strong></td><td style="text-align:center">$\varsubsetneqq$</td><td style="text-align:center"><code>\varsubsetneqq</code></td></tr><tr><td style="text-align:center"><strong>19</strong></td><td style="text-align:center">$\smallsetminus$</td><td style="text-align:center"><code>\smallsetminus</code></td><td style="text-align:center"><strong>41</strong></td><td style="text-align:center">$\supseteqq$</td><td style="text-align:center"><code>\supseteqq</code></td></tr><tr><td style="text-align:center"><strong>20</strong></td><td style="text-align:center">$\times$</td><td style="text-align:center"><code>\times</code></td><td style="text-align:center"><strong>42</strong></td><td style="text-align:center">$\nsupseteqq$</td><td style="text-align:center"><code>\nsupseteqq</code></td></tr><tr><td style="text-align:center"><strong>21</strong></td><td style="text-align:center">$\subset$</td><td style="text-align:center"><code>\subset</code></td><td style="text-align:center"><strong>43</strong></td><td style="text-align:center">$\supsetneqq$</td><td style="text-align:center"><code>\supsetneqq</code></td></tr><tr><td style="text-align:center"><strong>22</strong></td><td style="text-align:center">$\Subset$</td><td style="text-align:center"><code>\Subset</code></td><td style="text-align:center"><strong>44</strong></td><td style="text-align:center">$\varsupsetneqq$</td><td style="text-align:center"><code>\varsupsetneqq</code></td></tr></tbody></table></div><h2 id="箭头符号"><a href="#箭头符号" class="headerlink" title="箭头符号"></a>箭头符号</h2><div class="table-container"><table><thead><tr><th style="text-align:center">序号</th><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th><th style="text-align:center">序号</th><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th></tr></thead><tbody><tr><td style="text-align:center"><strong>1</strong></td><td style="text-align:center">⇛</td><td style="text-align:center"><code>\Rrightarrow</code></td><td style="text-align:center"><strong>36</strong></td><td style="text-align:center">⟼</td><td style="text-align:center"><code>\longmapsto</code></td></tr><tr><td style="text-align:center"><strong>2</strong></td><td style="text-align:center">⇚</td><td style="text-align:center"><code>\Lleftarrow</code></td><td style="text-align:center"><strong>37</strong></td><td style="text-align:center">⇀</td><td style="text-align:center"><code>\rightharpoonup</code></td></tr><tr><td style="text-align:center"><strong>3</strong></td><td style="text-align:center">⇒</td><td style="text-align:center"><code>\Rightarrow</code></td><td style="text-align:center"><strong>38</strong></td><td style="text-align:center">⇁</td><td style="text-align:center"><code>\rightharpoondown</code></td></tr><tr><td style="text-align:center"><strong>4</strong></td><td style="text-align:center">⇏</td><td style="text-align:center"><code>\nRightarrow</code></td><td style="text-align:center"><strong>39</strong></td><td style="text-align:center">↼</td><td style="text-align:center"><code>\leftharpoonup</code></td></tr><tr><td style="text-align:center"><strong>5</strong></td><td style="text-align:center">⟹</td><td style="text-align:center"><code>\Longrightarrow</code></td><td style="text-align:center"><strong>40</strong></td><td style="text-align:center">↽</td><td style="text-align:center"><code>\leftharpoondown</code></td></tr><tr><td style="text-align:center"><strong>6</strong></td><td style="text-align:center">⟹</td><td style="text-align:center"><code>\implies</code></td><td style="text-align:center"><strong>41</strong></td><td style="text-align:center">↿</td><td style="text-align:center"><code>\upharpoonleft</code></td></tr><tr><td style="text-align:center"><strong>7</strong></td><td style="text-align:center">⇐</td><td style="text-align:center"><code>\Leftarrow</code></td><td style="text-align:center"><strong>42</strong></td><td style="text-align:center">↾</td><td style="text-align:center"><code>\upharpoonright</code></td></tr><tr><td style="text-align:center"><strong>8</strong></td><td style="text-align:center">⇍</td><td style="text-align:center"><code>\nLeftarrow</code></td><td style="text-align:center"><strong>43</strong></td><td style="text-align:center">⇃</td><td style="text-align:center"><code>\downharpoonleft</code></td></tr><tr><td style="text-align:center"><strong>9</strong></td><td style="text-align:center">⟸</td><td style="text-align:center"><code>\Longleftarrow</code></td><td style="text-align:center"><strong>44</strong></td><td style="text-align:center">⇂</td><td style="text-align:center"><code>\downharpoonright</code></td></tr><tr><td style="text-align:center"><strong>10</strong></td><td style="text-align:center">⇔</td><td style="text-align:center"><code>\Leftrightarrow</code></td><td style="text-align:center"><strong>45</strong></td><td style="text-align:center">⇌</td><td style="text-align:center"><code>\rightleftharpoons</code></td></tr><tr><td style="text-align:center"><strong>11</strong></td><td style="text-align:center">⇎</td><td style="text-align:center"><code>\nLeftrightarrow</code></td><td style="text-align:center"><strong>46</strong></td><td style="text-align:center">⇋</td><td style="text-align:center"><code>\leftrightharpoons</code></td></tr><tr><td style="text-align:center"><strong>12</strong></td><td style="text-align:center">⟺</td><td style="text-align:center"><code>\Longleftrightarrow</code></td><td style="text-align:center"><strong>47</strong></td><td style="text-align:center">↶</td><td style="text-align:center"><code>\curvearrowleft</code></td></tr><tr><td style="text-align:center"><strong>13</strong></td><td style="text-align:center">⟺</td><td style="text-align:center"><code>\iff</code></td><td style="text-align:center"><strong>48</strong></td><td style="text-align:center">↺</td><td style="text-align:center"><code>\circlearrowleft</code></td></tr><tr><td style="text-align:center"><strong>14</strong></td><td style="text-align:center">⇑</td><td style="text-align:center"><code>\Uparrow</code></td><td style="text-align:center"><strong>49</strong></td><td style="text-align:center">↰</td><td style="text-align:center"><code>\Lsh</code></td></tr><tr><td style="text-align:center"><strong>15</strong></td><td style="text-align:center">⇓</td><td style="text-align:center"><code>\Downarrow</code></td><td style="text-align:center"><strong>50</strong></td><td style="text-align:center">⇈</td><td style="text-align:center"><code>\upuparrows</code></td></tr><tr><td style="text-align:center"><strong>16</strong></td><td style="text-align:center">⇕</td><td style="text-align:center"><code>\Updownarrow</code></td><td style="text-align:center"><strong>51</strong></td><td style="text-align:center">⇉</td><td style="text-align:center"><code>\rightrightarrows</code></td></tr><tr><td style="text-align:center"><strong>17</strong></td><td style="text-align:center">→</td><td style="text-align:center"><code>\rightarrow</code></td><td style="text-align:center"><strong>52</strong></td><td style="text-align:center">⇄</td><td style="text-align:center"><code>\rightleftarrows</code></td></tr><tr><td style="text-align:center"><strong>18</strong></td><td style="text-align:center">→</td><td style="text-align:center"><code>\to</code></td><td style="text-align:center"><strong>53</strong></td><td style="text-align:center">↣</td><td style="text-align:center"><code>\rightarrowtail</code></td></tr><tr><td style="text-align:center"><strong>19</strong></td><td style="text-align:center">$\nrightarrow$</td><td style="text-align:center"><code>\nrightarrow</code></td><td style="text-align:center"><strong>54</strong></td><td style="text-align:center">↬</td><td style="text-align:center"><code>\looparrowright</code></td></tr><tr><td style="text-align:center"><strong>20</strong></td><td style="text-align:center">⟶</td><td style="text-align:center"><code>\longrightarrow</code></td><td style="text-align:center"><strong>55</strong></td><td style="text-align:center">↷</td><td style="text-align:center"><code>\curvearrowright</code></td></tr><tr><td style="text-align:center"><strong>21</strong></td><td style="text-align:center">←</td><td style="text-align:center"><code>\leftarrow</code></td><td style="text-align:center"><strong>56</strong></td><td style="text-align:center">↻</td><td style="text-align:center"><code>\circlearrowright</code></td></tr><tr><td style="text-align:center"><strong>22</strong></td><td style="text-align:center">←</td><td style="text-align:center"><code>\gets</code></td><td style="text-align:center"><strong>57</strong></td><td style="text-align:center">↱</td><td style="text-align:center"><code>\Rsh</code></td></tr><tr><td style="text-align:center"><strong>23</strong></td><td style="text-align:center">$\nleftarrow$</td><td style="text-align:center"><code>\nleftarrow</code></td><td style="text-align:center"><strong>58</strong></td><td style="text-align:center">⇊</td><td style="text-align:center"><code>\downdownarrows</code></td></tr><tr><td style="text-align:center"><strong>24</strong></td><td style="text-align:center">⟵</td><td style="text-align:center"><code>\longleftarrow</code></td><td style="text-align:center"><strong>59</strong></td><td style="text-align:center">⇇</td><td style="text-align:center"><code>\leftleftarrows</code></td></tr><tr><td style="text-align:center"><strong>25</strong></td><td style="text-align:center">↔</td><td style="text-align:center"><code>\leftrightarrow</code></td><td style="text-align:center"><strong>60</strong></td><td style="text-align:center">⇆</td><td style="text-align:center"><code>\leftrightarrows</code></td></tr><tr><td style="text-align:center"><strong>26</strong></td><td style="text-align:center">$\nleftrightarrow$</td><td style="text-align:center"><code>\nleftrightarrow</code></td><td style="text-align:center"><strong>61</strong></td><td style="text-align:center">↢</td><td style="text-align:center"><code>\leftarrowtail</code></td></tr><tr><td style="text-align:center"><strong>27</strong></td><td style="text-align:center">⟷</td><td style="text-align:center"><code>\longleftrightarrow</code></td><td style="text-align:center"><strong>62</strong></td><td style="text-align:center">↫</td><td style="text-align:center"><code>\looparrowleft</code></td></tr><tr><td style="text-align:center"><strong>28</strong></td><td style="text-align:center">↑</td><td style="text-align:center"><code>\uparrow</code></td><td style="text-align:center"><strong>63</strong></td><td style="text-align:center">$\hookrightarrow$</td><td style="text-align:center"><code>\hookrightarrow</code></td></tr><tr><td style="text-align:center"><strong>29</strong></td><td style="text-align:center">↓</td><td style="text-align:center"><code>\downarrow</code></td><td style="text-align:center"><strong>64</strong></td><td style="text-align:center">$\hookleftarrow$</td><td style="text-align:center"><code>\hookleftarrow</code></td></tr><tr><td style="text-align:center"><strong>30</strong></td><td style="text-align:center">↕</td><td style="text-align:center"><code>\updownarrow</code></td><td style="text-align:center"><strong>65</strong></td><td style="text-align:center">⊸</td><td style="text-align:center"><code>\multimap</code></td></tr><tr><td style="text-align:center"><strong>31</strong></td><td style="text-align:center">$\nearrow$</td><td style="text-align:center"><code>\nearrow</code></td><td style="text-align:center"><strong>66</strong></td><td style="text-align:center">$\leftrightsquigarrow$</td><td style="text-align:center"><code>\leftrightsquigarrow</code></td></tr><tr><td style="text-align:center"><strong>32</strong></td><td style="text-align:center">$\swarrow$</td><td style="text-align:center"><code>\swarrow</code></td><td style="text-align:center"><strong>67</strong></td><td style="text-align:center">$\rightsquigarrow$</td><td style="text-align:center"><code>\rightsquigarrow</code></td></tr><tr><td style="text-align:center"><strong>33</strong></td><td style="text-align:center">$\nwarrow$</td><td style="text-align:center"><code>\nwarrow</code></td><td style="text-align:center"><strong>68</strong></td><td style="text-align:center">$\twoheadrightarrow$</td><td style="text-align:center"><code>\twoheadrightarrow</code></td></tr><tr><td style="text-align:center"><strong>34</strong></td><td style="text-align:center">$\searrow$</td><td style="text-align:center"><code>\searrow</code></td><td style="text-align:center"><strong>69</strong></td><td style="text-align:center">$\twoheadleftarrow$</td><td style="text-align:center"><code>\twoheadleftarrow</code></td></tr><tr><td style="text-align:center"><strong>35</strong></td><td style="text-align:center">↦</td><td style="text-align:center"><code>\mapsto</code></td><td style="text-align:center"></td><td style="text-align:center"></td></tr></tbody></table></div><h2 id="特殊符号"><a href="#特殊符号" class="headerlink" title="特殊符号"></a>特殊符号</h2><div class="table-container"><table><thead><tr><th style="text-align:center">序号</th><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th><th style="text-align:center">序号</th><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th></tr></thead><tbody><tr><td style="text-align:center"><strong>1</strong></td><td style="text-align:center">$\infty$</td><td style="text-align:center"><code>\infty</code></td><td style="text-align:center"><strong>33</strong></td><td style="text-align:center">$\flat$</td><td style="text-align:center"><code>\flat</code></td></tr><tr><td style="text-align:center"><strong>2</strong></td><td style="text-align:center">$\aleph$</td><td style="text-align:center"><code>\aleph</code></td><td style="text-align:center"><strong>34</strong></td><td style="text-align:center">$\natural$</td><td style="text-align:center"><code>\natural</code></td></tr><tr><td style="text-align:center"><strong>3</strong></td><td style="text-align:center">$\complement$</td><td style="text-align:center"><code>\complement</code></td><td style="text-align:center"><strong>35</strong></td><td style="text-align:center">$\sharp$</td><td style="text-align:center"><code>\sharp</code></td></tr><tr><td style="text-align:center"><strong>4</strong></td><td style="text-align:center">$\backepsilon$</td><td style="text-align:center"><code>\backepsilon</code></td><td style="text-align:center"><strong>36</strong></td><td style="text-align:center">$\diagup$</td><td style="text-align:center"><code>\diagup</code></td></tr><tr><td style="text-align:center"><strong>5</strong></td><td style="text-align:center">$\eth$</td><td style="text-align:center"><code>\eth</code></td><td style="text-align:center"><strong>37</strong></td><td style="text-align:center">$\diagdown$</td><td style="text-align:center"><code>\diagdown</code></td></tr><tr><td style="text-align:center"><strong>6</strong></td><td style="text-align:center">$\Finv$</td><td style="text-align:center"><code>\Finv</code></td><td style="text-align:center"><strong>38</strong></td><td style="text-align:center">$\centerdot$</td><td style="text-align:center"><code>\centerdot</code></td></tr><tr><td style="text-align:center"><strong>7</strong></td><td style="text-align:center">$\hbar$</td><td style="text-align:center"><code>\hbar</code></td><td style="text-align:center"><strong>39</strong></td><td style="text-align:center">$\ltimes$</td><td style="text-align:center"><code>\ltimes</code></td></tr><tr><td style="text-align:center"><strong>8</strong></td><td style="text-align:center">$\Im$</td><td style="text-align:center"><code>\Im</code></td><td style="text-align:center"><strong>40</strong></td><td style="text-align:center">$\rtimes$</td><td style="text-align:center"><code>\rtimes</code></td></tr><tr><td style="text-align:center"><strong>9</strong></td><td style="text-align:center">$\imath$</td><td style="text-align:center"><code>\imath</code></td><td style="text-align:center"><strong>41</strong></td><td style="text-align:center">$\leftthreetimes$</td><td style="text-align:center"><code>\leftthreetimes</code></td></tr><tr><td style="text-align:center"><strong>10</strong></td><td style="text-align:center">$\jmath$</td><td style="text-align:center"><code>\jmath</code></td><td style="text-align:center"><strong>42</strong></td><td style="text-align:center">$\rightthreetimes$</td><td style="text-align:center"><code>\rightthreetimes</code></td></tr><tr><td style="text-align:center"><strong>11</strong></td><td style="text-align:center">$\Bbbk$</td><td style="text-align:center"><code>\Bbbk</code></td><td style="text-align:center"><strong>43</strong></td><td style="text-align:center">$\eqcirc$</td><td style="text-align:center"><code>\eqcirc</code></td></tr><tr><td style="text-align:center"><strong>12</strong></td><td style="text-align:center">$\ell$</td><td style="text-align:center"><code>\ell</code></td><td style="text-align:center"><strong>44</strong></td><td style="text-align:center">$\circeq$</td><td style="text-align:center"><code>\circeq</code></td></tr><tr><td style="text-align:center"><strong>13</strong></td><td style="text-align:center">$\mho$</td><td style="text-align:center"><code>\mho</code></td><td style="text-align:center"><strong>45</strong></td><td style="text-align:center">$\triangleq$</td><td style="text-align:center"><code>\triangleq</code></td></tr><tr><td style="text-align:center"><strong>14</strong></td><td style="text-align:center">$\wp$</td><td style="text-align:center"><code>\wp</code></td><td style="text-align:center"><strong>46</strong></td><td style="text-align:center">$\bumpeq$</td><td style="text-align:center"><code>\bumpeq</code></td></tr><tr><td style="text-align:center"><strong>15</strong></td><td style="text-align:center">$\Re$</td><td style="text-align:center"><code>\Re</code></td><td style="text-align:center"><strong>47</strong></td><td style="text-align:center">$\Bumpeq$</td><td style="text-align:center"><code>\Bumpeq</code></td></tr><tr><td style="text-align:center"><strong>16</strong></td><td style="text-align:center">$\circledS$</td><td style="text-align:center"><code>\circledS</code></td><td style="text-align:center"><strong>48</strong></td><td style="text-align:center">$\doteqdot$</td><td style="text-align:center"><code>\doteqdot</code></td></tr><tr><td style="text-align:center"><strong>17</strong></td><td style="text-align:center">$\amalg$</td><td style="text-align:center"><code>\amalg</code></td><td style="text-align:center"><strong>49</strong></td><td style="text-align:center">$\risingdotseq$</td><td style="text-align:center"><code>\risingdotseq</code></td></tr><tr><td style="text-align:center"><strong>18</strong></td><td style="text-align:center">$\%$</td><td style="text-align:center"><code>\%</code></td><td style="text-align:center"><strong>50</strong></td><td style="text-align:center">≒</td><td style="text-align:center"><code>\fallingdotseq</code></td></tr><tr><td style="text-align:center"><strong>19</strong></td><td style="text-align:center">$\dagger$</td><td style="text-align:center"><code>\dagger</code></td><td style="text-align:center"><strong>51</strong></td><td style="text-align:center">$\intercal$</td><td style="text-align:center"><code>\intercal</code></td></tr><tr><td style="text-align:center"><strong>20</strong></td><td style="text-align:center">$\ddagger$</td><td style="text-align:center"><code>\ddagger</code></td><td style="text-align:center"><strong>52</strong></td><td style="text-align:center">$\barwedge$</td><td style="text-align:center"><code>\barwedge</code></td></tr><tr><td style="text-align:center"><strong>21</strong></td><td style="text-align:center">$\ldots$</td><td style="text-align:center"><code>\ldots</code></td><td style="text-align:center"><strong>53</strong></td><td style="text-align:center">$\veebar$</td><td style="text-align:center"><code>\veebar</code></td></tr><tr><td style="text-align:center"><strong>22</strong></td><td style="text-align:center">$\cdots$</td><td style="text-align:center"><code>\cdots</code></td><td style="text-align:center"><strong>54</strong></td><td style="text-align:center">$\doublebarwedge$</td><td style="text-align:center"><code>\doublebarwedge</code></td></tr><tr><td style="text-align:center"><strong>23</strong></td><td style="text-align:center">$\smile$</td><td style="text-align:center"><code>\smile</code></td><td style="text-align:center"><strong>55</strong></td><td style="text-align:center">$\between$</td><td style="text-align:center"><code>\between</code></td></tr><tr><td style="text-align:center"><strong>24</strong></td><td style="text-align:center">$\frown$</td><td style="text-align:center"><code>\frown</code></td><td style="text-align:center"><strong>56</strong></td><td style="text-align:center">$\pitchfork$</td><td style="text-align:center"><code>\pitchfork</code></td></tr><tr><td style="text-align:center"><strong>25</strong></td><td style="text-align:center">$\wr$</td><td style="text-align:center"><code>\wr</code></td><td style="text-align:center"><strong>57</strong></td><td style="text-align:center">$\vartriangleleft$</td><td style="text-align:center"><code>\vartriangleleft</code></td></tr><tr><td style="text-align:center"><strong>26</strong></td><td style="text-align:center">$\triangleleft$</td><td style="text-align:center"><code>\triangleleft</code></td><td style="text-align:center"><strong>58</strong></td><td style="text-align:center">$\ntriangleleft$</td><td style="text-align:center"><code>\ntriangleleft</code></td></tr><tr><td style="text-align:center"><strong>27</strong></td><td style="text-align:center">$\triangleright$</td><td style="text-align:center"><code>\triangleright</code></td><td style="text-align:center"><strong>59</strong></td><td style="text-align:center">$\vartriangleright$</td><td style="text-align:center"><code>\vartriangleright</code></td></tr><tr><td style="text-align:center"><strong>28</strong></td><td style="text-align:center">$\diamondsuit$</td><td style="text-align:center"><code>\diamondsuit</code></td><td style="text-align:center"><strong>60</strong></td><td style="text-align:center">$\ntriangleright$</td><td style="text-align:center"><code>\ntriangleright</code></td></tr><tr><td style="text-align:center"><strong>29</strong></td><td style="text-align:center">$\heartsuit$</td><td style="text-align:center"><code>\heartsuit</code></td><td style="text-align:center"><strong>61</strong></td><td style="text-align:center">$\trianglelefteq$</td><td style="text-align:center"><code>\trianglelefteq</code></td></tr><tr><td style="text-align:center"><strong>30</strong></td><td style="text-align:center">$\clubsuit$</td><td style="text-align:center"><code>\clubsuit</code></td><td style="text-align:center"><strong>62</strong></td><td style="text-align:center">$\ntrianglerighteq$</td><td style="text-align:center"><code>\ntrianglelefteq</code></td></tr><tr><td style="text-align:center"><strong>31</strong></td><td style="text-align:center">$\spadesuit$</td><td style="text-align:center"><code>\spadesuit</code></td><td style="text-align:center"><strong>63</strong></td><td style="text-align:center">$\trianglerighteq$</td><td style="text-align:center"><code>\trianglerighteq</code></td></tr><tr><td style="text-align:center"><strong>32</strong></td><td style="text-align:center">$\Game$</td><td style="text-align:center"><code>\Game</code></td><td style="text-align:center"><strong>64</strong></td><td style="text-align:center">$\ntrianglerighteq$</td><td style="text-align:center"><code>\ntrianglerighteq</code></td></tr></tbody></table></div><h2 id="分数"><a href="#分数" class="headerlink" title="分数"></a>分数</h2><div class="table-container"><table><thead><tr><th style="text-align:left">类型</th><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left"><strong>分数</strong></td><td style="text-align:left">$\frac{2}{4}x=0.5x$</td><td style="text-align:left"><code>\frac&#123;2&#125;&#123;4&#125;x=0.5x or &#123;2 \over 4&#125;x=0.5x</code></td></tr><tr><td style="text-align:left"><strong>小型分数</strong></td><td style="text-align:left">$\tfrac{2}{4}x=0.5x$</td><td style="text-align:left"><code>\tfrac&#123;2&#125;&#123;4&#125;x = 0.5x</code></td></tr><tr><td style="text-align:left"><strong>大型分数</strong> （不嵌套）</td><td style="text-align:left">$\dfrac{2}{4}=0.5$</td><td style="text-align:left"><code>\dfrac&#123;2&#125;&#123;4&#125; = 0.5</code></td></tr><tr><td style="text-align:left"><strong>大型分数</strong> （嵌套）</td><td style="text-align:left">$\dfrac{2}{c+\dfrac{2}{d + \dfrac{2}{4}}}=a$</td><td style="text-align:left"><code>\cfrac&#123;2&#125;&#123;c + \cfrac&#123;2&#125;&#123;d + \cfrac&#123;2&#125;&#123;4&#125;&#125;&#125; = a</code></td></tr></tbody></table></div><h2 id="数值函数"><a href="#数值函数" class="headerlink" title="数值函数"></a>数值函数</h2><div class="table-container"><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left">$\exp_a b=a^b,\exp b = e^b,10^m$</td><td style="text-align:left"><code>\exp_a b = a^b, \exp b = e^b, 10^m</code></td></tr><tr><td style="text-align:left">$\ln c,\lg d=\log e,\log_{10} f$</td><td style="text-align:left"><code>\ln c, \lg d = \log e, \log_&#123;10&#125; f</code></td></tr><tr><td style="text-align:left">$\sin a,\cos b,\tan c,\cot d,\sec e,\csc f$</td><td style="text-align:left"><code>\sin a, \cos b, \tan c, \cot d, \sec e, \csc f</code></td></tr><tr><td style="text-align:left">$\arcsin a,\arccos b,\arctan c$</td><td style="text-align:left"><code>\arcsin a, \arccos b, \arctan c</code></td></tr><tr><td style="text-align:left">$\operatorname{arccot} d,\operatorname{arcsec} e,\operatorname{arccsc} f$</td><td style="text-align:left"><code>\operatorname&#123;arccot&#125; d, \operatorname&#123;arcsec&#125; e, \operatorname&#123;arccsc&#125; f</code></td></tr><tr><td style="text-align:left">$\sinh a,\cosh b,\tanh c,\coth d$</td><td style="text-align:left"><code>\sinh a, \cosh b, \tanh c, \coth d</code></td></tr><tr><td style="text-align:left">$\operatorname{sh}k,\operatorname{ch}l,\operatorname{th}m,\operatorname{coth}n$</td><td style="text-align:left"><code>\operatorname&#123;sh&#125;k, \operatorname&#123;ch&#125;l, \operatorname&#123;th&#125;m, \operatorname&#123;coth&#125;n</code></td></tr><tr><td style="text-align:left">$\operatorname{argsh}o,\operatorname{argch}p,\operatorname{argth}q$</td><td style="text-align:left"><code>\operatorname&#123;argsh&#125;o, \operatorname&#123;argch&#125;p, \operatorname&#123;argth&#125;q</code></td></tr><tr><td style="text-align:left">$\operatorname{sgn}r,\left\vert s \right\vert$</td><td style="text-align:left"><code>\operatorname&#123;sgn&#125;r, \left\vert s \right\vert</code></td></tr><tr><td style="text-align:left">$\min(x,y),\max(x,y)$</td><td style="text-align:left"><code>\min(x,y), \max(x,y)</code></td></tr></tbody></table></div><p>如果需要使用特殊的函数符号，那么可以采用 <code>\operatorname&#123;&#125;</code> 命令进行自定义：</p><div class="table-container"><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left">$\operatorname{mydefine}x$</td><td style="text-align:left"><code>\operatorname&#123;mydefine&#125;x</code></td></tr></tbody></table></div><h2 id="根式"><a href="#根式" class="headerlink" title="根式"></a>根式</h2><div class="table-container"><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left">$\surd$</td><td style="text-align:left"><code>\surd</code></td><td style="text-align:left">$\sqrt[n]{\pi}$</td><td style="text-align:left"><code>\sqrt[n]&#123;\pi&#125;</code></td></tr><tr><td style="text-align:left">$\sqrt{\pi}$</td><td style="text-align:left"><code>\sqrt&#123;\pi&#125;</code></td><td style="text-align:left">$\sqrt[3]{\frac{x^3+y^3}{2}}$</td><td style="text-align:left"><code>\sqrt[3]&#123;\frac&#123;x^3+y^3&#125;&#123;2&#125;&#125;</code></td></tr></tbody></table></div><h2 id="微分与导数"><a href="#微分与导数" class="headerlink" title="微分与导数"></a>微分与导数</h2><div class="table-container"><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left">$dt,\mathrm{d}t,\partial t.\nabla \psi$</td><td style="text-align:left"><code>dt, \mathrm&#123;d&#125;t, \partial t, \nabla\psi</code></td></tr><tr><td style="text-align:left">$dy/dx,\mathrm{d}y/\mathrm{d}x,\frac{dy}{dx},\frac{\mathrm{d}y}{\mathrm{d}x},\frac{\partial^2}{\partial x_1\partial x_2}y$</td><td style="text-align:left"><code>dy/dx, \mathrm&#123;d&#125;y/\mathrm&#123;d&#125;x, \frac&#123;dy&#125;&#123;dx&#125;, \frac&#123;\mathrm&#123;d&#125;y&#125;&#123;\mathrm&#123;d&#125;x&#125;, \frac&#123;\partial^2&#125;&#123;\partial x_1\partial x_2&#125;y</code></td></tr><tr><td style="text-align:left">$\prime,\backprime,f^\prime,f’,f’’,f^{3},\dot y,\ddot y$</td><td style="text-align:left"><code>\prime, \backprime, f^\prime, f&#39;, f&#39;&#39;, f^&#123;(3)&#125;, \dot y, \ddot y</code></td></tr></tbody></table></div><h2 id="模运算"><a href="#模运算" class="headerlink" title="模运算"></a>模运算</h2><div class="table-container"><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left">$s_k \equiv 0 \pmod{m}$</td><td style="text-align:left"><code>s_k \equiv 0 \pmod&#123;m&#125;</code></td></tr><tr><td style="text-align:left">$a \bmod b$</td><td style="text-align:left"><code>a \bmod b</code></td></tr><tr><td style="text-align:left">$\gcd(m,n),\operatorname{lcm}(m,n)$</td><td style="text-align:left"><code>\gcd(m, n), \operatorname&#123;lcm&#125;(m, n)</code></td></tr><tr><td style="text-align:left">$\mid,\nmid,\shortmid,\nshortmid$</td><td style="text-align:left"><code>\mid, \nmid, \shortmid, \nshortmid</code></td></tr></tbody></table></div><h2 id="极限"><a href="#极限" class="headerlink" title="极限"></a>极限</h2><div class="table-container"><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left">$\lim\limits_{n \to \infty}x_n$</td><td style="text-align:left"><code>\lim\limits_&#123;n \to \infty&#125;x_n</code></td></tr><tr><td style="text-align:left">$\textstyle \lim\limits_{n \to \infty}x_n$</td><td style="text-align:left"><code>\textstyle \lim\limits_&#123;n \to \infty&#125;x_n</code></td></tr></tbody></table></div><h2 id="范围与预测"><a href="#范围与预测" class="headerlink" title="范围与预测"></a>范围与预测</h2><div class="table-container"><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left">$\min x,\max y,\inf s,\sup t$</td><td style="text-align:left"><code>\min x, \max y, \inf s, \sup t</code></td></tr><tr><td style="text-align:left">$\lim u,\liminf v,\limsup w$</td><td style="text-align:left"><code>\lim u, \liminf v, \limsup w</code></td></tr><tr><td style="text-align:left">$\dim p,\deg q,\det m.\ker\phi$</td><td style="text-align:left"><code>\dim p, \deg q, \det m, \ker\phi</code></td></tr><tr><td style="text-align:left">$\Pr j,\hom l,\lVert z\rVert,\arg z$</td><td style="text-align:left"><code>\Pr j, \hom l, \lVert z \rVert, \arg z</code></td></tr></tbody></table></div><h2 id="积分"><a href="#积分" class="headerlink" title="积分"></a>积分</h2><div class="table-container"><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left">$\int\limits_{1}^{3}\frac{e^3/x}{x^2}\,dx$</td><td style="text-align:left"><code>\int\limits_&#123;1&#125;^&#123;3&#125;\frac&#123;e^3/x&#125;&#123;x^2&#125;\, dx</code></td></tr><tr><td style="text-align:left">$\int_{1}^{3}\frac{e^3/x}{x^2}\,dx$</td><td style="text-align:left"><code>\int_&#123;1&#125;^&#123;3&#125;\frac&#123;e^3/x&#125;&#123;x^2&#125;\, dx</code></td></tr><tr><td style="text-align:left">$\textstyle \int\limits_{-N}^{N} e^x dx$</td><td style="text-align:left"><code>\textstyle \int\limits_&#123;-N&#125;^&#123;N&#125; e^x dx</code></td></tr><tr><td style="text-align:left">$\textstyle \int_{-N}^{N} e^x dx$</td><td style="text-align:left"><code>\textstyle \int_&#123;-N&#125;^&#123;N&#125; e^x dx</code></td></tr><tr><td style="text-align:left">$\iint\limits_D dx\,dy$</td><td style="text-align:left"><code>\iint\limits_D dx\,dy</code></td></tr><tr><td style="text-align:left">$\iiint\limits_\Omega dx\,dy\,dz$</td><td style="text-align:left"><code>\iiint\limits_\Omega dx\,dy\,dz</code></td></tr><tr><td style="text-align:left">$\iiiint\limits_F dx\,dy\,dz\,dt$</td><td style="text-align:left"><code>\iiiint\limits_F dx\,dy\,dz\,dt</code></td></tr><tr><td style="text-align:left">$\int_{(x,y)\in C} x^3\,dx + 4y^2\,dy$</td><td style="text-align:left"><code>\int_&#123;(x,y)\in C&#125; x^3\, dx + 4y^2\, dy</code></td></tr><tr><td style="text-align:left">$\oint_{(x,y)\in C}x^3\,dx+4y^2\,dy$</td><td style="text-align:left"><code>\oint_&#123;(x,y)\in C&#125; x^3\, dx + 4y^2\, dy</code></td></tr></tbody></table></div><blockquote><p><strong>注意</strong>：积分符号采用 <code>\int\_&#123;&#125;^&#123;&#125;</code> 命令调用，双重积分符号采用 <code>\iint\_&#123;&#125;^&#123;&#125;</code>，以此类推，最高可以支持四重积分。</p><p>曲线积分可以使用 <code>\oint</code> 命令调用，但是 MathJax 并不支持该语法，因此在开启了 Unicode 扩展的前提下，可以改为采用 <code>\unicode&#123;&#125;</code> 命令调用：</p></blockquote><div class="table-container"><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">$\unicode{8751} \unicode{x222f}_c$</td><td style="text-align:left"><code>\unicode&#123;8751&#125; \unicode&#123;x222F&#125;_C</code></td><td style="text-align:left">曲面积分符号的 Unicode 码十进制为 <code>8751</code>,十六进制为 <code>x222F</code>；</td></tr><tr><td style="text-align:left">$\unicode{8752} \unicode{x2230}_C$</td><td style="text-align:left"><code>\unicode&#123;8752&#125; \unicode&#123;x2230&#125;_C</code></td><td style="text-align:left">三维曲面积分符号的 Unicode 码十进制为 <code>8752</code>,十六进制为 <code>x2230</code>；</td></tr><tr><td style="text-align:left">$\unicode{8753} \unicode{x2231}_c \unicode{8754} \unicode{x2232}_c \unicode{8755} \unicode{x2233}_c$</td><td style="text-align:left"><code>\unicode&#123;8753&#125; \unicode&#123;x2231&#125;_c \unicode&#123;8754&#125; \unicode&#123;x2232&#125;_c \unicode&#123;8755&#125; \unicode&#123;x2233&#125;_c</code></td><td style="text-align:left">其它积分符号；</td></tr></tbody></table></div><h2 id="大型运算符"><a href="#大型运算符" class="headerlink" title="大型运算符"></a>大型运算符</h2><div class="table-container"><table><thead><tr><th style="text-align:left">分类</th><th style="text-align:center">符号</th><th style="text-align:left">LaTeX</th><th style="text-align:center">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left"><strong>求和</strong></td><td style="text-align:center">$\sum_{a}^{b}$</td><td style="text-align:left"><code>\sum_&#123;a&#125;^&#123;b&#125;</code></td><td style="text-align:center">$\textstyle \sum_{a}^{b}$</td><td style="text-align:left"><code>\textstyle \sum_&#123;a&#125;^&#123;b&#125;</code></td></tr><tr><td style="text-align:left"><strong>连乘积</strong></td><td style="text-align:center">$\prod_{a}^{b}$</td><td style="text-align:left"><code>\prod_&#123;a&#125;^&#123;b&#125;</code></td><td style="text-align:center">$\textstyle \prod_{a}^{b}$</td><td style="text-align:left"><code>\textstyle \prod_&#123;a&#125;^&#123;b&#125;</code></td></tr><tr><td style="text-align:left"><strong>余积</strong></td><td style="text-align:center">$\coprod_{a}^{b}$</td><td style="text-align:left"><code>\coprod_&#123;a&#125;^&#123;b&#125;</code></td><td style="text-align:center">$\textstyle \coprod_{a}^{b}$</td><td style="text-align:left"><code>\textstyle \coprod_&#123;a&#125;^&#123;b&#125;</code></td></tr><tr><td style="text-align:left"><strong>并集</strong></td><td style="text-align:center">$\bigcup_{a}^{b}$</td><td style="text-align:left"><code>\bigcup_&#123;a&#125;^&#123;b&#125;</code></td><td style="text-align:center">$\textstyle \bigcup_{a}^{b}$</td><td style="text-align:left"><code>\textstyle \bigcup_&#123;a&#125;^&#123;b&#125;</code></td></tr><tr><td style="text-align:left"><strong>交集</strong></td><td style="text-align:center">$\bigcap_{a}^{b}$</td><td style="text-align:left"><code>\bigcap_&#123;a&#125;^&#123;b&#125;</code></td><td style="text-align:center">$\textstyle \bigcap_{a}^{b}$</td><td style="text-align:left"><code>\textstyle \bigcap_&#123;a&#125;^&#123;b&#125;</code></td></tr><tr><td style="text-align:left"><strong>析取</strong></td><td style="text-align:center">$\bigvee_{a}^{b}$</td><td style="text-align:left"><code>\bigvee_&#123;a&#125;^&#123;b&#125;</code></td><td style="text-align:center">$\textstyle \bigvee_{a}^{b}$</td><td style="text-align:left"><code>\textstyle \bigvee_&#123;a&#125;^&#123;b&#125;</code></td></tr><tr><td style="text-align:left"><strong>合取</strong></td><td style="text-align:center">$\bigwedge_{a}^{b}$</td><td style="text-align:left"><code>\bigwedge_&#123;a&#125;^&#123;b&#125;</code></td><td style="text-align:center">$\textstyle \bigwedge_{a}^{b}$</td><td style="text-align:left"><code>\textstyle \bigwedge_&#123;a&#125;^&#123;b&#125;</code></td></tr></tbody></table></div><h2 id="上下标"><a href="#上下标" class="headerlink" title="上下标"></a>上下标</h2><div class="table-container"><table><thead><tr><th style="text-align:center">类型</th><th style="text-align:center">符号</th><th style="text-align:left">代码</th></tr></thead><tbody><tr><td style="text-align:center"><strong>上标</strong></td><td style="text-align:center">$a^2,a^{x+3}$</td><td style="text-align:left"><code>a^2</code> <code>a^&#123;x+3&#125;</code></td></tr><tr><td style="text-align:center"><strong>下标</strong></td><td style="text-align:center">$a_2$</td><td style="text-align:left"><code>a_2</code></td></tr><tr><td style="text-align:center"><strong>组合</strong></td><td style="text-align:center">$10^{30}a^{2+2}\\a_{ij}\\b{f’}$</td><td style="text-align:left"><code>10^&#123;30&#125;a^&#123;2+2&#125;</code> <br/><code>a_&#123;i,j&#125;</code><br/><code>b&#123;f&#39;&#125;</code></td></tr><tr><td style="text-align:center"><strong>上下标混合</strong></td><td style="text-align:center">$x_2^3\\{x_2}^3$</td><td style="text-align:left"><code>x_2^3</code><br/> <code>&#123;x_2&#125;^3</code></td></tr><tr><td style="text-align:center"><strong>上标的上标</strong></td><td style="text-align:center">$10^{10^8}$</td><td style="text-align:left"><code>10^&#123;10^&#123;8&#125;&#125;</code></td></tr><tr><td style="text-align:center"><strong>混合标识</strong></td><td style="text-align:center">$1^2X3{^4}_a^b\\{}_1^2!\Omega_3^4$</td><td style="text-align:left"><code>\sideset&#123;1^2&#125;&#123;3^4&#125;X_a^b</code> <code>&#123;&#125;_1^2!\Omega_3^4</code></td></tr><tr><td style="text-align:center"><strong>顶标底标</strong></td><td style="text-align:center">$\overset{\alpha}{\omega}\\\underset{\alpha}{\omega}\\\overset{\alpha}{\underset{\gamma}{\omega}}\\\stackrel{\alpha}{\omega}$</td><td style="text-align:left"><code>\overset&#123;\alpha&#125;&#123;\omega&#125;</code> <br/><code>\underset&#123;\alpha&#125;&#123;\omega&#125;</code> <br/><code>\overset&#123;\alpha&#125;&#123;\underset&#123;\gamma&#125;&#123;\omega&#125;&#125;</code> <br/><code>\stackrel&#123;\alpha&#125;&#123;\omega&#125;</code></td></tr><tr><td style="text-align:center"><strong>导数</strong></td><td style="text-align:center">$x’,y’’,f’,f’’,x^\prime,y^{\prime\prime}$</td><td style="text-align:left"><code>x&#39;, y&#39;&#39;, f&#39;, f&#39;&#39;</code> <code>x^\prime, y^&#123;\prime\prime&#125;</code></td></tr><tr><td style="text-align:center"><strong>导数点</strong></td><td style="text-align:center">$\dot{x},\ddot{x}$</td><td style="text-align:left"><code>\dot&#123;x&#125;, \ddot&#123;x&#125;</code></td></tr><tr><td style="text-align:center"><strong>上下划线与向量</strong></td><td style="text-align:center">$\hat a \ \bar b \ \vec c\\overrightarrow{a b} \ \overleftarrow{a b} \ \widehat{d e f}\\overline{g h i} \ \underline{j k l}$</td><td style="text-align:left"><code>\hat a \ \bar b \ \vec c</code><br/> <code>\overrightarrow&#123;a b&#125;\ \overleftarrow&#123;c d&#125;\ \widehat&#123;d e f&#125;</code> <code>\overline&#123;g h i&#125; \ \underline&#123;j k l&#125;</code></td></tr><tr><td style="text-align:center"><strong>弧度</strong></td><td style="text-align:center">$\overset{\frown} {AB}$</td><td style="text-align:left"><code>\overset&#123;\frown&#125; &#123;AB&#125;</code></td></tr><tr><td style="text-align:center"><strong>箭头</strong></td><td style="text-align:center">$A \xleftarrow{n+\mu-1} B \xrightarrow[T]{n\pm i-1} C$</td><td style="text-align:left"><code>A \xleftarrow&#123;n+\mu-1&#125; B \xrightarrow[T]&#123;n\pm i-1&#125; C</code></td></tr><tr><td style="text-align:center"><strong>大括号</strong></td><td style="text-align:center">$\overbrace{ 1+2+\cdots+100}^5050$</td><td style="text-align:left"><code>\overbrace&#123; 1+2+\cdots+100 &#125;^&#123;5050&#125;</code></td></tr><tr><td style="text-align:center"><strong>底部大括号</strong></td><td style="text-align:center">$\underbrace{a+b+\cdots+z}_{26}$</td><td style="text-align:left"><code>\underbrace&#123; a+b+\cdots+z &#125;_&#123;26&#125;</code></td></tr><tr><td style="text-align:center"><strong>求和运算</strong></td><td style="text-align:center">$\sum_{k=1}^N k^2$</td><td style="text-align:left"><code>\sum_&#123;k=1&#125;^N k^2</code></td></tr><tr><td style="text-align:center"><strong>文本模式下的求和运算</strong></td><td style="text-align:center">$\textstyle \sum_{k=1}^N k^2$</td><td style="text-align:left"><code>\textstyle \sum_&#123;k=1&#125;^N k^2</code></td></tr><tr><td style="text-align:center"><strong>分式中的求和运算</strong></td><td style="text-align:center">$\frac{\sum_{k=1}^N k^2}{a}$</td><td style="text-align:left"><code>\frac&#123;\sum_&#123;k=1&#125;^N k^2&#125;&#123;a&#125;</code></td></tr><tr><td style="text-align:center"><strong>分式中的求和运算</strong></td><td style="text-align:center">$\frac{\displaystyle \sum_{k=1}^N k^2}{a}$</td><td style="text-align:left"><code>\frac&#123;\displaystyle \sum_&#123;k=1&#125;^N k^2&#125;&#123;a&#125;</code></td></tr><tr><td style="text-align:center"><strong>分式中的求和运算</strong></td><td style="text-align:center">$\frac{\sum\limits_{k=1}^N k^2}{a}$</td><td style="text-align:left"><code>\frac&#123;\sum\limits^&#123;^N&#125;_&#123;k=1&#125; k^2&#125;&#123;a&#125;</code></td></tr><tr><td style="text-align:center"><strong>乘积运算</strong></td><td style="text-align:center">$\prod_{i=1}^N x_i$</td><td style="text-align:left"><code>\prod_&#123;i=1&#125;^N x_i</code></td></tr><tr><td style="text-align:center"><strong>文本模式下乘积运算</strong></td><td style="text-align:center">$\textstyle \prod_{i=1}^N x_i$</td><td style="text-align:left"><code>\textstyle \prod_&#123;i=1&#125;^N x_i</code></td></tr><tr><td style="text-align:center"><strong>副乘运算</strong></td><td style="text-align:center">$\coprod_{i=1}^N x_i$</td><td style="text-align:left"><code>\coprod_&#123;i=1&#125;^N x_i</code></td></tr><tr><td style="text-align:center"><strong>文本模式下副乘运算</strong></td><td style="text-align:center">$\textstyle \coprod_{i=1}^N x_i$</td><td style="text-align:left"><code>\textstyle \coprod_&#123;i=1&#125;^N x_i</code></td></tr><tr><td style="text-align:center"><strong>极限</strong></td><td style="text-align:center">$\lim\limits_{n \to\infty} x_n$</td><td style="text-align:left"><code>\lim\limits_&#123;n \to \infty&#125;x_n</code></td></tr><tr><td style="text-align:center"><strong>文本模式下极限</strong></td><td style="text-align:center">$\textstyle \lim\limits_{n \to \infty} x_n$</td><td style="text-align:left"><code>\textstyle \lim\limits_&#123;n \to \infty&#125;x_n</code></td></tr><tr><td style="text-align:center"><strong>积分</strong></td><td style="text-align:center">$\int\limits_1^3 \frac{e^3/x}{x^2}\,dx$</td><td style="text-align:left"><code>\int\limits_&#123;1&#125;^&#123;3&#125;\frac&#123;e^3/x&#125;&#123;x^2&#125;\, dx</code></td></tr><tr><td style="text-align:center"><strong>积分</strong></td><td style="text-align:center">$\int_1^3 \frac{e^3/x}{x^2}\,dx$</td><td style="text-align:left"><code>\int_&#123;1&#125;^&#123;3&#125;\frac&#123;e^3/x&#125;&#123;x^2&#125;\, dx</code></td></tr><tr><td style="text-align:center"><strong>交集</strong></td><td style="text-align:center">$\bigcap_{i=1}^n E_i$</td><td style="text-align:left"><code>\bigcap_&#123;i=1&#125;^n E_i</code></td></tr><tr><td style="text-align:center"><strong>并集</strong></td><td style="text-align:center">$\bigcup_{i=1}^N E_i$</td><td style="text-align:left"><code>\bigcup_&#123;i=1&#125;^n E_i</code></td></tr></tbody></table></div><h2 id="二项式系数"><a href="#二项式系数" class="headerlink" title="二项式系数"></a>二项式系数</h2><div class="table-container"><table><thead><tr><th style="text-align:left">类型</th><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left">二项式系数</td><td style="text-align:left">$\binom{n}{k}$</td><td style="text-align:left"><code>\binom&#123;n&#125;&#123;k&#125;</code></td></tr><tr><td style="text-align:left">小型二项式系数</td><td style="text-align:left">$\tbinom{n}{k}$</td><td style="text-align:left"><code>\tbinom&#123;n&#125;&#123;k&#125;</code></td></tr><tr><td style="text-align:left">大型二项式系数</td><td style="text-align:left">$\dbinom{n}{k}$</td><td style="text-align:left"><code>\dbinom&#123;n&#125;&#123;k&#125;</code></td></tr></tbody></table></div><h2 id="矩阵"><a href="#矩阵" class="headerlink" title="矩阵"></a>矩阵</h2><div class="table-container"><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:center"><script type="math/tex">\begin{matrix}x & y \\ z & v\end{matrix}</script></td><td style="text-align:left"><code>\begin&#123;matrix&#125;</code><br/><code>x &amp; y \\</code><br/><code>z &amp; v</code><br/><code>\end&#123;matrix&#125;</code></td></tr><tr><td style="text-align:center"><script type="math/tex">\begin{vmatrix}x & y \\ z & v\end{vmatrix}</script></td><td style="text-align:left"><code>\begin&#123;vmatrix&#125;</code><br/><code>x &amp; y \\</code><br/><code>z &amp; v</code><br/><code>\end&#123;vmatrix&#125;</code></td></tr><tr><td style="text-align:center">$\begin{Vmatrix}x &amp; y\ z&amp;v\end{Vmatrix}$</td><td style="text-align:left"><code>\begin&#123;Vmatrix&#125;</code><br/><code>x &amp; y \\</code><br><code>/z &amp; v</code><br/><code>\end&#123;Vmatrix&#125;</code></td></tr><tr><td style="text-align:center">$\begin{bmatrix}0 &amp; \cdots &amp; 0 \ \vdots &amp; \ddots &amp; \vdots\ 0 &amp; \cdots &amp; 0\end{bmatrix}$</td><td style="text-align:left"><code>\begin&#123;bmatrix&#125;</code><br/><code>0 &amp; \cdots &amp; 0 \\</code><br><code>\vdots &amp; \ddots &amp; \vdots \\</code><br/><code>0 &amp; \cdots &amp; 0</code><br/><code>\end&#123;bmatrix&#125;</code></td></tr><tr><td style="text-align:center">$\begin{Bmatrix}x &amp; y \ z &amp; v\end{Bmatrix}$</td><td style="text-align:left"><code>\begin&#123;Bmatrix&#125;x &amp; y \\z &amp; v\end&#123;Bmatrix&#125;</code></td></tr><tr><td style="text-align:center">$\begin{pmatrix}x &amp; y \ z &amp; v\end{pmatrix}$</td><td style="text-align:left"><code>\begin&#123;pmatrix&#125;</code><br/><code>x &amp; y \\</code><br/><code>z &amp; v</code><br/><code>\end&#123;pmatrix&#125;</code></td></tr><tr><td style="text-align:center">$\bigl(\begin{smallmatrix}a &amp; b\ c&amp;d\end{smallmatrix}\bigr)$</td><td style="text-align:left"><code>\bigl( \begin&#123;smallmatrix&#125;</code><br/><code>a &amp; b\\</code><br/><code>c &amp; d</code><br/><code>\end&#123;smallmatrix&#125; \bigr)</code></td></tr></tbody></table></div><blockquote><p>注意，最后一个矩阵写法比较特殊</p></blockquote><h2 id="方程与方程组"><a href="#方程与方程组" class="headerlink" title="方程与方程组"></a>方程与方程组</h2><div class="table-container"><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:center">$\begin{cases}3x + 57 +z\ 7x - 2y + 4z\ -6x + 3y + 2z\end{cases}$</td><td style="text-align:left"><code>\begin&#123;cases&#125;</code><br/><code>3x + 5y + z \\</code><br/><code>7x - 2y + 4z \\</code><br/><code>-6x + 3y + 2z</code><br/><code>\end&#123;cases&#125;</code></td></tr></tbody></table></div><script type="math/tex; mode=display">f(x)\,=\,\begin{cases}\frac{1}{1+\cos x}\, , \quad-\pi\lt x\lt0.\\xe^{-x^2}\, , \qquad\quad x \geqslant0.\end{cases}</script><h3 id="条件定义"><a href="#条件定义" class="headerlink" title="条件定义"></a>条件定义</h3><div class="table-container"><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:center">$f(n)=\begin{cases}n/2,&amp; \text{if }n\text{ is even} \ 3n+1,&amp; \text{if }n\text{ is odd}\end{cases}$</td><td style="text-align:left"><code>f(n) =</code><br/><code>\begin&#123;cases&#125;</code><br/><code>n/2, &amp; \text&#123;if &#125;n\text&#123; is even&#125; \\</code><br/><code>3n+1, &amp; \text&#123;if &#125;n\text&#123; is odd&#125;</code><br/><code>\end&#123;cases&#125;</code></td></tr></tbody></table></div><h3 id="多行等式"><a href="#多行等式" class="headerlink" title="多行等式"></a>多行等式</h3><div class="table-container"><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th></tr></thead><tbody><tr><td style="text-align:center">$\begin{align}f(x) &amp; = (a+b)^2\&amp; = a^2 + 2ab + b^2\end{align}$</td><td style="text-align:center"><code>\begin&#123;align&#125;f(x) &amp; = (a+b)^2\\&amp; = a^2+2ab+b^2\end&#123;align&#125;</code></td></tr><tr><td style="text-align:center">$\begin{alignat}{2}f(x) &amp; = (a-b)^2 \&amp; = a^2-2ab+b^2\end{alignat}$</td><td style="text-align:center"><code>\begin&#123;alignat&#125;&#123;2&#125;f(x) &amp; = (a-b)^2 \\&amp; = a^2-2ab+b^2\end&#123;alignat&#125;</code></td></tr><tr><td style="text-align:center">$\begin{array}{lcl}z &amp; = &amp; a \ f(x,y,z) &amp; = &amp; x + y + z\end{array}$</td><td style="text-align:center"><code>\begin&#123;array&#125;&#123;lcl&#125;z &amp; = &amp; a \\f(x,y,z) &amp; = &amp; x + y + z\end&#123;array&#125;</code></td></tr><tr><td style="text-align:center">$\begin{array}{lcr}z &amp; = &amp; a \ f(x,y,z) &amp; = &amp; x + y + z\end{array}$</td><td style="text-align:center"><code>\begin&#123;array&#125;&#123;lcr&#125;z &amp; = &amp; a \\f(x,y,z) &amp; = &amp; x + y + z\end&#123;array&#125;</code></td></tr></tbody></table></div><h3 id="自动编号"><a href="#自动编号" class="headerlink" title="自动编号"></a>自动编号</h3><div class="table-container"><table><thead><tr><th style="text-align:center">描述</th><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th></tr></thead><tbody><tr><td style="text-align:center">开启 AMS 扩展包的情况下，会在部分环境的多行公式后自动编号；</td><td style="text-align:center">$\begin{eqnarray}E = mc^2 \ e^{i\pi}+1=0\end{eqnarray}$</td><td style="text-align:center"><code>\begin&#123;eqnarray&#125;E = mc^2 \\e^&#123;i\pi&#125;+1=0\end&#123;eqnarray&#125;</code></td></tr><tr><td style="text-align:center">整个公式都不进行编号，可以使用<code>&#123;equation*&#125;</code>、<code>&#123;eqnarray*&#125;</code>环境；</td><td style="text-align:center">$\begin{eqnarray<em>}E = mc^2 \ e^{i\pi}+1=0\end{eqnarray</em>}$</td><td style="text-align:center"><code>\begin&#123;eqnarray*&#125;E = mc^2 \\e^&#123;i\pi&#125;+1=0\end&#123;eqnarray*&#125;</code></td></tr><tr><td style="text-align:center">单个方程不进行编号，可以在指定方程后面添加<code>\nonumber</code>命令；</td><td style="text-align:center">$\begin{eqnarray}E = mc^2 \ e^{i\pi}+1=0 \nonumber\end{eqnarray}$</td><td style="text-align:center"><code>\begin&#123;eqnarray&#125;E = mc^2 \\e^&#123;i\pi&#125;+1=0 \nonumber\end&#123;eqnarray&#125;</code></td></tr><tr><td style="text-align:center">个别公式出现或者不出现编号，可以在公式后使用<code>\tag&#123;&#125;</code>或者<code>\notag</code>命令；</td><td style="text-align:center">$\begin{eqnarray}E = mc^2 \notag\ \e^{i\pi}+1=0 \tag{b}\end{eqnarray}$</td><td style="text-align:center"><code>\begin&#123;eqnarray&#125;E = mc^2 \notag\\e^&#123;i\pi&#125;+1=0 \tag&#123;b&#125;\end&#123;eqnarray&#125;</code></td></tr></tbody></table></div><h2 id="括号"><a href="#括号" class="headerlink" title="括号"></a>括号</h2><p>常用的 <code>()</code>、<code>[]</code>、<code>&#123;&#125;</code> 括号符号可以在 LaTeX 环境当中直接进行使用，但是如果处于较大的符号当中，就应该配合 <code>\left</code> 与 <code>\right</code> 命令来使用：</p><div class="table-container"><table><thead><tr><th style="text-align:left">类型</th><th style="text-align:center">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left">圆括号、小括号</td><td style="text-align:center">$\left ( \frac{a}{b} \right)$</td><td style="text-align:left"><code>\left ( \frac&#123;a&#125;&#123;b&#125; \right )</code></td></tr><tr><td style="text-align:left">方括号、中括号</td><td style="text-align:center">$\left[ \frac{a}{b} \right]\ \left \lbrack \frac{a}{b} \right \rbrack$</td><td style="text-align:left"><code>\left [ \frac&#123;a&#125;&#123;b&#125; \right ]</code><br/> <code>\left \lbrack \frac&#123;a&#125;&#123;b&#125; \right \rbrack</code></td></tr><tr><td style="text-align:left">花括号、大括号</td><td style="text-align:center">$\left{ \frac{a}{b} \right}\ \left \lbrace \frac{a}{b} \right \rbrace$</td><td style="text-align:left"><code>\left \&#123; \frac&#123;a&#125;&#123;b&#125; \right \&#125;</code> <br/><code>\left \lbrace \frac&#123;a&#125;&#123;b&#125; \right \rbrace</code></td></tr><tr><td style="text-align:left">角括号</td><td style="text-align:center">$\left \langle \frac{a}{b} \right \rangle$</td><td style="text-align:left"><code>\left \langle \frac&#123;a&#125;&#123;b&#125; \right \rangle</code></td></tr><tr><td style="text-align:left">单竖线和双竖线</td><td style="text-align:center">$\left \vert \frac{a}{b} \right \vert\ \left \vert \frac{a}{b} \right \vert$</td><td style="text-align:left"><code>\left \vert \frac&#123;a&#125;&#123;b&#125; \right \vert</code> <br/><code>\left \vert \frac&#123;a&#125;&#123;b&#125; \right \vert</code></td></tr><tr><td style="text-align:left">取整函数与取顶函数</td><td style="text-align:center">$\left\lfloor \frac{a}{b} \right\rfloor\ \left\lceil \frac{c}{d} \right\rceil$</td><td style="text-align:left"><code>\left \lfloor \frac&#123;a&#125;&#123;b&#125; \right \rfloor</code><br/> <code>\left \lceil \frac&#123;c&#125;&#123;d&#125; \right \rceil</code></td></tr><tr><td style="text-align:left">斜线与反斜线</td><td style="text-align:center">$\left/ \frac{a}{b} \right\backslash$</td><td style="text-align:left"><code>\left / \frac&#123;a&#125;&#123;b&#125; \right \backslash</code></td></tr><tr><td style="text-align:left">上下箭头</td><td style="text-align:center">$\left\uparrow \frac{a}{b} \right\downarrow\ \left\Uparrow \frac{a}{b} \right\Downarrow\ \left\updownarrow \frac{a}{b} \right\Updownarrow$</td><td style="text-align:left"><code>\left \uparrow \frac&#123;a&#125;&#123;b&#125; \right \downarrow</code><br/> <code>\left \Uparrow \frac&#123;a&#125;&#123;b&#125; \right \Downarrow</code> <br/><code>\left \updownarrow \frac&#123;a&#125;&#123;b&#125; \right \Updownarrow</code></td></tr><tr><td style="text-align:left">混合括号</td><td style="text-align:center">$\left[ 0,1 \right) \ \left \langle \psi \right \vert$</td><td style="text-align:left"><code>\left [ 0,1 \right )</code> <br/><code>\left \langle \psi \right \vert</code></td></tr><tr><td style="text-align:left">使用<code>\left.</code>和<code>\right.</code>不显示某侧的括号；</td><td style="text-align:center">$\left. \frac{A}{B} \right] \to X$</td><td style="text-align:left"><code>\left. \frac&#123;A&#125;&#123;B&#125; \right\&#125; \to X</code></td></tr></tbody></table></div><blockquote><p><strong>注意</strong>：在 Markdown 当中使用 LaTeX 时，为了避免语法冲突，花括号 <code>&#123;&#125;</code> 必须采用 <code>\&#123;</code>和<code>\&#125;</code> 进行转义，或者改用 <code>\lbrace</code> 和 <code>\rbrace</code> 的方式；如果是在 Markdown 表格当中使用 LaTeX，则必须采用 <code>\vert</code> 或者 <code>\Vert</code> 代替直接在公式当中书写 <code>|</code> 和 <code>||</code>。</p></blockquote><h3 id="括号尺寸"><a href="#括号尺寸" class="headerlink" title="括号尺寸"></a>括号尺寸</h3><div class="table-container"><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:center">$( \bigl( \Bigl( \biggl( \Biggl( \dots \Biggr] \biggr] \Bigr] \bigr] ]$</td><td style="text-align:left"><code>( \bigl( \Bigl( \biggl( \Biggl( \dots \Biggr] \biggr] \Bigr] \bigr] ]</code></td></tr><tr><td style="text-align:center">${ \bigl{ \Bigl{ \biggl{ \Biggl{ \dots \Biggr \rangle \biggr \rangle \Bigr \rangle \bigr \rangle \rangle$</td><td style="text-align:left"><code>\&#123; \bigl \&#123; \Bigl \&#123; \biggl \&#123; \Biggl \&#123; \dots \Biggr\rangle \biggr\rangle \Bigr\rangle \bigr\rangle \rangle</code></td></tr><tr><td style="text-align:center">$\vert \big \vert \Big \vert \bigg \vert \Bigg \vert \dots \Bigg \vert \bigg \vert \Big \vert \big \vert$</td><td style="text-align:left"><code>\vert \big \vert \Big \vert \bigg \vert \Bigg \vert \dots \Bigg \vert \bigg \vert \Big \vert \big \vert</code></td></tr><tr><td style="text-align:center">$\lfloor \bigl\lfloor \Bigl\lfloor \biggl\lfloor \Biggl\lfloor \dots \Biggr\rceil \biggr\rceil \Bigr\rceil \bigr\rceil \rceil$</td><td style="text-align:left"><code>\lfloor \bigl\lfloor \Bigl\lfloor \biggl\lfloor \Biggl\lfloor \dots \Biggr\rceil \biggr\rceil \Bigr\rceil \bigr\rceil \rceil</code></td></tr><tr><td style="text-align:center">$\uparrow \big\uparrow \Big\uparrow \bigg\uparrow \Bigg\uparrow \dots \Bigg\Downarrow \bigg\Downarrow \Big\Downarrow \big\Downarrow \Downarrow$</td><td style="text-align:left"><code>\uparrow \big\uparrow \Big\uparrow \bigg\uparrow \Bigg\uparrow \dots \Bigg\Downarrow \bigg\Downarrow \Big\Downarrow \big\Downarrow \Downarrow</code></td></tr><tr><td style="text-align:center">$\updownarrow \big\updownarrow \Big\updownarrow \bigg\updownarrow \Bigg\updownarrow \dots \Bigg\Updownarrow \bigg\Updownarrow \Big\Updownarrow \big\Updownarrow \Updownarrow$</td><td style="text-align:left"><code>\updownarrow \big\updownarrow \Big\updownarrow \bigg\updownarrow \Bigg\updownarrow \dots \Bigg\Updownarrow \bigg\Updownarrow \Big\Updownarrow \big\Updownarrow \Updownarrow</code></td></tr><tr><td style="text-align:center">$/ \big/ \Big/ \bigg/ \Bigg/ \dots \Bigg\backslash \bigg\backslash \Big\backslash \big\backslash \backslash$</td><td style="text-align:left"><code>/ \big/ \Big/ \bigg/ \Bigg/ \dots \Bigg\backslash \bigg\backslash \Big\backslash \big\backslash \backslash</code></td></tr></tbody></table></div><h2 id="空格与换行"><a href="#空格与换行" class="headerlink" title="空格与换行"></a>空格与换行</h2><div class="table-container"><table><thead><tr><th style="text-align:left">序号</th><th style="text-align:left">符号</th><th>LaTeX</th></tr></thead><tbody><tr><td style="text-align:left"><strong>双空格</strong></td><td style="text-align:left">$a \qquad b$</td><td><code>a \qquad b</code></td></tr><tr><td style="text-align:left"><strong>单空格</strong></td><td style="text-align:left">$a \quad b$</td><td><code>a \quad b</code></td></tr><tr><td style="text-align:left"><strong>字符空格</strong></td><td style="text-align:left">$a\ b$</td><td><code>a\ b</code></td></tr><tr><td style="text-align:left"><strong>文本模式中的字符空格</strong></td><td style="text-align:left">$a \text{ } b$</td><td><code>a \text&#123; &#125; b</code></td></tr><tr><td style="text-align:left"><strong>大空格</strong></td><td style="text-align:left">$a\;b$</td><td><code>a\;b</code></td></tr><tr><td style="text-align:left"><strong>小空格</strong></td><td style="text-align:left">$a\,b$</td><td><code>a\,b</code></td></tr><tr><td style="text-align:left"><strong>极小空格</strong></td><td style="text-align:left">$ab$</td><td><code>ab</code></td></tr><tr><td style="text-align:left"><strong>极小空格</strong>（用于区分语法）</td><td style="text-align:left">$a b$</td><td><code>a b</code></td></tr><tr><td style="text-align:left"><strong>无空格</strong>（用于区分多字母变量）</td><td style="text-align:left">$\mathit{ab}$</td><td><code>\mathit&#123;ab&#125;</code></td></tr></tbody></table></div><p>MathJax 3.0 取消了单行公式环境下 \ 的强制换行功能，因此强制换行命令 <code>\\</code> 仅能用于 <code>eqnarray</code>、<code>align</code>、<code>array</code>、<code>matrix</code> 等多行环境当中。除此之外，还可以在 <code>\displaylines&#123;&#125;</code> 行显示命令当中使用 <code>\\</code> 强制换行命令：</p><div class="table-container"><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th></tr></thead><tbody><tr><td style="text-align:center">$\displaylines{y=1729x \ y=1729-x}$</td><td style="text-align:center"><code>\displaylines&#123;y=1729x \\ y=1729-x&#125;</code></td></tr></tbody></table></div><h2 id="颜色"><a href="#颜色" class="headerlink" title="颜色"></a>颜色</h2><p>编写 LaTeX 的时候，支持将<strong>文本</strong>、<strong>符号</strong>或者<strong>背景</strong>设置为下面表格当中的各种颜色：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/latex_color.png" alt="image-20220716162651861"></p><h3 id="字体颜色"><a href="#字体颜色" class="headerlink" title="字体颜色"></a>字体颜色</h3><p>公式当中可以使用 {\color{hues}text}调用颜色命令，其中 hues 数为<strong>字体颜色</strong>，而 text 参数是<strong>公式内容</strong>：</p><div class="table-container"><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th></tr></thead><tbody><tr><td style="text-align:center">${\color{Blue}x^2}+{\color{Orange}2x}-{\color{LimeGreen}1}$</td><td style="text-align:center"><code>&#123;\color&#123;Blue&#125;x^2&#125;+&#123;\color&#123;Orange&#125;2x&#125;-&#123;\color&#123;LimeGreen&#125;1&#125;</code></td></tr></tbody></table></div><h3 id="背景颜色"><a href="#背景颜色" class="headerlink" title="背景颜色"></a>背景颜色</h3><p>文本环境中可以使用 \colorbox{hues}{text}来调用背景颜色命令，其中 hues参数为<strong>背景颜色</strong>，而 text 参数是<strong>公式内容</strong>：</p><div class="table-container"><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th></tr></thead><tbody><tr><td style="text-align:center">$\colorbox{yellow}{Thistext}$</td><td style="text-align:center"><code>\colorbox&#123;yellow&#125;&#123;Thistext&#125;</code></td></tr></tbody></table></div><p>该命令应用于数学环境当中时，需要在第 2 个参数加入 \displaystyle + 公式：</p><div class="table-container"><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th></tr></thead><tbody><tr><td style="text-align:center">$\colorbox{yellow}{$\displaystyle \frac{a}{b}$}$</td><td style="text-align:center"><code>\colorbox&#123;yellow&#125;&#123;$\displaystyle \frac&#123;a&#125;&#123;b&#125;$&#125;</code></td></tr></tbody></table></div><blockquote><p><strong>注意</strong>：在 Markdown 内联 LaTeX 公式 <script type="math/tex">...</script> 当中使用 <script type="math/tex">\displaystyle + 公式</script> 语法时将会引发冲突，因此该语法仅用于多行公式 $$$…$$$。</p></blockquote><h3 id="RGB-颜色"><a href="#RGB-颜色" class="headerlink" title="RGB 颜色"></a>RGB 颜色</h3><p>通过使用 \definecolor`命令可以自定义 LaTeX 公式的颜色：</p><div class="table-container"><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th></tr></thead><tbody><tr><td style="text-align:center">$\definecolor{mygreen}{RGB}{0,200,0} {\color{mygreen}e^{i \pi} + 1 = 0 }$</td><td style="text-align:center"><code>\definecolor&#123;mygreen&#125;&#123;RGB&#125;&#123;0,200,0&#125; &#123;\color&#123;mygreen&#125;e^&#123;i \pi&#125; + 1 = 0 &#125;</code></td></tr></tbody></table></div><h2 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h2><h3 id="字体加粗"><a href="#字体加粗" class="headerlink" title="字体加粗"></a>字体加粗</h3><div class="table-container"><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left">$\boldsymbol{ABCDEFGHIJKLMNOPQRSTUVWXYZ}$</td><td style="text-align:left"><code>\boldsymbol&#123;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#125;</code></td></tr><tr><td style="text-align:left">$\boldsymbol{abcdefghijklmnopqrstuvwxyz}$</td><td style="text-align:left"><code>\boldsymbol&#123;abcdefghijklmnopqrstuvwxyz&#125;</code></td></tr><tr><td style="text-align:left">$\boldsymbol{0123456789}$</td><td style="text-align:left"><code>\boldsymbol&#123;0123456789&#125;</code></td></tr></tbody></table></div><h3 id="黑体"><a href="#黑体" class="headerlink" title="黑体"></a>黑体</h3><div class="table-container"><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left">$\mathbf{ABCDEFGHIJKLMNOPQRSTUVWXYZ}$</td><td style="text-align:left"><code>\mathbf&#123;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#125;</code></td></tr><tr><td style="text-align:left">$\mathbf{abcdefghijklmnopqrstuvwxyz}$</td><td style="text-align:left"><code>\mathbf&#123;abcdefghijklmnopqrstuvwxyz&#125;</code></td></tr><tr><td style="text-align:left">$\mathbf{0123456789}$</td><td style="text-align:left"><code>\mathbf&#123;0123456789&#125;</code></td></tr></tbody></table></div><p>一般可用<code>mathbf&#123;a&#125;</code>表示粗体向量<br>用<code>textbf&#123;解&#125;</code>表示粗体解</p><h3 id="黑板报体"><a href="#黑板报体" class="headerlink" title="黑板报体"></a>黑板报体</h3><div class="table-container"><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left">$\mathbb{ABCDEFGHIJKLMNOPQRSTUVWXYZ}$</td><td style="text-align:left"><code>\mathbb&#123;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#125;</code></td></tr><tr><td style="text-align:left">$\mathbb{abcdefghijklmnopqrstuvwxyz}$</td><td style="text-align:left"><code>\mathbb&#123;abcdefghijklmnopqrstuvwxyz&#125;</code></td></tr><tr><td style="text-align:left">$\mathbb{0123456789}$</td><td style="text-align:left"><code>\mathbb&#123;0123456789&#125;</code></td></tr></tbody></table></div><h3 id="斜体"><a href="#斜体" class="headerlink" title="斜体"></a>斜体</h3><div class="table-container"><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left">$\mathit{ABCDEFGHIJKLMNOPQRSTUVWXYZ}$</td><td style="text-align:left"><code>\mathit&#123;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#125;</code></td></tr><tr><td style="text-align:left">$\mathit{abcdefghijklmnopqrstuvwxyz}$</td><td style="text-align:left"><code>\mathit&#123;abcdefghijklmnopqrstuvwxyz&#125;</code></td></tr><tr><td style="text-align:left">$\mathit{0123456789}$</td><td style="text-align:left"><code>\mathit&#123;0123456789&#125;</code></td></tr></tbody></table></div><h3 id="罗马体"><a href="#罗马体" class="headerlink" title="罗马体"></a>罗马体</h3><div class="table-container"><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left">$\mathrm{ABCDEFGHIJKLMNOPQRSTUVWXYZ}$</td><td style="text-align:left"><code>\mathrm&#123;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#125;</code></td></tr><tr><td style="text-align:left">abcdefghijklmnopqrstuvwxyz</td><td style="text-align:left"><code>\mathrm&#123;abcdefghijklmnopqrstuvwxyz&#125;</code></td></tr><tr><td style="text-align:left">0123456789</td><td style="text-align:left"><code>\mathrm&#123;0123456789&#125;</code></td></tr></tbody></table></div><h3 id="无衬线体"><a href="#无衬线体" class="headerlink" title="无衬线体"></a>无衬线体</h3><div class="table-container"><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left">$\mathsf{ABCDEFGHIJKLMNOPQRSTUVWXYZ}$</td><td style="text-align:left"><code>\mathsf&#123;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#125;</code></td></tr><tr><td style="text-align:left">$\mathsf{abcdefghijklmnopqrstuvwxyz}$</td><td style="text-align:left"><code>\mathsf&#123;abcdefghijklmnopqrstuvwxyz&#125;</code></td></tr><tr><td style="text-align:left">$\mathsf{0123456789}$</td><td style="text-align:left"><code>\mathsf&#123;0123456789&#125;</code></td></tr></tbody></table></div><h3 id="手写体"><a href="#手写体" class="headerlink" title="手写体"></a>手写体</h3><div class="table-container"><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left">$\mathcal{ABCDEFGHIJKLMNOPQRSTUVWXYZ}$</td><td style="text-align:left"><code>\mathcal&#123;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#125;</code></td></tr><tr><td style="text-align:left">$\mathcal{abcdefghijklmnopqrstuvwxyz}$</td><td style="text-align:left"><code>\mathcal&#123;abcdefghijklmnopqrstuvwxyz&#125;</code></td></tr><tr><td style="text-align:left">$\mathcal{0123456789}$</td><td style="text-align:left"><code>\mathcal&#123;0123456789&#125;</code></td></tr></tbody></table></div><h3 id="哥特字体"><a href="#哥特字体" class="headerlink" title="哥特字体"></a>哥特字体</h3><div class="table-container"><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left">$\mathfrak{ABCDEFGHIJKLMNOPQRSTUVWXYZ}$</td><td style="text-align:left"><code>\mathfrak&#123;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#125;</code></td></tr><tr><td style="text-align:left">$\mathfrak{abcdefghijklmnopqrstuvwxyz}$</td><td style="text-align:left"><code>\mathfrak&#123;abcdefghijklmnopqrstuvwxyz&#125;</code></td></tr><tr><td style="text-align:left">$\mathfrak{0123456789}$</td><td style="text-align:left"><code>\mathfrak&#123;0123456789&#125;</code></td></tr></tbody></table></div><blockquote><p>上面的七种以\math…开头的命令都可以省略math，比如罗马体$\rm{abcdefghijklmnopqrstuvwxyz}$-$\rm{abcdefghijklmnopqrstuvwxyz}</p></blockquote><h3 id="小脚本风格"><a href="#小脚本风格" class="headerlink" title="小脚本风格"></a>小脚本风格</h3><div class="table-container"><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left">${\scriptstyle\text{ABCDEFGHIJKLMNOPQRSTUVWXYZ}}$</td><td style="text-align:left"><code>&#123;\scriptstyle\text&#123;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#125;&#125;</code></td></tr><tr><td style="text-align:left">${\scriptstyle\text{abcdefghijklmnopqrstuvwxyz}}$</td><td style="text-align:left"><code>&#123;\scriptstyle\text&#123;abcdefghijklmnopqrstuvwxyz&#125;&#125;</code></td></tr><tr><td style="text-align:left">${\scriptstyle\text{0123456789}}$</td><td style="text-align:left"><code>&#123;\scriptstyle\text&#123;0123456789&#125;&#125;</code></td></tr></tbody></table></div><h3 id="字号尺寸"><a href="#字号尺寸" class="headerlink" title="字号尺寸"></a>字号尺寸</h3><div class="table-container"><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">LaTeX</th></tr></thead><tbody><tr><td style="text-align:left">${\tiny abc极小tiny}$</td><td style="text-align:left"><code>&#123;\tiny abc极小tiny&#125;</code></td></tr><tr><td style="text-align:left">${\scriptsize abc 超小 scriptsize}$</td><td style="text-align:left"><code>&#123;\scriptsize abc 超小 scriptsize&#125;</code></td></tr><tr><td style="text-align:left">${\small abc 小 small}$</td><td style="text-align:left"><code>&#123;\small abc 小 small&#125;</code></td></tr><tr><td style="text-align:left">${\normalsize abc 正常 normal}$</td><td style="text-align:left"><code>&#123;\normalsize abc 正常 normal&#125;</code></td></tr><tr><td style="text-align:left">${\large abc 大 large}$</td><td style="text-align:left"><code>&#123;\large abc 大 large&#125;</code></td></tr><tr><td style="text-align:left">${\Large abc 超大 Large}$</td><td style="text-align:left"><code>&#123;\Large abc 超大 Large&#125;</code></td></tr><tr><td style="text-align:left">${\LARGE abc 特大 LARGE}$</td><td style="text-align:left"><code>&#123;\LARGE abc 特大 LARGE&#125;</code></td></tr><tr><td style="text-align:left">${\huge abc 巨大 huge}$</td><td style="text-align:left"><code>&#123;\huge abc 巨大 huge&#125;</code></td></tr><tr><td style="text-align:left">${\Huge abc 巨无霸 Huge}$</td><td style="text-align:left"><code>&#123;\Huge abc 巨无霸 Huge&#125;</code></td></tr></tbody></table></div><h2 id="实战演练"><a href="#实战演练" class="headerlink" title="实战演练"></a>实战演练</h2><script type="math/tex; mode=display">f(x) = \frac 1 {\sqrt{2\pi} \sigma} {\rm e} ^ {-\frac {(x-\mu)^2}{2\sigma ^ 2}}\\f(x) = \frac 1 {\sqrt{2\pi} \sigma} \exp \left[ {-\frac {(x-\mu)^2}{2\sigma ^ 2}}\right] \\</script><script type="math/tex; mode=display">\lim\limits_{N\to \infty} P \left\{ \left| \frac {I\left( \alpha_i \right)}{N} - H(s) \right| < \varepsilon  \right\} = 1 \\</script><script type="math/tex; mode=display">\begin{align}\vec B \left( \vec r \right) &= \frac {\mu_0}{4\pi}\oint_C \frac {I \, {\rm d} \vec l \times \vec R}{R^3}\\&= \frac {\mu_0}{4\pi} \int_V \frac{\vec J_V \times \vec R}{R^3}\, {\rm d} V'\end{align}</script>]]></content>
      
      
      <categories>
          
          <category> latex </category>
          
      </categories>
      
      
        <tags>
            
            <tag> latex </tag>
            
            <tag> 数学建模 </tag>
            
            <tag> 论文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搭建Zookeeper集群常见问题</title>
      <link href="/posts/1571776361.html"/>
      <url>/posts/1571776361.html</url>
      
        <content type="html"><![CDATA[<h1 id="启动集群时失败"><a href="#启动集群时失败" class="headerlink" title="启动集群时失败"></a>启动集群时失败</h1><p>启动集群报如下错：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: /usr/local/zookeeper/bin/../conf/zoo.cfg</span><br><span class="line">Starting zookeeper ... FAILED TO START</span><br></pre></td></tr></table></figure><p>这个报错没有参考价值。</p><p>查看日志文件（<code>cat $ZOOKEEPER_HOME/logs/zookeeper-hadoop103-server-hadoop103.out</code>，就是logs下的.out文件，你的路径可能和我不一样哦）：</p><p>如果报错内容类似：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">org.apache.zookeeper.server.quorum.QuorumPeerConfig<span class="variable">$ConfigException</span>: Address unresolved: hadoop105:3888</span><br><span class="line">at org.apache.zookeeper.server.quorum.QuorumPeer<span class="variable">$QuorumServer</span>.initializeWithAddressString(QuorumPeer.java:358)</span><br><span class="line">at org.apache.zookeeper.server.quorum.QuorumPeer<span class="variable">$QuorumServer</span>.&lt;init&gt;(QuorumPeer.java:279)</span><br><span class="line">at org.apache.zookeeper.server.quorum.QuorumPeer<span class="variable">$QuorumServer</span>.&lt;init&gt;(QuorumPeer.java:274)</span><br><span class="line">at org.apache.zookeeper.server.quorum.flexible.QuorumMaj.&lt;init&gt;(QuorumMaj.java:92)</span><br><span class="line">at org.apache.zookeeper.server.quorum.QuorumPeerConfig.createQuorumVerifier(QuorumPeerConfig.java:658)</span><br><span class="line">at org.apache.zookeeper.server.quorum.QuorumPeerConfig.parseDynamicConfig(QuorumPeerConfig.java:689)</span><br><span class="line">at org.apache.zookeeper.server.quorum.QuorumPeerConfig.setupQuorumPeerConfig(QuorumPeerConfig.java:663)</span><br><span class="line">at org.apache.zookeeper.server.quorum.QuorumPeerConfig.parseProperties(QuorumPeerConfig.java:491)</span><br><span class="line">at org.apache.zookeeper.server.quorum.QuorumPeerConfig.parse(QuorumPeerConfig.java:194)</span><br><span class="line">at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:125)</span><br><span class="line">at org.apache.zookeeper.server.quorum.QuorumPeerMain.main(QuorumPeerMain.java:91)</span><br><span class="line">Invalid config, exiting abnormally</span><br><span class="line">2023-01-30 04:20:57,810 [myid:] - INFO  [main:ZKAuditProvider@42] - ZooKeeper audit is disabled.</span><br><span class="line">2023-01-30 04:20:57,811 [myid:] - ERROR [main:ServiceUtils@48] - Exiting JVM with code 2</span><br></pre></td></tr></table></figure><p>即表示可能是zoo.cfg配置文件出错了。</p><p>需要把后面的空格都删除掉，我是多加了空格。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">####################### cluster ########################## </span></span><br><span class="line">server.3=hadoop103:2888:3888</span><br><span class="line">server.4=hadoop104:2888:3888</span><br><span class="line">server.5=hadoop105:2888:3888</span><br></pre></td></tr></table></figure><p>就是这一步。</p><p>修改完配置文件，单独分发配置文件：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xsync <span class="variable">$ZOOKEEPER_HOME</span>/conf/zoo.cfg</span><br></pre></td></tr></table></figure><hr><p>如果日志文件类似：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">org.apache.zookeeper.server.quorum.QuorumPeerConfig<span class="variable">$ConfigException</span>: Error processing /usr/local/zookeeper/bin/../conf/zoo.cfg</span><br><span class="line">at org.apache.zookeeper.server.quorum.QuorumPeerConfig.parse(QuorumPeerConfig.java:198)</span><br><span class="line">at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:125)</span><br><span class="line">at org.apache.zookeeper.server.quorum.QuorumPeerMain.main(QuorumPeerMain.java:91)</span><br><span class="line">Caused by: java.lang.IllegalArgumentException: myid file is missing</span><br><span class="line">at org.apache.zookeeper.server.quorum.QuorumPeerConfig.checkValidity(QuorumPeerConfig.java:796)</span><br><span class="line">at org.apache.zookeeper.server.quorum.QuorumPeerConfig.setupQuorumPeerConfig(QuorumPeerConfig.java:667)</span><br><span class="line">at org.apache.zookeeper.server.quorum.QuorumPeerConfig.parseProperties(QuorumPeerConfig.java:491)</span><br><span class="line">at org.apache.zookeeper.server.quorum.QuorumPeerConfig.parse(QuorumPeerConfig.java:194)</span><br><span class="line">... 2 more</span><br><span class="line">Invalid config, exiting abnormally</span><br><span class="line">2023-01-30 07:49:35,165 [myid:] - INFO  [main:ZKAuditProvider@42] - ZooKeeper audit is disabled.</span><br><span class="line">2023-01-30 07:49:35,166 [myid:] - ERROR [main:ServiceUtils@48] - Exiting JVM with code 2</span><br></pre></td></tr></table></figure><p>可知是找不到myid。请前找一下<code>$ZOOKEEPER_HOME/zkData</code>下是否有<code>myid</code>文件.如果没有则创建，如果有也有可能是没有内容。</p><p>如果有内容还是会报错，那就是zoo.cfg中单dataDir配置的路径有问题，请去修改。</p><p>修改完配置文件，单独分发配置文件：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xsync <span class="variable">$ZOOKEEPER_HOME</span>/conf/zoo.cfg</span><br></pre></td></tr></table></figure><hr><p>如果是：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error: Could not find or load main class org.apache.zookeeper.server.quorum.QuorumPeerMain</span><br></pre></td></tr></table></figure><p>那么可能是端口冲突，请考虑你的zookeeper的版本。</p><p>如果版本&gt;=3.5.0可能是端口冲突引起的。在zoo.cfg中添加（或修改）:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># admin port</span></span><br><span class="line">admin.serverPort=8081</span><br></pre></td></tr></table></figure><p>如果都试过了，且版本&gt;=3.5.5，则请降低版本。或者重新下载。因为版本&gt;=3.5.5时，官网首页会提供两个安装路径：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/zookeeper_version3.jpeg" alt="安装包"></p><p>一定要选择第一个，标准版的，不要下载源码版。</p>]]></content>
      
      
      <categories>
          
          <category> 大数据基础环境 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Hadoop </tag>
            
            <tag> 大数据 </tag>
            
            <tag> Zookeeper </tag>
            
            <tag> 集群 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搭建Zookeeper集群</title>
      <link href="/posts/983786067.html"/>
      <url>/posts/983786067.html</url>
      
        <content type="html"><![CDATA[<h1 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h1><p>首先搭建Zookeeper是在Linux上进行搭建的，并且我这里介绍的是基于我之前搭建好了的Hadoop集群，继续搭建的Zookeeper集群。也就是说您需要有Hadoop集群的基础才能和我的对应。</p><p>也不过多赘述关于IP，JDK等的基础环境问题了。</p><p>我的hadoop集群：</p><div class="table-container"><table><thead><tr><th></th><th>1号服务器</th><th>2号服务器</th><th>3号服务器</th></tr></thead><tbody><tr><td>name</td><td>hadoop103</td><td>hadoop103</td><td>hadoop103</td></tr><tr><td>IP</td><td>192.168.64.103</td><td>192.168.64.104</td><td>192.168.64.105</td></tr><tr><td>HDFS</td><td>NameNode、DataNode</td><td>DataNode</td><td>SecondaryNameNode、DataNode</td></tr><tr><td>YARN</td><td>NodeManager</td><td>ResourceManager、NodeManager</td><td>NodeManager</td></tr></tbody></table></div><p>如果您和我不一样，您大概要知道，我的hadoop103对应的是您的哪个节点…</p><h1 id="下载Zookeeper"><a href="#下载Zookeeper" class="headerlink" title="下载Zookeeper"></a>下载Zookeeper</h1><p>需要安装什么版本的Zookeeper？</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/zookeeper_version.png" alt="版本描述" style="zoom:50%;" /></p><p>根据官网描述，我们下载版本越新越好。</p><blockquote><p>您已经有了hadoop的下载基础了，在Ubuntu里直接下载或是你主机浏览器中下载好再传到虚拟机你应该都了解了，不过多赘述。</p></blockquote><p>官网地址<a href="https://zookeeper.apache.org/">https://zookeeper.apache.org/</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/zookeeper_download.png" alt="地址页面" style="zoom: 40%;" /></p><p>可以自己选择对应版本下载，我下载的是3.7.1版本（我访问网站时的最新稳当版本），下载地址（可直达）：<a href="https://archive.apache.org/dist/zookeeper/zookeeper-3.7.1/">https://archive.apache.org/dist/zookeeper/zookeeper-3.7.1/</a></p><p>如图：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/zookeeper_download2.png" alt="下载界面" style="zoom:50%;" /></p><p>点击 apache-zookeeper-3.7.1-bin.tar.gz 。点击即可下载。</p><p>下载完成后，移动到<code>/usr/local</code>目录下，过程于hadoop压缩包移动类似。</p><h1 id="Zookeeper安装"><a href="#Zookeeper安装" class="headerlink" title="Zookeeper安装"></a>Zookeeper安装</h1><blockquote><p>这里只在hadoop103搭建就好了，zookeeper安装包可以用集群分发脚本发到两台从机上。</p></blockquote><h2 id="安装前准备"><a href="#安装前准备" class="headerlink" title="安装前准备"></a>安装前准备</h2><ol><li><p>JDK（估计你安装好了，如果没有安装好，请参看：<a href="/posts/1141628095.html" title="搭建Hadoop环境">搭建Hadoop环境</a>）</p></li><li><p>下载Zookeeper安装包，弄到<code>/usr/local</code>目录下</p></li><li><p>解压安装包</p><ul><li><p>如果是 .tar.gz 后缀，则输入命令：</p>  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxf apache-zookeeper-3.7.1-bin.tar.gz -C /usr/local/</span><br></pre></td></tr></table></figure></li><li><p>如果是 .tar 后缀，则输入命令：</p>  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xf apache-zookeeper-3.7.1-bin.tar.gz -C /usr/local/</span><br></pre></td></tr></table></figure></li></ul></li><li><p>修改安装包名称</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> apache-zookeeper-3.7.1-bin zookeeper</span><br></pre></td></tr></table></figure></li><li><p>配置zookeeper家目录</p><p> 这不需要，我只是为了方便：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bashrc</span><br></pre></td></tr></table></figure><p> 输入 i 进入编辑模式，在上面添加：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> ZOOKEEPER_HOME=/usr/local/zookeeper</span><br></pre></td></tr></table></figure><p> 刷新资源：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure><p> 这样之后就可以<code>cd $ZOOKEEPER_HOME</code>就跳转到<code>/usr/local/zookeeper</code>。不用担心长，输入<code>$ZOOK</code>直接按Tab键就能补全，这个是Linux的代码补全，只要没有重复的配置，你输入<code>$Z</code>都能按Tab补全了。</p><p> 并且以后如果zookeeper目录位置改变了，只需要改变环境变量文件中的这一处，不用到处改变。</p></li></ol><p>准备工作完成的效果：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/zookeeper_praper.png" alt="完成的效果" style="zoom:50%;" /></p><h2 id="配置修改"><a href="#配置修改" class="headerlink" title="配置修改"></a>配置修改</h2><ol><li><p>将<code>$ZOOKEEPER_HOME/conf</code>目录下的<code>zoo_sample.cfg</code>修改为<code>zoo.cfg</code>：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> <span class="variable">$ZOOKEEPER_HOME</span>/conf/zoo_sample.cfg  <span class="variable">$ZOOKEEPER_HOME</span>/conf/zoo.cfg</span><br></pre></td></tr></table></figure></li><li><p>打开zoo.cfg并求改dataDir的路径：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="variable">$ZOOKEEPER_HOME</span>/conf/zoo.cfg <span class="comment"># 打开</span></span><br></pre></td></tr></table></figure><p> 按 i 编辑，修改如下内容：</p><p> 将原本的<code>dataDir=/tmp/zookeeper</code>,修改为：<code>dataDir=/usr/local/zookeeper/zkData</code></p><p> 其他zoo.cfg的配置参数如果后续也没有提到，您有需要请自行配置。</p></li><li><p>创建zkData目录</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> <span class="variable">$ZOOKEEPER_HOME</span>/zkData</span><br></pre></td></tr></table></figure></li></ol><p>到这里其实就配置好了单机了。</p><h2 id="操作Zookeeper"><a href="#操作Zookeeper" class="headerlink" title="操作Zookeeper"></a>操作Zookeeper</h2><p>这里也算是在做测试：</p><p>如果你在zookeeper根目录下，就可以不输入$ZOOKEEPER_HOME</p><ol><li><p>启动Zookeeper</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ZOOKEEPER_HOME</span>/bin/zkServer.sh start</span><br></pre></td></tr></table></figure></li><li><p>查看是否启动</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jps</span><br></pre></td></tr></table></figure><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/zookeeper_test1.png" alt="查看是否启动" style="zoom: 67%;" /></p></li><li><p>查看状态</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ZOOKEEPER_HOME</span>/bin/zkServer.sh status</span><br></pre></td></tr></table></figure><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/zookeeper_test2.png" alt="查看状态" style="zoom:50%;" /></p></li><li><p>启动客户端</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ZOOKEEPER_HOME</span>/bin/zkCli.sh</span><br></pre></td></tr></table></figure></li><li><p>退出客户端</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">quit</span><br></pre></td></tr></table></figure></li><li><p>停止（关闭）Zookeeper</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ZOOKEEPER_HOME</span>/bin/zkServer.sh stop </span><br></pre></td></tr></table></figure></li></ol><hr><h1 id="集群安装"><a href="#集群安装" class="headerlink" title="集群安装"></a>集群安装</h1><h2 id="集群规划"><a href="#集群规划" class="headerlink" title="集群规划"></a>集群规划</h2><p>三个节点：</p><p>hadoop103、hadoop104、hadoop105</p><p>这里不区分主机和从机，也不特别区分分工。</p><h2 id="配置服务器编号"><a href="#配置服务器编号" class="headerlink" title="配置服务器编号"></a>配置服务器编号</h2><p>还是在hadoop103上操作：</p><p>在<code>$ZOOKEEPER_HOME/zkData</code>目录下创建一个<code>myid</code>文件（注意，源码中只读取这个文件，除非你去改源码，否则只能是这个文件名）</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> <span class="variable">$ZOOKEEPER_HOME</span>/zkData/myid</span><br></pre></td></tr></table></figure><p>编辑文件：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="variable">$ZOOKEEPER_HOME</span>/zkData/myid</span><br></pre></td></tr></table></figure><p>写入一个数字就行了，故名思义，myid就是说我这个节点的编号，未来方便记，我这个hadoop103，就写的3；后面hadoop104的这里写4；hadoop105的这里写5。等脚本分发过去之后再改。</p><h2 id="配置zoo-cfg文件"><a href="#配置zoo-cfg文件" class="headerlink" title="配置zoo.cfg文件"></a>配置zoo.cfg文件</h2><p>打开文件：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="variable">$ZOOKEEPER_HOME</span>/conf/zoo.cfg</span><br></pre></td></tr></table></figure><p>新增配置（在文件最下面）：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">####################### cluster ########################## </span></span><br><span class="line">server.3=hadoop103:2888:3888</span><br><span class="line">server.4=hadoop104:2888:3888</span><br><span class="line">server.5=hadoop105:2888:3888</span><br></pre></td></tr></table></figure><p>解释一下：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server.A=B:C:D</span><br></pre></td></tr></table></figure><ul><li>A是一个数字，表示这个是第几号服务器；对应集群模式下配置的一个文件myid里的内容，这个文件在dataDir目录下，这个文件里面有一个数据就是A的值，Zookeeper启动时读取此文件，拿到里面的数据与zoo.cfg里面的配置信息比较从而判断到底是哪个server。</li><li>B是这个服务器的地址；也就是该服务器的hostname或IP地址。</li><li>C是这个服务器Follower与集群中的Leader服务器交换信息的端口； </li><li>D是万一集群中的Leader服务器挂了，需要一个端口来重新进行选举，选出一个新的Leader，而这个端口就是用来执行选举时服务器相互通信的端口。 </li></ul><p>3.5.0以上的zookeeper提供了一个内嵌的Jetty容器来运行 AdminServer，默认占用的是 8080端口，AdminServer 主要是来查看 Zookeeper 的一些状态，如果机器上有其他程序（比如：Tomcat）占用了 8080 端口，会出现冲突，所以我添加你配置项：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># admin port</span></span><br><span class="line">admin.serverPort=8081</span><br></pre></td></tr></table></figure><p>把端口改到了8081。</p><h2 id="分发zookeeper"><a href="#分发zookeeper" class="headerlink" title="分发zookeeper"></a>分发zookeeper</h2><blockquote><p>如果您还没有编写集群分发脚本，请参看：<a href="/posts/3772089482.html" title="集群分发脚本">集群分发脚本</a></p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xsync <span class="variable">$ZOOKEEPER_HOME</span></span><br></pre></td></tr></table></figure><p>然后分别去修改hadoop104和hadoop105的myid文件，和上面的修改方式一样，不赘述了。</p><p>值得一提的是，集群分发脚本是同步，如果未来zoo.cfg改变了，可不能再分发 <code>$ZOOKEEPER_HOME</code>了，应该单独分发<code>zoo.cfg</code>否则又得重新配置myid文件（因为分发之后myid的内容同步了）。</p><p>如果这一步报错，提到了：<code>Permission denied</code>那就是权限不够，不能在hadoop104和hadoop105上的<code>/usr/local</code>目录下创建文件夹zookeeper。解决办法：先在两台服务器上创建好zookeeper文件夹，并修改拥有者。</p><p>注意，前面配置Zookeeper的家目录了的，注意后面两台也要配置。这里不建议<code>xsync ~/.bashrc</code>因为hadoop103上可能有些Hadoop103特有的配置。所以就另外两台单独加上配置就好了。<a href="#安装前准备">安装前准备</a>的第5点。</p><h2 id="操作Zookeeper集群"><a href="#操作Zookeeper集群" class="headerlink" title="操作Zookeeper集群"></a>操作Zookeeper集群</h2><p>也算是检查后集群搭建是否成功。</p><p>分别启动zookeeper和查看状态</p><p>这里暂时没法一台控制三台一起启动，所以进入每台服务器都要执行一下这个命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ZOOKEEPER_HOME</span>/bin/zkServer.sh start</span><br></pre></td></tr></table></figure><p>三台都启动了之后再分别查看状态：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ZOOKEEPER_HOME</span>/bin/zkServer.sh status</span><br></pre></td></tr></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/zookeeper_status.png" alt="状态"></p><p>可以看到hadoop104的Mode是leader，其他两个（hadoop103和hadoop105）是follower。这种就是对的，即一leader多follower。</p><p>如果启动过程报错了，请参看：<a href="/posts/1571776361.html" title="搭建Zookeeper集群常见问题">搭建Zookeeper集群常见问题</a></p><h1 id="Zookeeper-集群启停脚本"><a href="#Zookeeper-集群启停脚本" class="headerlink" title="Zookeeper 集群启停脚本"></a>Zookeeper 集群启停脚本</h1><p>上面启动zookeeper服务，很麻烦，还要专门到几个服务器来启动。下面编写zookeeper集群启停脚本，和Hadoop的类似：</p><p>在</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim zk</span><br></pre></td></tr></table></figure><p>其实直接vim，如果没有的文件会自动创建。</p><p>编写内容：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line"><span class="string">&quot;start&quot;</span>)&#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> hadoop103 hadoop104 hadoop105</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> ---------- zookeeper <span class="variable">$i</span> 启动 ------------</span><br><span class="line">        ssh <span class="variable">$i</span> <span class="string">&quot;<span class="variable">$ZOOKEEPER_HOME</span>/bin/zkServer.sh start&quot;</span>  </span><br><span class="line">    <span class="keyword">done</span> </span><br><span class="line">&#125;;;</span><br><span class="line"><span class="string">&quot;stop&quot;</span>)&#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> hadoop103 hadoop104 hadoop105</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> ---------- zookeeper <span class="variable">$i</span> 停止 ------------</span><br><span class="line">    ssh <span class="variable">$i</span> <span class="string">&quot;<span class="variable">$ZOOKEEPER_HOME</span>/bin/zkServer.sh stop&quot;</span>  </span><br><span class="line">    <span class="keyword">done</span> </span><br><span class="line">&#125;;; </span><br><span class="line"><span class="string">&quot;status&quot;</span>)&#123;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> hadoop103 hadoop104 hadoop105</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> ---------- zookeeper <span class="variable">$i</span> 状态 ------------</span><br><span class="line">ssh <span class="variable">$i</span> <span class="string">&quot;<span class="variable">$ZOOKEEPER_HOME</span>/bin/zkServer.sh status&quot;</span>  </span><br><span class="line"><span class="keyword">done</span> </span><br><span class="line">&#125;;;</span><br><span class="line"><span class="keyword">esac</span> </span><br></pre></td></tr></table></figure><p>增加脚本执行权限：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x zk</span><br></pre></td></tr></table></figure><p>使用：</p><ol><li><p>启动集群：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zk start</span><br></pre></td></tr></table></figure></li><li><p>查看集群状态：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zk status</span><br></pre></td></tr></table></figure></li><li><p>关闭集群：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zk stop</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> 大数据基础环境 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Hadoop </tag>
            
            <tag> 大数据 </tag>
            
            <tag> Zookeeper </tag>
            
            <tag> 集群 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hadoop集群搭建指南</title>
      <link href="/posts/4177218757.html"/>
      <url>/posts/4177218757.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>搭建的集群为伪分布式集群。并且是基础的hadoop，而不包括生态的其他服务（后续会跟进的）。有三台机器，常将配置有NameNode节点的机器叫做主机，另外两台叫做从机。这里的主机是指集群中的三台虚拟机的主机。但我大多数情况描述的主机都是指您的Windows系统或Mac系统。请您注意区分。</p></blockquote><p>为了少出问题，您的搭建过程请尽量和我一样（包括用户名、主机名、静态IP），但是您自己能区分与我的内容对应便可不必。</p><p>为了稳妥起见，不论您先前收否执行过一些步骤，请按照流程，浏览一遍文章。</p><p>如果文章出现问题欢迎在评论区留言，如果您遇到了问题也可以在评论区看看。</p><hr><ol><li>如果还没有安装配置虚拟机，可以参看<a href="/posts/694347442.html" title="UTM安装配置Ubuntu">UTM安装配置Ubuntu</a>。如果你是MacOS可以完全照做；如果是Windows，那么安装过程不适合你，Windows下一般使用VMware，而不是UTM。但是在配置Ubuntu的时候就一样了，因为Ubuntu与外部的操作系统无关。<br>如果您是Windows，您可以自行找文章了。这里的关键点是静态IP，最好配置上静态IP。</li><li>如果您使用的以前的虚拟机，但是想要和我的用户名、主机名一致，请参看<a href="/posts/820223701.html" title="修改Ubuntu用户名、密码和主机名">修改Ubuntu用户名、密码和主机名</a>。</li><li>估计您还没有hadoop环境，参看<a href="/posts/1141628095.html" title="搭建Hadoop环境">搭建Hadoop环境</a>,hadoop先下载到您的主机就行了，两台从机之后有处理办法。</li><li>接下来就是介绍集群搭建的一些辅助配置了。请参看：<a href="/posts/3772089482.html" title="集群分发脚本">集群分发脚本</a>。虽然文章名叫集群分发脚本，当内容设计到ssh免密登录和hosts端口映射都是重要内容。</li><li>准备工作做完了，开始搭建集群，请参看：<a href="/posts/1271036369.html" title="搭建Hadoop集群">搭建Hadoop集群</a>.这里就是仔细配置五个配置文件就好了。</li><li>这一步是检测您的Hadoop集群启动后能否访问web服务的。也是想您介绍hadoop集群配置好后的web服务端口。如果您觉得需要请参看：<a href="/posts/4130790367.html" title="hadoop常用端口号">hadoop常用端口号</a>。</li><li>如果您在搭建过程中遇到了问题，这可能是我最开始搭建出的一点纰漏，请参看：<a href="/posts/2075104059.html" title="搭建hadoop集群常见问题">搭建hadoop集群常见问题</a>。如果这里面也没有您出的错，请仔细比对一下是否按照我的描述配置完前面的全部内容。要注意有些配置我是专门说了三台机器是都要处理的哦，其中脚本分发指令只用于hadoop目录了，其他的ssh，hosts，环境变量等都是每台机器都需要配置的哦。</li></ol><p>祝您一切顺利💪🏻 您也可以浏览我博客的其他内容，可以通过留言板或评论和我交流。很高兴能认识您🥳。</p><p>文章这么多字，这么细致（虽然可能会有些错别字🧐）但是还是很辛苦的，麻烦您大发慈悲，给我打赏一点吧，不在于多少，而在于心意🤪。</p>]]></content>
      
      
      <categories>
          
          <category> 大数据基础环境 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Hadoop </tag>
            
            <tag> 大数据 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搭建hadoop集群常见问题</title>
      <link href="/posts/2075104059.html"/>
      <url>/posts/2075104059.html</url>
      
        <content type="html"><![CDATA[<h1 id="hadoop压缩包移动到-usr-local-目录下失败"><a href="#hadoop压缩包移动到-usr-local-目录下失败" class="headerlink" title="hadoop压缩包移动到/usr/local/目录下失败"></a>hadoop压缩包移动到/usr/local/目录下失败</h1><p>这应该是<code>/usr/local</code>属于管理员，用户没有权限，网上有坑人的办法：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> -R 777 /usr/local</span><br></pre></td></tr></table></figure><p>甚至有人：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> -R 777 /usr</span><br></pre></td></tr></table></figure><p>这完全是坑人的做法，<code>-R</code>表示递归执行，即<code>/usr</code>目录下的所有文件夹、文件都改成了777的权限。那么你以后就再也不能用sudo、su命令了。</p><p>最好的做法是创建一个文件夹作为中转站：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">mkdir</span> /usr/local/hadoop</span><br></pre></td></tr></table></figure><p>这个新建的hadoop文件夹就是中转站。</p><p>然后改变该文件夹的拥有者：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chown</span> hadoop103 /usr/local/hadoop</span><br></pre></td></tr></table></figure><p>即可正常传过来了。</p><p>然后再移动位置…</p><h1 id="开启集群服务时报权限不足的错"><a href="#开启集群服务时报权限不足的错" class="headerlink" title="开启集群服务时报权限不足的错"></a>开启集群服务时报权限不足的错</h1><p>产生这个问题的原因可能是ssh登录自己仍然需要密码。请检查一下：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh localhost</span><br></pre></td></tr></table></figure><p>如果需要输入密码，则：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure><p>即给自己一把公钥。如果您还没有公钥，请：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure><p>生成公钥，然后在执行上一步给自己公钥。</p><p>当然也有可能是自己的公钥没有给某台服务器，自行检查，然后递交</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id 目标IP</span><br></pre></td></tr></table></figure><h1 id="集群中有一个或两个节点的服务没有启动"><a href="#集群中有一个或两个节点的服务没有启动" class="headerlink" title="集群中有一个或两个节点的服务没有启动"></a>集群中有一个或两个节点的服务没有启动</h1><p>多半是workers文件有问题，请前去修改。</p><p>如果三个都没启动，这是集群启动脚本出现问题了（或者是集群配置）。</p><p>也有可能是没有配置<code>$HADOOP_HOME</code>就使用脚本了，脚本里有这个内容，需要先配置hadoop的环境变量。</p><h1 id="启动服务时，Yarn的NodeManager服务没有启动"><a href="#启动服务时，Yarn的NodeManager服务没有启动" class="headerlink" title="启动服务时，Yarn的NodeManager服务没有启动"></a>启动服务时，Yarn的NodeManager服务没有启动</h1><p>其他的服务全都正常启动了，唯独Yarn的NodeManager一个没有启动。这种情况可能有两种原因：</p><ol><li>配置文件写得有问题，稳妥起见请检查所有配置文件（配置的那4个），也有可能是两个节点的服务器的文件内容不一致，请利用分发脚本统一。</li><li>权限问题，请参看上述第一点，克隆公钥给自己</li></ol><h1 id="关闭Yarn有WARNING"><a href="#关闭Yarn有WARNING" class="headerlink" title="关闭Yarn有WARNING"></a>关闭Yarn有WARNING</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hadoop105: WARNING: nodemanager did not stop gracefully after 5 seconds: Trying to <span class="built_in">kill</span> with <span class="built_in">kill</span> -9</span><br><span class="line">hadoop103: WARNING: nodemanager did not stop gracefully after 5 seconds: Trying to <span class="built_in">kill</span> with <span class="built_in">kill</span> -9</span><br></pre></td></tr></table></figure><p>这个是服务器安全高产生的，其实不用管。如果输入：<code>jpsall</code>看到NodeManager服务已经关闭了，就不用管了，如果没有关闭则单独关闭一次Yarn即可：<code>$HADOOP_HOME/sbin/stop-yarn.sh</code></p><p>没有用的话就开启hdfs在关闭yarn（因为一般是要求是先关闭yarn再关闭hdfs）</p><h1 id="访问Web网站相关问题"><a href="#访问Web网站相关问题" class="headerlink" title="访问Web网站相关问题"></a>访问Web网站相关问题</h1><p>Hadoop集群正常启动（<code>jpsall</code>该启动的服务全都启动了），但是还是无法浏览器访问。</p><p>例如：无法访问hadoop103:9870。</p><h2 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h2><p>检查虚拟机防火墙是否关闭：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld</span><br></pre></td></tr></table></figure><p>正常情况，如果是跟着我走的流程的话应该是连这个防火墙服务都没有的。</p><p>如果确实是防火墙没关，则：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service</span><br></pre></td></tr></table></figure><p>其实主机能够 ping 通虚拟机，就说明了虚拟机的防火墙是关闭状态。</p><h2 id="hosts映射"><a href="#hosts映射" class="headerlink" title="hosts映射"></a>hosts映射</h2><p>您有可能没有编写hosts映射（Windows或Mac中），查看：</p><p>如果将hadoop103改为192.168.64.103 。即改为IP，访问：192.168.64.103:9870，成功访问，则就是hosts配置错误。</p><p>在主机中输入：<code>vim /etc/hosts</code>查看是否正确映射。如果是Windows，则在<code>C:\Windows\System32\drivers\etc</code>下。</p><p>如果不正确则修改，或者没有配置则添加。</p><p>正确格式为：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">IP hadoop10x</span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line">192.168.64.103 hadoop103</span><br></pre></td></tr></table></figure><p>主机检查完了，再挨个检查三台虚拟机是否也正确配置了hosts。</p><h2 id="检查hdfs配置文件是否配好"><a href="#检查hdfs配置文件是否配好" class="headerlink" title="检查hdfs配置文件是否配好"></a>检查hdfs配置文件是否配好</h2><p>正确内容（注意看value内的内容是否正确，是否和你的hosts映射一样）：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;?xml-stylesheet <span class="built_in">type</span>=<span class="string">&quot;text/xsl&quot;</span> href=<span class="string">&quot;configuration.xsl&quot;</span>?&gt;</span><br><span class="line"></span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;!-- nn web 端访问地址--&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;dfs.namenode.http-address&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;hadoop103:9870&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;!-- 2nn web 端访问地址--&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;hadoop105:9868&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><h2 id="不确定的情况"><a href="#不确定的情况" class="headerlink" title="不确定的情况"></a>不确定的情况</h2><p>这个我其实也没拿捏到位：</p><p>我发现/etc/hosts发现第二行是：127.0.1.1 hadoop103，如图：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop_IP.png" alt="配置端口号" style="zoom:33%;" /></p><p>然后我ping localhost是ping的127.0.0.1。然后ping hadoop103 ping的是127.0.1.1 。然后我把第二行这个删掉了，再启动集群就可以正常访问了。</p><p>我有这个想法是看到一片文章将hadoop103:9870改成0.0.0.0:9870就成功了，根据0.0.0.0的特性，我大概就猜到了配置文件最后启动的hadoop103应该是不我配置的静态IP，而是127.0.0.1 。</p><p>我目前是把三台虚拟机的第二行都删除了。</p><p>我也不太清楚删除这个第二行会不会有什么影响，因为它是默认就有的内容，我总感觉好像不能轻易删除。如果有友友知道删除会出现什么问题，麻烦提醒下我。如果可以用其他办法解决也提醒下我。</p>]]></content>
      
      
      <categories>
          
          <category> 大数据基础环境 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Hadoop </tag>
            
            <tag> 大数据 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hadoop常用端口号</title>
      <link href="/posts/4130790367.html"/>
      <url>/posts/4130790367.html</url>
      
        <content type="html"><![CDATA[<h1 id="常用端口号列举"><a href="#常用端口号列举" class="headerlink" title="常用端口号列举"></a>常用端口号列举</h1><p>HDFS NameNode 内部通常端口：8020/9000/9820<br>HDFS NameNode 对用户的查询端口：9870<br>Yarn查看任务运行情况的：8088<br>历史服务器：19888</p><h1 id="具体访问演示"><a href="#具体访问演示" class="headerlink" title="具体访问演示"></a>具体访问演示</h1><blockquote><p>可能会出现问题，如果出现了问题请参看：<a href="/posts/2075104059.html" title="搭建hadoop集群常见问题">搭建hadoop集群常见问题</a></p></blockquote><h2 id="web端查看HDFS的NameNode"><a href="#web端查看HDFS的NameNode" class="headerlink" title="web端查看HDFS的NameNode"></a>web端查看HDFS的NameNode</h2><p>浏览器访问：<a href="http://hadoop103:9870">http://hadoop103:9870</a> </p><p>注意我是配置了端口别名的，所以我可以hadoop103，如果了没配置，即把hadoop103替换为你hadoop103所在服务器的IP地址。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop103_9870.png" alt="查看NameNode效果"></p><p>如果没有配置静态IP或端口别名，可参看我博客里的文章（有介绍）。</p><p>查看2nn：<a href="http://hadoop105:9868">http://hadoop105:9868</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop105_9868.png" alt="查看2nn效果"></p><h2 id="Web-端查看-YARN-的-ResourceManager"><a href="#Web-端查看-YARN-的-ResourceManager" class="headerlink" title="Web 端查看 YARN 的 ResourceManager"></a>Web 端查看 YARN 的 ResourceManager</h2><p>浏览器访问：<a href="http://hadoop104:8088">http://hadoop104:8088</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop104_8088.png" alt="查看ResourceManage效果"></p><h2 id="查看JobHistory"><a href="#查看JobHistory" class="headerlink" title="查看JobHistory"></a>查看JobHistory</h2><p>浏览器访问：<a href="http://hadoop103:19888/jobhistory">http://hadoop103:19888/jobhistory</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop103_19888.png" alt="查看JobHistory效果"></p>]]></content>
      
      
      <categories>
          
          <category> 大数据基础环境 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Hadoop </tag>
            
            <tag> 大数据 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搭建Hadoop集群</title>
      <link href="/posts/1271036369.html"/>
      <url>/posts/1271036369.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>注意，这里搭建的是伪分布式模式。</p><p>伪分布式模式：也是单机运行，但是具备 Hadoop 集群的所有功能，一台服务器模<br>拟一个分布式的环境。</p><p>如果出现问题，可以去参看文章 <a href="/posts/2075104059.html" title="搭建hadoop集群常见问题">搭建hadoop集群常见问题</a><br><!-- > [搭建hadoop集群常见问题](2075104059) --></p></blockquote><h1 id="再造虚拟机"><a href="#再造虚拟机" class="headerlink" title="再造虚拟机"></a>再造虚拟机</h1><p>前面已经创建了一台虚拟机了，两种选择：</p><ol><li>选择直接克隆。由于涉及分发脚本等，虚拟机最好配置成静态IP（不配置其实也可以，只是未来IP改变后有部分东西会受影响）。克隆之后Hadoop和jdk等就都配置好了。注意克隆是在虚拟机软件（VMware、UTM）上右键虚拟机就可以克隆了。如果之前是手动配置的静态IP，需要去看看netplan文件(配置静态IP的那个文件)看看IP信息，多半都需要改改。</li><li>再按照前面的流程创建两台虚拟机（Hadoop可以先不安装，但是jdk要安装上），这种适合非手动配置静态IP的人。</li></ol><p>对了，配置的时候不要想着内存、核心数、硬盘数太大了，其实虚拟机用的内存不大，设置的是最大的内存，也就是三台机子同时高功耗执行任务才就会有达到（<del>能到那种程度基本就用的公司的服务器了，学习更不用担心</del>），核心数也是用的虚拟核心数，类似于线程数，一般也跑不满，硬盘就是最大硬盘了，Linux中可能只有主服务器占资源多一点，另外两台基本就是占用10GB左右硬盘，但是搭建好集群后，可能虚拟机总的硬盘要占到50GB左右，和512GB比起来问题也不大。</p><h1 id="Hadoop集群配置规划"><a href="#Hadoop集群配置规划" class="headerlink" title="Hadoop集群配置规划"></a>Hadoop集群配置规划</h1><div class="table-container"><table><thead><tr><th></th><th>1号服务器</th><th>2号服务器</th><th>3号服务器</th></tr></thead><tbody><tr><td>name</td><td>hadoop103</td><td>hadoop103</td><td>hadoop103</td></tr><tr><td>IP</td><td>192.168.64.103</td><td>192.168.64.104</td><td>192.168.64.105</td></tr><tr><td>HDFS</td><td>NameNode、DataNode</td><td>DataNode</td><td>SecondaryNameNode、DataNode</td></tr><tr><td>YARN</td><td>NodeManager</td><td>ResourceManager、NodeManager</td><td>NodeManager</td></tr></tbody></table></div><blockquote><p> 1号服务器还要配置历史服务器：JobHistoryServer</p></blockquote><h1 id="集群分发脚本"><a href="#集群分发脚本" class="headerlink" title="集群分发脚本"></a>集群分发脚本</h1><p>未来避免每台服务器都执行相同操作，需要自行编写集群分发脚本，使得各服务器快速,方便地同步一些内容。</p><p>参看： <a href="/posts/3772089482.html" title="集群分发脚本">集群分发脚本</a><br><!-- [集群分发脚本](3772089482) --></p><h1 id="配置文件说明"><a href="#配置文件说明" class="headerlink" title="配置文件说明"></a>配置文件说明</h1><p>Hadoop 配置文件分两类：默认配置文件和自定义配置文件，只有用户想修改某一默认 配置值时，才需要修改自定义配置文件，更改相应属性值。</p><p>由于你可能和我的位置不太一样，那就统一把hadoop根目录配置到环境变量中：<code>vim ~/.bashrc</code>,添加内容（这在后面启停脚本中需要，请你务必配置这一项）：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#HADOOP_HOME</span></span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/usr/local/hadoop</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HADOOP_HOME</span>/bin</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HADOOP_HOME</span>/sbin</span><br></pre></td></tr></table></figure><p>刷新配置：<code>source ~/.bashrc</code>。之后就可以直接输入<code>cd $HADOOP_HOME</code>命令就可以跳转到hadoop的根目录<code>/ur/local/hadoop</code>下了。相当于是名词替换了。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop_setfiles.png" alt="相关配置文件" style="zoom:50%;" /></p><p>hadoop的配置文件都在<code>$HADOOP_HOME/etc/hadoop</code>目录下。</p><ol><li>默认配置文件</li></ol><pre><code>| 要获取的默认文件     | 文件存放在 Hadoop 的 jar 包中的位置                       || -------------------- | --------------------------------------------------------- || [core-default.xml]   | hadoop-common-3.3.1.jar/core-default.xml                  || [hdfs-default.xml]   | hadoop-hdfs-3.3.1.jar/hdfs-default.xml                    || [yarn-default.xml]   | hadoop-yarn-common-3.3.1.jar/yarn-default.xml             || [mapred-default.xml] | hadoop-mapreduce-client-core-3.3.1.jar/mapred-default.xml |</code></pre><ol><li><p>自定义配置文件</p><p> core-site.xml、hdfs-site.xml、yarn-site.xml、mapred-site.xml 四个配置文件存放在 <code>$HADOOP_HOME/etc/hadoop</code> 这个路径上，用户可以根据项目需求重新进行修改配置。我们后面进行的相关配置也是对这四个文件进行配置。</p></li><li><p>都是对应着核心配置文件core、hdfs配置文件、yarn配置文件、MapReduce配置文件。</p></li></ol><h1 id="配置集群"><a href="#配置集群" class="headerlink" title="配置集群"></a>配置集群</h1><blockquote><p>先都是在一号服务器（hadoop103）操作，之后利用分发脚本分发过去就行了，减少重复操作。</p></blockquote><p>进入配置文件目录：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$HADOOP_HOME</span>/etc/hadoop</span><br></pre></td></tr></table></figure><h2 id="核心配置文件"><a href="#核心配置文件" class="headerlink" title="核心配置文件"></a>核心配置文件</h2><p>配置 core-site.xml</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim core-site.xml # 前提是跳转到了 $HADOOP_HOME/etc/hadoop 目录下</span><br></pre></td></tr></table></figure><p>文件内容：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=<span class="string">&quot;text/xsl&quot;</span> href=<span class="string">&quot;configuration.xsl&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 指定 NameNode 的地址 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://hadoop103:8020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 指定 hadoop 数据的存储目录 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>/usr/local/hadoop/data<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 配置 HDFS 网页登录使用的静态用户为 hadoop103 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.http.staticuser.user<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop103<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如下：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop_core-site.png" alt="core-site" style="zoom:33%;" /></p><h2 id="HDFS配置文件"><a href="#HDFS配置文件" class="headerlink" title="HDFS配置文件"></a>HDFS配置文件</h2><p>配置hdfs-site.xml</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim hdfs-site.xml</span><br></pre></td></tr></table></figure><p>文件内容：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=<span class="string">&quot;text/xsl&quot;</span> href=<span class="string">&quot;configuration.xsl&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- nn web 端访问地址--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.http-address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop103:9870<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 2nn web 端访问地址--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.secondary.http-address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop105:9868<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如图：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop_hdfs_site.png" alt="hdfs-site" style="zoom:33%;" /></p><p>注意看端口，以后访问正确的端口.</p><h2 id="YARN配置文件"><a href="#YARN配置文件" class="headerlink" title="YARN配置文件"></a>YARN配置文件</h2><p>配置 yarn-site.xml</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim yarn-site.xml</span><br></pre></td></tr></table></figure><p>文件内容：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=<span class="string">&quot;text/xsl&quot;</span> href=<span class="string">&quot;configuration.xsl&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 指定 MR 走 shuffle --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 指定 ResourceManager 的地址--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop104<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 环境变量的继承 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.env-whitelist<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CO</span><br><span class="line">            NF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAP</span><br><span class="line">            RED_HOME<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 开启日志聚集功能 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation-enable<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 设置日志聚集服务器地址 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log.server.url<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>http://hadoop103:19888/jobhistory/logs<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 设置日志保留时间为 7 天 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation.retain-seconds<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>604800<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如图：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop_yarn_site.png" alt="yarn-site" style="zoom:33%;" /></p><p>3.2版本以上不需要配置环境变量了。</p><h2 id="MapReduce配置文件"><a href="#MapReduce配置文件" class="headerlink" title="MapReduce配置文件"></a>MapReduce配置文件</h2><p>配置mapred-site.xml</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim mapred-site.xml</span><br></pre></td></tr></table></figure><p>文件内容：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=<span class="string">&quot;text/xsl&quot;</span> href=<span class="string">&quot;configuration.xsl&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 指定 MapReduce 程序运行在 Yarn 上 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.app.mapreduce.am.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=/usr/local/hadoop<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.map.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=/usr/local/hadoop<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.reduce.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=/usr/local/hadoop<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 历史服务器端地址 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop103:10020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 历史服务器 web 端地址 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.webapp.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop103:19888<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如图：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop_mapred_site.png" alt="mapred-site" style="zoom:33%;" /></p><h2 id="配置workers"><a href="#配置workers" class="headerlink" title="配置workers"></a>配置workers</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim workers</span><br></pre></td></tr></table></figure><p>写入（默认里面有内容localhost，但是我的hadoop103对于的有localhost，所以我把localhost删掉了，写入下面内容）：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hadoop103</span><br><span class="line">hadoop104</span><br><span class="line">hadoop105</span><br></pre></td></tr></table></figure><p>配置文件写完了，可以再cat检查一下写得对不对。</p><hr><h2 id="分发Hadoop配置文件"><a href="#分发Hadoop配置文件" class="headerlink" title="分发Hadoop配置文件"></a>分发Hadoop配置文件</h2><p>利用集群分发脚本，如果还没有弄集群分发脚本请参看<a href="/posts/3772089482.html" title="集群分发脚本">集群分发脚本</a><br><!-- [集群分发脚本](3772089482). --></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xsync /usr/local/hadoop/etc/hadoop</span><br></pre></td></tr></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop_xsync1.png" alt="分发结果" style="zoom:33%;" /></p><h1 id="启动集群"><a href="#启动集群" class="headerlink" title="启动集群"></a>启动集群</h1><blockquote><p>没有特别说明都是在$HADOOP_HOME目录下执行命令。</p></blockquote><h2 id="第一次启动"><a href="#第一次启动" class="headerlink" title="第一次启动"></a>第一次启动</h2><p><b>如果集群是第一次启动</b>，需要在 hadoop103 节点格式化 NameNode（注意：格式化 NameNode，会产生新的集群 id，导致 NameNode 和 DataNode 的集群 id 不一致，集群找不到已往数据。如果集群在运行过程中报错，需要重新格式化 NameNode 的话，一定要先停止 namenode 和 datanode 进程，并且要删除所有机器的 data 和 logs 目录，然后再进行格式化。）</p><p>注意是集群启动之前初始化，如果启动了请先停止集群再执行命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs namenode -format</span><br></pre></td></tr></table></figure><p>初始化完毕会新生成两个文件夹，一个是data（hadoop的数据存储目录），另一个是logs（hadoop的日志存储目录）.</p><p><b>再提醒一遍：之后再执行namenode初始化命令要提前把data和logs删除，且停止集群</b></p><h2 id="正式启动"><a href="#正式启动" class="headerlink" title="正式启动"></a>正式启动</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sbin/start-dfs.sh</span><br></pre></td></tr></table></figure><p>关闭即为：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sbin/stop-dfs.sh</span><br></pre></td></tr></table></figure><h2 id="启动YARN"><a href="#启动YARN" class="headerlink" title="启动YARN"></a>启动YARN</h2><p>在配置了 ResourceManager 的节点启动，即hadoop104，输入下面命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sbin/start-yarn.sh</span><br></pre></td></tr></table></figure><p>关闭即为：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sbin/stop-yarn.sh</span><br></pre></td></tr></table></figure><h2 id="启动历史服务器"><a href="#启动历史服务器" class="headerlink" title="启动历史服务器"></a>启动历史服务器</h2><p>在hadoop103上启动</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mapred --daemon start historyserver</span><br></pre></td></tr></table></figure><p>查看历史服务器是否启动:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jps</span><br></pre></td></tr></table></figure><p>查看JobHistory:</p><p><a href="http://hadoop103:19888/jobhistory">http://hadoop103:19888/jobhistory</a></p><p>关闭即为：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mapred --daemon stop historyserver</span><br></pre></td></tr></table></figure><p>这样就启动成功了。</p><blockquote><p>注意启动和关闭顺序：</p><p>启动： dfs -&gt; yarn -&gt; historyserver</p><p>关闭；histroyserver -&gt; yarn -&gt; dfs</p></blockquote><hr><h1 id="封装集群启停脚本"><a href="#封装集群启停脚本" class="headerlink" title="封装集群启停脚本"></a>封装集群启停脚本</h1><blockquote><p>此脚本只包含HDFS、Yarn、Historyserver 。如果有其他服务，自行参照改写代码。</p></blockquote><p>作用：方便快速的启动和停止集群。</p><p>不用输入<code>sbin/start-dfs.sh</code>、<code>sbin/start-yarn.sh</code>等。</p><p>存放地址：</p><p><code>/home/hadoop/bin</code>这是自己编写的脚本的存放地。前面的xsync就是在这里面，这个文件路径也已经被添加进了环境变量。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/hadoop103/bin</span><br><span class="line">vim myhadoop</span><br></pre></td></tr></table></figure><p>写入脚本文件内容：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -lt 1 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;No Args Input...&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> ;</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line"><span class="string">&quot;start&quot;</span>)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; =================== 启动 hadoop 集群 ===================&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; --------------- 启动 hdfs ---------------&quot;</span></span><br><span class="line">    ssh hadoop103 <span class="string">&quot;<span class="variable">$HADOOP_HOME</span>/sbin/start-dfs.sh&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; --------------- 启动 yarn ---------------&quot;</span></span><br><span class="line">    ssh hadoop104 <span class="string">&quot;<span class="variable">$HADOOP_HOME</span>/sbin/start-yarn.sh&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; --------------- 启动 historyserver ---------------&quot;</span></span><br><span class="line">    ssh hadoop103 <span class="string">&quot;<span class="variable">$HADOOP_HOME</span>/bin/mapred --daemon start historyserver&quot;</span></span><br><span class="line">;;</span><br><span class="line"><span class="string">&quot;stop&quot;</span>)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; =================== 关闭 hadoop 集群 ===================&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; --------------- 关闭 historyserver ---------------&quot;</span></span><br><span class="line">    ssh hadoop103 <span class="string">&quot;<span class="variable">$HADOOP_HOME</span>/bin/mapred --daemon stop historyserver&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; --------------- 关闭 yarn ---------------&quot;</span></span><br><span class="line">    ssh hadoop104 <span class="string">&quot;<span class="variable">$HADOOP_HOME</span>/sbin/stop-yarn.sh&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; --------------- 关闭 hdfs ---------------&quot;</span></span><br><span class="line">    ssh hadoop103 <span class="string">&quot;<span class="variable">$HADOOP_HOME</span>/sbin/stop-dfs.sh&quot;</span></span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Input Args Error...&quot;</span></span><br><span class="line">;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure><p>其实内容很简单，就是先获取参数个数：<code>$#</code>；</p><ul><li><p>如果参数个数小于1（<code>if [ $# -lt 1]</code>），也就是没有参数，就输出提升说没有参数，然后结束脚本。</p></li><li><p>如果参数个数大于等于1，就执行下面的命令。</p><p>  直接就是一个switch-case判断参数是干嘛的，注意只判断第一个参数<code>$1</code>，如果是start就启动，启动就跳转到hadoop103中启动hdfs<code>ssh hadoop103 &quot;$HADOOP_HOME/sbin/start-dfs.sh&quot;</code>，然后启动yarn，跳转到hadoop104启动yarn<code>ssh hadoop104 &quot;$HADOOP_HOME/sbin/start-yarn.sh&quot;</code>。之后又跳转到hadoop103启动历史服务器功能<code>ssh hadoop103 &quot;$HADOOP_HOME/bin/mapred --daemon start historyserver&quot;</code>。</p></li></ul><p>关闭同理。</p><p>所以需要配置ssh免密登录，否则可能就报错，ssh免密登录请参看：<a href="/posts/3772089482.html" title="集群分发脚本">集群分发脚本</a><br><!-- [集群分发脚本](3772089482) --></p><h2 id="赋予脚本执行权限"><a href="#赋予脚本执行权限" class="headerlink" title="赋予脚本执行权限"></a>赋予脚本执行权限</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x myhadoop</span><br></pre></td></tr></table></figure><p>以后启动和关闭就简单了。</p><p>启动：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myhadoop start</span><br></pre></td></tr></table></figure><p>关闭：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myhadoop stop</span><br></pre></td></tr></table></figure><hr><h1 id="编写统一状态查看脚本"><a href="#编写统一状态查看脚本" class="headerlink" title="编写统一状态查看脚本"></a>编写统一状态查看脚本</h1><p>作用：一个命令，查看所有节点上的服务运行状态</p><p>原理：<code>jps</code>是查看一台节点上的服务运行状态命令。利用ssh跳转调用<code>jps</code>命令即可完成。很简答，有时间自己尝试写吧。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/hadoop103/bin</span><br><span class="line">vim jpsall</span><br></pre></td></tr></table></figure><p>编写脚本内容：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> host <span class="keyword">in</span> hadoop103 hadoop104 hadoop105</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> =============== <span class="variable">$host</span> ===============</span><br><span class="line">    ssh <span class="variable">$host</span> jps</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>赋予脚本执行权限：<code>chmod +x jpsall</code></p><h1 id="统一测试"><a href="#统一测试" class="headerlink" title="统一测试"></a>统一测试</h1><p>这里直接就可以测试.</p><p>测试包含以下内容：</p><ol><li>测试集群是否能正常启动，搭建是否正确</li><li>测试myhadoop集群启停脚本是否正常工作</li><li>测试jpsall统一状态查看脚本是否正常工作</li><li>脚本是否符合预期计划，将服务配置到对应服务器上</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myhadoop start</span><br></pre></td></tr></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/myhadoop_test.png" alt="测试统一启动脚本" style="zoom: 50%;" /></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jpsall</span><br></pre></td></tr></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/test_jpsall.png" alt="测试统一状态查看脚本" style="zoom: 64%;" /></p><p>注意对照我们前面的规划表<a href="#Hadoop集群配置规划">Hadoop集群配置规划</a>.查看服务是否启动，以及启动节点是否正确。</p><p>如果谨慎的话可以查看对应端口是否能正常访问，请参看<a href="/posts/4130790367.html" title="hadoop常用端口号">hadoop常用端口号</a>（这里常常会出现一点问题）。<br><!-- [hadoop常用端口号](4130790367) --></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myhadoop stop</span><br></pre></td></tr></table></figure><p>然后在jpsall查看一下，如果所有服务器都只剩jps一个服务了，就代表顺利关闭了。</p><p>如果有问题请参看：<a href="/posts/2075104059.html" title="搭建hadoop集群常见问题">搭建hadoop集群常见问题</a></p><!-- [搭建hadoop集群常见问题](2075104059) -->]]></content>
      
      
      <categories>
          
          <category> 大数据基础环境 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Hadoop </tag>
            
            <tag> 大数据 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>集群分发脚本</title>
      <link href="/posts/3772089482.html"/>
      <url>/posts/3772089482.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>注意分布式集群操作一定会用到ssh，所以要开启ssh服务。并且要网络能够互相ping通</p></blockquote><h1 id="scp-secure-copy-安全拷贝"><a href="#scp-secure-copy-安全拷贝" class="headerlink" title="scp(secure copy)安全拷贝"></a>scp(secure copy)安全拷贝</h1><blockquote><p>这部分是分发脚本的基础介绍。如果只是想快速搭建，这部分可跳过。</p></blockquote><ol><li><p>定义</p><p> 可以实现服务器于服务器之间的数据拷贝。（一个服务器中的数据拷贝给另一个服务器）</p></li><li><p>基本语法</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">scp     -r           $pdir/$fname $user@$host:$pdir/$fname</span><br><span class="line">命令名   递归方式执行   被拷贝的文件的用户名@主机，文件目录/文件名    接收的用户名@主机:存放目录/存放文件名</span><br><span class="line"></span><br><span class="line">如果是要拉取资源，也就是被拷贝文件是对方服务器，就将 $user@$host: 写在对象资源路径前：</span><br><span class="line">scp     -r           $user@$host:$pdir/$fname $pdir/$fname</span><br></pre></td></tr></table></figure></li><li><p>演练1</p><p> 将hadoop103的家目录下的a1.log(在家目录下新建一个：<code>touch ～/a1.log</code>)拷贝到hadoop105的家目录下</p><p> 被拷贝的文件：<code>/home/hadoop103/a1.log</code></p><p> 拷贝目标：<code>hadoop@192.168.64.105:/home/hadoop105/a1_copy.log</code></p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r /home/hadoop103/a1.<span class="built_in">log</span> hadoop105@192.168.64.105:/home/hadoop105/a1_copy.<span class="built_in">log</span></span><br></pre></td></tr></table></figure><p> 注意，执行之后回询问是否继续连接，输入yes后，回要求输入<strong>对方</strong>的密码，过程如下：</p><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/%E6%88%AA%E5%B1%8F2023-01-29%2010.05.56.png" alt="发送a1.log" style="zoom:50%;" /></p><p> 去hadoop105检查一下：</p><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/scp1.png" alt="验证发送成功" style="zoom:50%;" /></p><p> 可以看到已经移动过去了。</p></li><li><p>演练2</p><p> 演练一是发送的感觉，现在试试拉取（a1_copy.log），本地存储为a1.log</p><p> 把hadoop103下的a1.log删除掉<code>rm ~/a1.log</code></p><p> 在hadoop103下：</p><p> 数据来源的地方写的<code>hadoop105@192.168.10.105:/home/hadoop105/a1_copy.log</code></p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r hadoop105@192.168.64.105:/home/hadoop105/a1_copy.<span class="built_in">log</span> /home/hadoop103/a1.<span class="built_in">log</span></span><br></pre></td></tr></table></figure><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/scp2.png" alt="scp2" style="zoom:50%;" /></p><p> 如图即为成功。</p><h1 id="rsync远程同步指令"><a href="#rsync远程同步指令" class="headerlink" title="rsync远程同步指令"></a>rsync远程同步指令</h1><blockquote><p>这部分也是分发脚本的基础介绍。如果只是想快速搭建，这部分可跳过。</p></blockquote><ol><li><p>定义</p><p> 主要侧重在同步，意思是原本就有一部分数据，但是一方做出了变动，想要同步，这时候不需要再完全复制一份。</p><p> rsync 主要用于备份和镜像。具有速度快、避免复制相同内容和支持符号链接的优点。</p><p> rsync 和 scp 区别：用 rsync 做文件的复制要比 scp 的速度快，rsync 只对差异文件做更新。scp 是把所有文件都复制过去。</p></li><li><p>基本语法</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">rsync -av $pdir/$fname  $user@$host:$pdir/$fname</span><br><span class="line">命令名  选项参数   要拷贝的文件路径/名称 目的地用户@主机:目的地路径/名称</span><br><span class="line"></span><br><span class="line">如果是拷贝来源是对方,就给对方加 $user@$host: 就好了，（拉取资源时）：</span><br><span class="line">rsync -av $user@$host:$pdir/$fname  $pdir/$fname</span><br><span class="line"></span><br><span class="line">-a归档拷贝</span><br><span class="line">-v显示复制过程</span><br></pre></td></tr></table></figure></li><li><p>演练</p><p> 同步<code>/home/hadoop103</code>，只有hadoop103中才有a1.log文件（在hadoop104下操作）</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -a hadoop103@192.168.64.103:/home/hadoop103 /home/hadoop104</span><br></pre></td></tr></table></figure><p> 由于有-v命令回显示很多内容（显示很多内容不一定时全都拷贝了，只是显示出来了）。</p><p> 注意看输入的命令的路径是<code>/home/hadoop103</code>，因为a1.log在<code>/home/hadoop103</code>下。如果在<code>/home</code>下，会把对方整个<code>home</code>拉取拷贝到<code>/home/hadoop104</code>下，这个时候的结果实际上就是：<code>/home/hadoop104/hadoop103</code>就不是同步资源了，就完全是新拷贝了一份资源。</p></li></ol></li></ol><h1 id="配置SSH免密登录"><a href="#配置SSH免密登录" class="headerlink" title="配置SSH免密登录"></a>配置SSH免密登录</h1><blockquote><p>我们提到了集群会经常用ssh，每次使用都要使用密码会很麻烦，上面可以看出来的。下面就介绍配置免密登录</p></blockquote><p>这个是为之后的集群分发脚本打基础，有了这个会方便一些。</p><p>原理和<a href="/posts/4192183953.html" title="终端连接Ubuntu">终端连接Ubuntu</a>类似，可参看。</p><p>在hadoop103下操作：</p><ol><li><p>只要执行过ssh命令就会多出来一个.ssh目录，现在cd到.ssh目录，多产生一个公钥和一个密钥。</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure><p> 按三次回车即可：</p><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop_ssh1.png" alt="生成密钥" style="zoom:50%;" /></p><p> 在<code>～/.ssh</code>目录下会多生成两个文件，一个id_rsa是密钥，id_rsa.pub就是公钥。</p></li></ol><ol><li><p>然后将公钥拷贝到服务器:</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ./id_rsa.pub &gt;&gt; ./authorized_keys</span><br></pre></td></tr></table></figure><p> 再检查一下登录本地是否需要密码：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh localhost</span><br></pre></td></tr></table></figure><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop_ssh2.png" alt="验证免密登录" style="zoom:50%;" /></p><p> 这样是自己登录时的免密登录。</p><p> 之后需要配置其他服务器登录自己服务器也免密登录：</p><p> （当前操作的服务器是hadoop103嘛，以传递给hadoop104为例）：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id hadoop104@192.168.10.104</span><br></pre></td></tr></table></figure><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop_ssh3.png" alt="公钥配置给别人" style="zoom:50%;" /></p><p> 然后检查一下登录hadoop104试试需不需要密码：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh hadoop104@192.168.64.104</span><br></pre></td></tr></table></figure><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop_ssh4.png" alt="检验是否配置成功" style="zoom:50%;" /></p><p> 如果不需要设置密码就算设置好了。</p></li><li><p>同理，将hadoop103的传递给hadoop104、hadoop105</p></li></ol><p>总结一下就是三条命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br><span class="line">cat ./id_rsa.pub &gt;&gt; ./authorized_keys</span><br><span class="line">ssh-copy-id username@IP # 跟的是要递交的用户名@IP地址或主机名</span><br><span class="line">exit # 退出</span><br></pre></td></tr></table></figure><p>配置自己的ssh免密登录：先用<code>cat id_rsa.pub</code>获取到公钥，然后再<code>vim authorized_keys</code>在文件中添加新的公钥，之后保存退出。</p><p>然后在其他三台服务器上同样操作（每台服务器都要产生公钥在拷贝给另外两台）。（不过可以提前配置一下端口映射，先看下一段，配置之后操作简单很多）。</p><h1 id="配置服务器别名"><a href="#配置服务器别名" class="headerlink" title="配置服务器别名"></a>配置服务器别名</h1><p>和<a href="/posts/4192183953.html" title="终端连接Ubuntu">终端连接Ubuntu</a>类似，同样的道理来配置服务器别名：</p><p>用vim编写：<code>/etc/hosts</code>：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/hosts</span><br></pre></td></tr></table></figure><p>下如下内容：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hadoop</span></span><br><span class="line">192.168.64.103 hadoop103</span><br><span class="line">192.168.64.104 hadoop104</span><br><span class="line">192.168.64.105 hadoop105</span><br></pre></td></tr></table></figure><p>如图：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop_IP.png" alt="配置端口号"></p><p>这就是把第一台的弄好了，接下来换到其他两台服务器，直接复制这段内容即可。</p><p>到目前，登录hadoop104的命令从原来的：<code>ssh hadoop104@192.168.64.104</code>变成了<code>ssh hadoop104@hadoop104</code>.</p><p>接着配置服务器别名（还是先在hadoop103下操作）：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> ~/.ssh/config <span class="comment"># 在～/.ssh目录下创建文件config</span></span><br><span class="line"></span><br><span class="line">vim ~/.ssh/config <span class="comment"># 编写config</span></span><br></pre></td></tr></table></figure><p>写下内容：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Host hadoop103</span><br><span class="line">  HostName hadoop103</span><br><span class="line">  User hadoop103</span><br><span class="line">Host hadoop104</span><br><span class="line">  HostName hadoop104</span><br><span class="line">  User hadoop104</span><br><span class="line">Host hadoop105</span><br><span class="line">  HostName hadoop105</span><br><span class="line">  User hadoop105</span><br></pre></td></tr></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop_IP3.png" alt="编辑配置信息"></p><p>同样，在其他三台服务器上进行同样操作。</p><p>这样完成后，上一步的<code>ssh hadoop104@hadoop104</code>也变成了：<code>ssh hadoop104</code>。更简洁了，当然，如果了愿意，也可以配置得更短，更简单。</p><p>OK，现在可以继续去弄一下免密登录啦，会方便很多啦。例如上面知识配置了hadoop103免密登录hadoop104，现在配置hadoop103免密登录hadoop105只需要：<code>ssh-copy-id hadoop105</code></p><h1 id="正式编写集群分发脚本"><a href="#正式编写集群分发脚本" class="headerlink" title="正式编写集群分发脚本"></a>正式编写集群分发脚本</h1><p>脚本内容其实就是封装了一下<code>rsync</code>命令，也不复杂。</p><ol><li><p>需求</p><p> 循环赋值文件到所有节点的相同目录下</p></li><li><p>分析和准备</p><p> 想要全局使用就要放在全局目录下（配置了PATH的目录下），配置了PATH的目录：</p><p> 为了安全把脚本写在<code>/home/hadoop103/bin</code>，新建这个目录，然后配置环境变量：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /home/hadoop103/bin</span><br></pre></td></tr></table></figure><p> 然后配置环境变量：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bashrc</span><br></pre></td></tr></table></figure><p> 写入内容：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/usr/hadoop103/bin</span><br></pre></td></tr></table></figure><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop_env1.png" alt="配置环境变量"></p><p> 然后刷新：<code>source ~/.bashrc</code></p><p> 检验一下，输入<code>echo $PATH</code></p><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop_env2.png" alt="检查环境变量"></p><p> 可以看到新的环境变量已经添加到原本到系统变量后了。</p></li><li><p>在<code>/usr/hadoop103/bin</code>下新建脚本，写脚本</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> /usr/home/xsync</span><br><span class="line">vim /usr/home/xsync</span><br></pre></td></tr></table></figure><p> 写入脚本内容：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#1. 判断参数个数，如果小于1，就直接退出</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -lt 1 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> Not Enough Arguement!</span><br><span class="line"><span class="built_in">exit</span>;</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2. 遍历集群所有机器</span></span><br><span class="line"><span class="comment">#for host in hadoop102 hadoop103 hadoop104 这种写法要求配置了对应名称的IP地址，没配置，就直接写IP地址</span></span><br><span class="line"><span class="comment"># 本来主机名就要转化成IP地址的，所以直接用IP地址也没问题</span></span><br><span class="line"><span class="keyword">for</span> host <span class="keyword">in</span> hadoop103 hadoop104 hadoop105</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> ==================== <span class="variable">$host</span> ====================</span><br><span class="line">    <span class="comment">#3. 遍历所有目录，挨个发送</span></span><br><span class="line">    <span class="keyword">for</span> file <span class="keyword">in</span> <span class="variable">$@</span></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        <span class="comment">#4. 判断文件是否存在，存在是核心代码</span></span><br><span class="line">        <span class="keyword">if</span> [ -e <span class="variable">$file</span> ]</span><br><span class="line">            <span class="keyword">then</span></span><br><span class="line">                <span class="comment">#5. 获取父目录</span></span><br><span class="line">                pdir=$(<span class="built_in">cd</span> -P $(<span class="built_in">dirname</span> <span class="variable">$file</span>); <span class="built_in">pwd</span>)</span><br><span class="line">                </span><br><span class="line">                <span class="comment">#6. 获取当前文件的名称</span></span><br><span class="line">                fname=$(<span class="built_in">basename</span> <span class="variable">$file</span>)</span><br><span class="line">                </span><br><span class="line">                <span class="comment">#7. 直接跳转到对应host去（相当于100跳转到102操作102），跳转过去执行引号例的脚本命令</span></span><br><span class="line">                ssh <span class="variable">$host</span> <span class="string">&quot;mkdir -p <span class="variable">$pdir</span>&quot;</span></span><br><span class="line">                </span><br><span class="line">                <span class="comment">#8. 执行同步命令</span></span><br><span class="line">                rsync -av <span class="variable">$pdir</span>/<span class="variable">$fname</span> <span class="variable">$host</span>:<span class="variable">$pdir</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="variable">$file</span> does not exists!</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li><li><p>给脚本添加可执行权限：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x xsync</span><br></pre></td></tr></table></figure></li><li><p>测试使用，把hadoop目录给分发过去，这样hadoop也就出现在其他两台服务器上了</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xsync /usr/local/hadoop</span><br></pre></td></tr></table></figure><p> 注意：如果用了 sudo，那么 xsync 一定要给它的路径补全：<code>sudo ./bin/xsync  /usr/local/hadoop</code></p><p> 我在分发到时候遇到了问题，就是说权限不允许，解决办法：</p><p> 在其他两台服务器：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">mkdir</span> /usr/local/hadoop</span><br><span class="line">sudo <span class="built_in">chown</span> hadoop104 hadoop <span class="comment"># hadoop105 下写 hadoop105</span></span><br><span class="line">sudo <span class="built_in">chgrp</span> hadoop104 hadoop <span class="comment"># hadoop105 下写 hadoop105</span></span><br></pre></td></tr></table></figure><p> 然后再执行脚本分发命令，就分发过去了。</p></li></ol><p>到这里集群分发脚本就写好了。在其他两台服务上也如此操作。</p><p>注意集群分发脚本的使用就是直接分发这个目录，最好是路径是都有的。</p><p>如果：<code>xsync /home/hadoop103/bin</code>不是把bin给其他两个服务器，而是在其他两个服务器的<code>/home</code>目录下新建：<code>/hadoop103/bin</code>。和想的不一样哦，不是在<code>/home/hadoop104</code>或<code>/home/hadoop105</code>目录下新建<code>bin</code>目录。</p><p>可以继续看<a href="/posts/1271036369.html" title="搭建Hadoop集群">搭建Hadoop集群</a>啦</p>]]></content>
      
      
      <categories>
          
          <category> 大数据基础环境 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Hadoop </tag>
            
            <tag> 大数据 </tag>
            
            <tag> 集群 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>终端连接Ubuntu</title>
      <link href="/posts/4192183953.html"/>
      <url>/posts/4192183953.html</url>
      
        <content type="html"><![CDATA[<h1 id="终端连接服务器"><a href="#终端连接服务器" class="headerlink" title="终端连接服务器"></a>终端连接服务器</h1><blockquote><p>Windows用户如过想要使用xshell可以跳过(xshell根方便，很多人用这个，可自行搜索学习)。Mac下没有xshell，所以我需要配置下面的内容。当然，你Windows想配置也可以，可以不用下载xshell，但是Windows的终端用起来体验不太好…</p></blockquote><h2 id="终端连接服务器原理"><a href="#终端连接服务器原理" class="headerlink" title="终端连接服务器原理"></a>终端连接服务器原理</h2><p>输入:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh 用户名@主机名 -port</span><br></pre></td></tr></table></figure><p>例如，我上面给我的主机名取名为zyr，ip设置为静态，为192.168.64.103。没有端口，所以为：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh zyr@192.168.64.103</span><br></pre></td></tr></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2016.09.05.png" alt="截屏2023-01-18 16.09.05"></p><p>服务器端口就改变了，也可以执行操作了。</p><p>但是每次都需要输入这么多内容很麻烦。</p><h2 id="配置ssh免密登陆"><a href="#配置ssh免密登陆" class="headerlink" title="配置ssh免密登陆"></a>配置ssh免密登陆</h2><p>再打开一个终端（上面已经连接了服务器的终端可以继续保留）。即现在有两个终端，一个终端控制服务器，一个终端控制主机。</p><ol><li><p>在主机输入命令生成一串密钥（如过之前已经生成过的可以跳过这一步）：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;你的邮箱&quot;</span></span><br></pre></td></tr></table></figure><p> 输入之后，一直回车即可。</p></li><li><p>跳转路径查看它的公钥</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.ssh</span><br><span class="line">vim id_rsa.pub</span><br></pre></td></tr></table></figure><p> 查看内容复制就好了。</p></li><li><p>现在使用服务器终端配置公钥：</p><p> 利用服务器端端终端跳转路径：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.ssh</span><br><span class="line">vim authorized_keys</span><br></pre></td></tr></table></figure><p> 如过没有authorized_keys文件，利用：<code>touch authorized_keys</code>创建，再编辑。</p><p> 然后将刚才复制的公钥粘贴在这里。保存退出。</p></li><li><p>配置IP端口号别名</p><p> Windows的hosts文件应该在<code>C:\Windows\System32\drivers\etc</code>下（如果不在自行搜索）</p><p> Mac：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/hosts</span><br></pre></td></tr></table></figure><p> 添加内容：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IP-端口 别名</span><br></pre></td></tr></table></figure><p> 例如：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.64.103 server01</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>配置服务器别名</p><p> 在主机的终端中配置服务器的别名，之后登陆时就方便了。</p><p> 还是在～/.ssh目录下（不在就cd过去）</p><p> 创建config文件：<code>touch config</code></p><p> 便携config文件：<code>vim config</code></p><p> 内容：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Host *</span><br><span class="line">  UseKeychain <span class="built_in">yes</span></span><br><span class="line">Host 服务器别名</span><br><span class="line">  HostName 服务器端口号或IP</span><br><span class="line">  User 用户名</span><br></pre></td></tr></table></figure><p> 例如：</p><p> 我上面创建的服务器的IP为192.168.64.103（可在/etc/hosts中配置对应端口）。服务器的用户为zyr。</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Host *</span><br><span class="line">  UseKeychain <span class="built_in">yes</span></span><br><span class="line">Host server01</span><br><span class="line">  HostName 192.168.64.103</span><br><span class="line">  User zyr</span><br></pre></td></tr></table></figure><p> 如果设置了端口别名，可以：</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Host *</span><br><span class="line">  UseKeychain yes</span><br><span class="line">Host server01</span><br><span class="line">  HostName server01</span><br><span class="line">  User zyr</span><br></pre></td></tr></table></figure><p> 如果想配置多个服务器别名：</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Host *</span><br><span class="line">  UseKeychain yes</span><br><span class="line">Host server01</span><br><span class="line">  HostName server01</span><br><span class="line">  User zyr</span><br><span class="line">Host server02</span><br><span class="line">  HostName server02</span><br><span class="line">  User zyr2</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>到这里就大功告成了！！！</p></blockquote><p>登陆方法：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh 刚才设置的服务器别名</span><br></pre></td></tr></table></figure><p>例如：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh server01</span><br></pre></td></tr></table></figure><h2 id="如何退出ssh"><a href="#如何退出ssh" class="headerlink" title="如何退出ssh"></a>如何退出ssh</h2><p>一下方法都可以（我比较喜欢用<code>exit</code>）</p><ol><li>直接关闭终端</li><li>执行<code>logout</code>命令</li><li>执行<code>exit</code>命令</li><li>ctrl+D</li></ol>]]></content>
      
      
      <categories>
          
          <category> 编程环境 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
            <tag> Linux </tag>
            
            <tag> 编程环境 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搭建Hadoop环境</title>
      <link href="/posts/1141628095.html"/>
      <url>/posts/1141628095.html</url>
      
        <content type="html"><![CDATA[<h1 id="新建虚拟机"><a href="#新建虚拟机" class="headerlink" title="新建虚拟机"></a>新建虚拟机</h1><blockquote><p>这里对集群有一点说明，但为了文章不过长此文章不讲解搭建集群，请看本博客的另一篇文章（有一台虚拟机的Hadoop安装好后）</p></blockquote><p>Mac系统可以参考我的另一篇文章：<a href="694347442">UTM安装Ubuntu</a>（我自己用的是22.04.1 LTS 服务器版（非桌面版））。</p><p>Windows系统就自行找文章（找之前先稍微浏览一下下面的内容），Windows系统不用UTM，一般使用VMware。只要把VMware下载好了，然后创建好了基本的Ubuntu虚拟机，差不多就可以看我的另一篇文章了，因为Ubuntu内部是一样的。</p><p>由于涉及分发脚本等，最好配置成静态IP（不配置也可以，只是以后使用时会稍微麻烦点）</p><blockquote><p>可以选择先创建好一台虚拟机，然后克隆（适合手动配置静态IP的人，如果是在安装时就配置了静态IP可能就会出现问题）。这样是最快的。</p><p>如果选择安装时配置静态IP就可以同时安装三台机器，因为中途有较长的等待时间。</p></blockquote><p>最好如下规划进行配置。</p><h2 id="Hadoop配置规划"><a href="#Hadoop配置规划" class="headerlink" title="Hadoop配置规划"></a>Hadoop配置规划</h2><div class="table-container"><table><thead><tr><th></th><th>1号服务器</th><th>2号服务器</th><th>3号服务器</th></tr></thead><tbody><tr><td>name</td><td>hadoop103</td><td>hadoop103</td><td>hadoop103</td></tr><tr><td>IP</td><td>192.168.64.103</td><td>192.168.64.104</td><td>192.168.64.105</td></tr><tr><td>HDFS</td><td>NameNode、DataNode</td><td>DataNode</td><td>SecondaryNameNode、DataNode</td></tr><tr><td>YARN</td><td>NodeManager</td><td>ResourceManager、NodeManager</td><td>NodeManager</td></tr></tbody></table></div><h2 id="安装好一台虚拟机后简单测试"><a href="#安装好一台虚拟机后简单测试" class="headerlink" title="安装好一台虚拟机后简单测试"></a>安装好一台虚拟机后简单测试</h2><p>避免后续白忙活，这里记得要先检查一下：</p><p>最重要的就是IP了，检查是否是静态IP：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig <span class="comment"># 如果找不到命令，先下载网络工具包：sudo apt install net-tools</span></span><br></pre></td></tr></table></figure><p>如果有IP并且和配置的一样这一步就OK了。没有配置静态IP就查看是否有IP就行。</p><p>是否能上网：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping www.baidu.com</span><br></pre></td></tr></table></figure><p>主机（Windows/Mac）的终端是否能ping通虚拟机：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping 上上步看到的IP <span class="comment"># 虚拟机的IP</span></span><br></pre></td></tr></table></figure><p>如果无法ping通，但是上上步看到的IP正确，可能就是虚拟机防火墙没关：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 关闭防火墙</span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service</span><br></pre></td></tr></table></figure><p>虚拟机能否ping通主机：</p><p>首先先查看主机IP（主机终端中）：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ifconfig <span class="comment"># Mac</span></span><br><span class="line"></span><br><span class="line">ipconfig <span class="comment"># Windows</span></span><br></pre></td></tr></table></figure><p>然后虚拟机再ping得到的IP。如果ping不通，但是能ping通百度，可能是主机防火墙影响。从安装性考虑：Mac可以关，Windows最好不要先关闭防火墙，在需要的时候才关。</p><p>这样就基本可以了。</p><p>最好再更新一下apt：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure><p>有的时候apt和apt-get可能会产生包依赖问题，这里推荐使用aptitude来安装软件。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install aptitude</span><br></pre></td></tr></table></figure><p>aptitude命令格式和apt基本一样，如果apt下载包依赖失败，可以利用aptitude。</p><blockquote><p>一切都安装好后，按理上可以删除iso镜像文件了，但是后面可能会出问题，可能需要重装，最好留手准备。</p></blockquote><h1 id="下载安装Hadoop"><a href="#下载安装Hadoop" class="headerlink" title="下载安装Hadoop"></a>下载安装Hadoop</h1><h2 id="查看版本依赖关系"><a href="#查看版本依赖关系" class="headerlink" title="查看版本依赖关系"></a>查看版本依赖关系</h2><p>直接在下面网站中找即可找打HBase与hadoop的版本关系：</p><p><a href="https://hbase.apache.org/book.html#architecture">https://hbase.apache.org/book.html#architecture</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadopp-hbase_version.png" alt="版本对应关系"></p><p>查看依赖关系：由于之后计划安装2.4.11版本的Hbase，所以对应关系为：3.3.1比较好（因为3.3.1搭配Hive也兼容）。当然也可以自己查查HBase与ZooKeeper（可直接使用HBase自带的）、Hive的版本依赖关系。</p><h2 id="下载Hadoop"><a href="#下载Hadoop" class="headerlink" title="下载Hadoop"></a>下载Hadoop</h2><p>我在Mac电脑（Windows电脑上也是这个网址）上访问网址：<a href="https://mirrors.tuna.tsinghua.edu.cn/apache/hadoop/common/hadoop-3.3.1/">https://mirrors.tuna.tsinghua.edu.cn/apache/hadoop/common/hadoop-3.3.1/</a></p><p>如果你用的是桌面版的Ubuntu，可以直接在虚拟机中的FireFox（直接用Linux系统的浏览器）中访问下载（如果网速快的话，或者嫌不同系统移动文件麻烦）</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop.png" alt="截屏2023-01-28 17.54.11"></p><p>选择 hadoop-3.3.1-aarch64.tar.gz</p><p>点击即可下载。</p><h2 id="安装Hadoop"><a href="#安装Hadoop" class="headerlink" title="安装Hadoop"></a>安装Hadoop</h2><p><strong>之后如果没有特殊说明都是在hadoop103上面操作</strong></p><p>之后把下载好的压缩包放在<code>/usr/local</code>目录下：</p><blockquote><p>如果是非桌面版（在主机的浏览器上下载的Hadoop压缩包）：</p><ul><li>我利用UTM安装虚拟机的时候配置了共享文件夹，所以我可以直接把文件拖入虚拟机中完成移动。</li><li>如果是没有配置的Mac用户，推荐下载FileZilla，使用FileZilla完成移动。</li><li>如果是Windows用户，可以下载Xftp完成移动。</li></ul><p><span style="background: cyan">注意：</span></p><p>要先修改Hadoop目录的权限，否则会移动失败：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> -R 777 /usr/local <span class="comment"># 千万不要改/usr的权限，因为/usr/bin/sudo在/usr下，如果将/usr的权限改为777，则无法使用sudo命令</span></span><br></pre></td></tr></table></figure><p>移动完成后再改变权限改回去：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> -R 4755 /usr/local</span><br></pre></td></tr></table></figure><p><b>但是这个命令很坑</b>，有另一种解决办法（或者可以看：<a href="/posts/2075104059.html" title="搭建hadoop集群常见问题">搭建hadoop集群常见问题</a>，和下面的内容说的一样）：</p><p>在/usr/local下创建目录：hadoop</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">mkdir</span> hadoop</span><br></pre></td></tr></table></figure><p>然后更改拥有者为本用户：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chown</span> hadoop103 hadoop</span><br></pre></td></tr></table></figure><p>之后将压缩文件移动到hadoop目录下。</p><p>然后再在虚拟机中将压缩包移动出去（移到<code>/usr/local</code>(移动之前在<code>/usr/local/hadoop</code>下)）：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">mv</span> hadoop/hadoop-3.3.1-aarch64.tar ./</span><br></pre></td></tr></table></figure><p>删除原本的hadoop目录：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">rmdir</span> hadoop</span><br></pre></td></tr></table></figure></blockquote><h2 id="解压压缩包"><a href="#解压压缩包" class="headerlink" title="解压压缩包"></a>解压压缩包</h2><p>先要把压缩包移动到<code>/usr/local</code>目录下。</p><p>如果是桌面版，直接右键解压即可。</p><p>非桌面版，终端输入（先<code>cd /usr/local</code>到对应目录下）：</p><p>可能我的Mac下载到.tar.gz就解压了一遍，我下载下来之后的安装包变成了.tar后缀的压缩包，我执行命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -xf hadoop-3.3.1-aarch64.tar</span><br></pre></td></tr></table></figure><p>如果还是.tar.gz后缀，则：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -zxf hadoop-3.3.1-aarch64.tar.gz</span><br></pre></td></tr></table></figure><p>当前目录下就多了一个hadoop-3.3.1的目录了，为了方便未来操作，修改目录名为hadoop：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">mv</span> ./hadoop-3.3.1 hadoop</span><br></pre></td></tr></table></figure><p>如图： </p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/tar_hadoop.png" alt="截屏2023-01-28 18.25.04"></p><p>将拥有者更改为hadoop103用户：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chown</span> hadoop103 hadoop</span><br></pre></td></tr></table></figure><h2 id="安装配置jdk"><a href="#安装配置jdk" class="headerlink" title="安装配置jdk"></a>安装配置jdk</h2><p>查看hadoop版本的时候，报错：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/error_no_jdk.png" alt="截屏2023-01-28 18.31.14"></p><p>Hadoop运行是需要jdk的，直接用ubuntu自带的jdk就行了（因为MapReduce其实是在主机的IDEA上编写Java代码的，这里好像只需要一个运行的Java编译环境，所以这里的jdk版本也不重要）</p><p>下载自带的jdk：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install default-jdk</span><br></pre></td></tr></table></figure><p>这里比较久，三台同时弄吧～</p><p>安装好jdk后，配置环境变量：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bashrc</span><br></pre></td></tr></table></figure><p>进入编辑后，自己按 i 输入：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/lib/jvm/default-java</span><br></pre></td></tr></table></figure><p>保存退出。</p><p>如图：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop_jdk1.png" alt="配置环境变量"></p><p>然后生效：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure><p>这样其实就好了，可以检查一下：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$JAVA_HOME</span></span><br><span class="line"></span><br><span class="line">java -version</span><br><span class="line"></span><br><span class="line"><span class="variable">$JAVA_HOME</span>/bin/java -version</span><br></pre></td></tr></table></figure><p>效果应该如图：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop_jdk2.png" alt="检查jdk安装是否成功"></p><p>现在可以再检查hadoop的版本了（顺便也是再检查jdk是否安装成功）：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/local/hadoop</span><br><span class="line"></span><br><span class="line">./bin/hadoop version</span><br></pre></td></tr></table></figure><p>效果应该如图：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop_version1.png" alt="查看Hadoop版本"></p><p>到这里一个基本的Hadoop已经配置好了。</p><h1 id="简单使用Hadoop"><a href="#简单使用Hadoop" class="headerlink" title="简单使用Hadoop"></a>简单使用Hadoop</h1><blockquote><p>如果按照上述步骤执行，应该没有问题了，下面是简单介绍hadoop命令，进一步检验hadoop是否安装成功。可以不执行下面的操作，下面也相当于是一个新手演示。</p></blockquote><p>在<code>/usr/local/hadoop</code>目录下操作：</p><ol><li><p>创建一个输入文件夹（wcinput）</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir wcinput</span><br></pre></td></tr></table></figure></li><li><p>在wcinput文件下创建一个文件word.txt文件并添加内容。我们接下来用hadoop读取一下这个word.txt中的数据</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd wcinput</span><br><span class="line">vim word.txt</span><br></pre></td></tr></table></figure><p> 写入以下内容：</p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">zyr zyr</span><br><span class="line">fw fw</span><br><span class="line">qwe qwe</span><br><span class="line">ewq eqweqe</span><br></pre></td></tr></table></figure></li><li><p>回到Hadoop目录下（/usr/local/hadoop）</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd .. # 因为才从这里cd到wcinput文件夹下，所以返回上一级就好了</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或者就是写全</span></span><br><span class="line">cd /usr/local/hadoop</span><br></pre></td></tr></table></figure></li><li><p>创建一个目录wcoutput，用来存放hadoop读取数据的结果</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir wcoutput</span><br></pre></td></tr></table></figure></li><li><p>执行程序，运行hadoop读取处理数据</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.1.jar wordcount wcinput/ wcoutput</span><br></pre></td></tr></table></figure><p> 解释一下：</p><ul><li><p>执行的是<code>/usr/local/hadoop/bin</code>目录下的<code>hadoop</code>命令（当前在<code>/usr/local/hadoop</code>目录下，所以运行<code>/bin/hadoop</code>）</p></li><li><p><code>jar</code>表示要执行一个jar包，之后指定要执行的jar包（<code>hadoop-mapreduce-examples-3.3.1.jar</code>）,写上完整路径就是：<code>share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.1.jar</code></p><p>  mapreduce的作用是计算。这里相当于选的是一个计算模板包。</p></li><li><p>执行程序的选项是：<code>wordcount</code>，也就是单词计数，就是统计每个单词出现的次数。</p></li><li><p>需要读取的文件是<code>wcinput</code>下的所有文件（<code>wcinput/</code>）。</p></li><li><p>输出位置是<code>wcoutput</code>文件夹，如果事先没有准备这个文件夹，就写：<code>./wcoutput</code></p><p>最终表示为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">执行命令 选择执行jar包 执行选项 数据来源 结果输出</span><br></pre></td></tr></table></figure></li></ul></li><li><p>执行结果后得到数据，进入wcoutput目录下，查看生成文件</p><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop_wordcount.png" alt="生成结果"></p></li><li><p>正在有结果的的是part-r-00000文件，查看文件内容</p><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/hadoop_wordcout2.png" alt=""></p><p> 它统计的是刚才写入内容中词语的个数。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 大数据基础环境 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Hadoop </tag>
            
            <tag> 大数据 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sudo和su都不能使用的问题</title>
      <link href="/posts/1259097482.html"/>
      <url>/posts/1259097482.html</url>
      
        <content type="html"><![CDATA[<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>我不知道脑子出啥问题了，我命令了：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> -R 777 /usr</span><br></pre></td></tr></table></figure><p>导致<code>/usr/local/sudo</code>命令和<code>/usr/local/su</code>命令都不能使用了。</p><p>看到网上的解决办法都是只有其中一种问题，例如：报错：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo: /usr/bin/sudo must be owned by uid 0 and have the setuid bit <span class="built_in">set</span></span><br></pre></td></tr></table></figure><p>本来就应该<code>su root</code>，然后</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> root:root /usr/bin/sudo</span><br></pre></td></tr></table></figure><p>之后：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 4755 /usr/bin/sudo</span><br></pre></td></tr></table></figure><p>最后重启，完美解决。</p><p>可是我第一步就完蛋了，我运行：<code>su root</code>时出现问题：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su: Authentication failure</span><br></pre></td></tr></table></figure><p>查了之后说要执行<code>sudo passwd root</code>给root设置密码。但是我不能用sudo啊。而且我是使用过su的，密码我也记得。</p><h1 id="解决过程"><a href="#解决过程" class="headerlink" title="解决过程"></a>解决过程</h1><p>根据报错：<code>sudo: /usr/bin/sudo must be owned by uid 0 and have the setuid bit set</code>：</p><p>sudo的用户属组要属于uid 0，即root用户；同时sudo要设置setuid位。我首先查询了一下我系统中sudo的信息：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> /usr/bin/sudo</span><br></pre></td></tr></table></figure><p>结果为：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-rwxrwxrwx  1 root root      215944 Feb 14  2022  sudo*</span><br></pre></td></tr></table></figure><p>是root用户。</p><p>那么就要设置setuid位：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 4755 /usr/bin/sudo</span><br><span class="line">或者</span><br><span class="line"><span class="built_in">chmod</span> u+s /usr/bin/sudo</span><br></pre></td></tr></table></figure><p>可是我没法用<code>sudo</code>啊，这咋改啊。</p><p>没有办法了，只能进入恢复模式 recovery mode。</p><h2 id="恢复模式"><a href="#恢复模式" class="headerlink" title="恢复模式"></a>恢复模式</h2><p>进入恢复模式：</p><p>选择Advanced options for Ubuntu，按下[Enter]进入，选择recovery mode，不要按下回车键。</p><p>按E进入到编辑界面，按向下键找到 到 linux /boot/vmlinuz-……. ro recovery nomodeset 所在行，将“ro recovery nomodeset”替换为“quiet splash rw init=/bin/bash”，按下[F10]或者[Ctrl+x]重启系统。</p><p>重启以后进入到这个页面，向下键选择root回车。</p><p>但是我还是糟糕啊，完蛋孩子。再尝试一会儿决定重装（删除虚拟机后新建）😭</p><blockquote><p>长记性啊，可千万不能chmod -R 777 啊</p></blockquote><p>你以为我能解决啊，我也想解决啊😅</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>修改Ubuntu用户名、密码和主机名</title>
      <link href="/posts/820223701.html"/>
      <url>/posts/820223701.html</url>
      
        <content type="html"><![CDATA[<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>我最开始创建了一台虚拟机服务器，用户名叫zyr，主机名也叫zyr，我现在想把它作为hadoop集群中的一台，为了避免我误操作，我想把主机名和用户名都改成hadoop103。</p><h1 id="修改主机名"><a href="#修改主机名" class="headerlink" title="修改主机名"></a>修改主机名</h1><ol><li><p>临时修改：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostname 新的主机名</span><br></pre></td></tr></table></figure><p> 例如：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostname hadoop103</span><br></pre></td></tr></table></figure><p> 这样修改会导致重启虚拟机，主机名变回去。</p></li><li><p>永久修改</p><p> 我们知道Ubuntu的配置文件一般在<code>/etc</code>目录下，所以<code>ls</code>一下发现了hostname，修改hostname：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hostname</span><br></pre></td></tr></table></figure><p> 将原本的内容修改为新的主机名。一般情况下，这个文件就自由一行，内容就是主机名</p><p> 现在再输入：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure><p> 重启虚拟机，就发现主机名被修改成功了。</p></li></ol><hr><h1 id="修改用户名"><a href="#修改用户名" class="headerlink" title="修改用户名"></a>修改用户名</h1><p>这一步比较复杂，由于有切换用户名的过程，最好切换到其他用户上<del>但是既然有另一个用户，为什么不直接创建一个新用户，再把原来这个注销掉呢，更简单吧</del>（可能是保护该用户的数据？）。总之，我是切换到root权限下操作的（切换到root权限下）：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo su</span><br></pre></td></tr></table></figure><p>如果报错请看：<a href="#./修改密码">修改密码</a></p><ol><li><p>修改用户密码文件：<code>/etc/passwd</code></p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/passwd</span><br></pre></td></tr></table></figure><p> 直接把所有zyr相关内容替换为hadoop103:</p><p> ==在命令模式下：==</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%s/zyr/hadoop103/g</span><br></pre></td></tr></table></figure></li><li><p>修改用户加密方式文件：<code>/etc/shadow</code></p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/shadow</span><br></pre></td></tr></table></figure><p> 直接把所有zyr相关内容替换为hadoop103:</p><p> ==在命令模式下：==</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%s/zyr/hadoop103/g</span><br></pre></td></tr></table></figure></li><li><p>修改用户组文件：<code>/etc/group</code></p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/group</span><br></pre></td></tr></table></figure><p> 同上，把所有zyr换成hadoop103</p></li><li><p>最后修改用户的家目录</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> /home/zyr /home/hadoop103</span><br></pre></td></tr></table></figure></li><li><p>再次登录就行：</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su hadoop103</span><br></pre></td></tr></table></figure></li></ol><h1 id="修改其他"><a href="#修改其他" class="headerlink" title="修改其他"></a>修改其他</h1><h2 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd username</span><br></pre></td></tr></table></figure><p>username是待修改密码的用户名。</p><p>输入命令后输入两次密码即可。</p><p>如果第一次登录root登录不上就：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd root</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>线性规划</title>
      <link href="/posts/88294277.html"/>
      <url>/posts/88294277.html</url>
      
        <content type="html"><![CDATA[<h1 id="1-基本原理"><a href="#1-基本原理" class="headerlink" title="1 基本原理"></a>1 基本原理</h1><h2 id="1-1-线性规划问题概述"><a href="#1-1-线性规划问题概述" class="headerlink" title="1.1 线性规划问题概述"></a>1.1 线性规划问题概述</h2><p>在人们的生产实践中，经常会遇到如何利用现有资源来安排生产，以取得最大经济效益的问题。此类问题构成了运筹学的一个重要分支——数学规划，而线性规划(Linear Programming简记LP)则是数学规划的一个重要分支。</p><p>自从1947年G.B.Dantzig提出求解线性规划的单纯形方法以来，线性规划在理论上趋向成熟，在实用中日益广泛与深入。特别是在计算机能处理成千上万个约束条件和决策变量的线性规划问题之后，线性规划的适用领域更为广泛了，已成为现代管理中经常采用的基本方法之一。</p><h2 id="1-2-线性规划的实例与定义"><a href="#1-2-线性规划的实例与定义" class="headerlink" title="1.2 线性规划的实例与定义"></a>1.2 线性规划的实例与定义</h2><p>例如        某机床厂生产甲、乙两种机床，每台销售后的利润分别为4千元与3千元。生产甲机床需用A、B机器加工，加工时间分别为每台2小时和1小时;生产乙机床需用A、B、C三种机器加工,加工时间为每台各一小时。若每天可用于加工的机器时数分别为A机器10小时、B机器8小时和C机器7小时，问该厂应生产甲、乙机床各几台，才能使总利润最大?</p><p>上述问题的数学模型：设该厂生产$x_1$台甲机床和$x_2$乙机床时总利润$z$最大，则$x_1,x_2$应满足：</p><script type="math/tex; mode=display">\max\limits_{x} \quad z= 4x_1+3x_2 \\\begin{cases}2x_1 + x_2 \leqslant 10 \\x_1 + x_2 \leqslant 8 \\x_1 \leqslant 8 \\x_2 \leqslant 7 \\x_1,x_2 \geqslant 0\end{cases}</script><p>变量$x_1,x_2$称之为决策变量，$z=4x_1+3x_2$被称为目标函数，$z$为最优值，不等式为约束条件，记为s.t.(subject to).</p><p>三部分组成：</p><ol><li><p>目标函数：max $z = 4x_1 + 3x_2$</p></li><li><p>决策变量：$x_1,x_2$</p></li><li><p>约束条件：</p><script type="math/tex; mode=display"> \begin{cases} 2x_1 + x_2 \leqslant 10, \\ x_1 + x_2 \leqslant 8, \\ x_1 \leqslant 8,\\ x_2 \leqslant 7, \\ x_1, x_2 \geqslant 0. \end{cases}</script></li></ol><p>目标函数及约束条件<strong>均为</strong>线性函数，故被称为线性规划问题。线性规划问题是在一组线性约束条件的限制下，求一<strong>线性目标函数最大</strong>或<strong>最小</strong>的问题。</p><p>在解决实际问题时，把问题归结成一个线性规划数学模型是很重要的一步，往往也是很困难的一步，模型建立得是否恰当，直接影响到求解。而选适当的决策变量，是我们建立有效模型的关键之一。</p><h2 id="1-3-线性规划问题的解的概念"><a href="#1-3-线性规划问题的解的概念" class="headerlink" title="1.3 线性规划问题的解的概念"></a>1.3 线性规划问题的解的概念</h2><script type="math/tex; mode=display">\min\limits_{x} \quad w =  \,c^T\,x \\s.t.\begin{cases}Ax \leqslant b \\Aeq \cdot x = beq \\lb \leqslant x \leqslant ub\end{cases}</script><p>其中：</p><ul><li><p>$c$ 和 $x$ 为 $n$ 维<strong>列</strong>向量</p><p>  例如上例：$z = 2x_1+x_2$</p><p>  对应这里：$c^T = [2,1]$，因为为转置矩阵，所以$c=[2;1]$</p><p>  $x=[x_1;x_2]$</p></li><li><p>$A$、$Aeq$为适当维数的矩阵</p><p>  $A$为不等式约束。例如上式：$A=[2,1; 1,1; 0,1]$</p><p>  $Aeq$为等式约束。上式没有。</p></li><li><p>$b$、$beq$为适当维数的列向量</p><p>  $b$是和$A$配对的不等式约束。例如上式：$b=[10; 8; 7]$</p><p>  $beq$为和$Aeq$配对的等式约束。上式没有。</p></li><li><p>$lb$、$ub$为n维列向量</p><p>  用来约束$x$的范围。例如上式：$lb=[0;0]$、$ub=[8;7]$</p></li></ul><p>一般线性规划问题的<strong>数学</strong>标准型为：</p><script type="math/tex; mode=display">\max\limits_{x} \quad \sum\limits_{j=1}^n c_jx_j \\s.t.\begin{cases}\sum\limits_{j=1}^n a_{ij}x_j = b_i\quad i=1,2,\cdots,m\\x_j \geqslant 0 \quad j = 1,2,\cdots, n\end{cases}</script><h3 id="1-3-1-可行解"><a href="#1-3-1-可行解" class="headerlink" title="1.3.1 可行解"></a>1.3.1 可行解</h3><p>满足上式条件的解$x=[x_1,\cdots,x_n]^T$，称维线性规划问题的可行解，而使目标函数$z$达到最大值或最小值的解叫作<strong>最优解</strong>。z的最大值或者最小值为<strong>最优值</strong></p><h3 id="1-3-2-可行域"><a href="#1-3-2-可行域" class="headerlink" title="1.3.2 可行域"></a>1.3.2 可行域</h3><p>所以可行解构成的集合称为问题的可行域，记为$R$。</p><h2 id="1-4-线性规划的Matlab标准形式及软件求解"><a href="#1-4-线性规划的Matlab标准形式及软件求解" class="headerlink" title="1.4 线性规划的Matlab标准形式及软件求解"></a>1.4 线性规划的Matlab标准形式及软件求解</h2><p>线性规划的目标函数可以是求最大值，也可以是求最小值,约束条件的不等号可以是小于号也可以是大于号。为了避免这种形式多样性带来的不便，Matlab中规定线性规划的标准形式为：</p><script type="math/tex; mode=display">\min\limits_{x} \qquad fval=f^Tx \\s.t.\begin{cases}Ax \leqslant b \\Aeq \cdot x = beq \\lb \leqslant x \leqslant ub\end{cases}</script><p>其中 $f,x,b,beq,lb,ub$都是列向量（<a href="#1.1.2 线性规划问题的解的概念">上面</a>解释过了）,$f$称为价值向量，$b$称为资源向量，$A,Aeq$为矩阵。</p><h3 id="1-4-1-Matlab-的求解命令："><a href="#1-4-1-Matlab-的求解命令：" class="headerlink" title="1.4.1 Matlab 的求解命令："></a>1.4.1 Matlab 的求解命令：</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[x, fval] = linprog(f, A, b)</span><br><span class="line">[x, fval] = linprog(f, A, b, Aeq, beq)</span><br><span class="line">[x, fval] = linprog(f, A, b, Aeq, beq, lb, ub)</span><br><span class="line">[x, fval] = linprog(f, A, b, Aeq, beq, lb, ub, x0, OPTIONS)</span><br></pre></td></tr></table></figure><p>其中：</p><ul><li><p>返回值：</p><ul><li><code>x</code>：决策向量的取值，即最优解</li><li><code>fval</code>：目标函数的最优解</li></ul></li><li><p>参数：</p><ul><li><code>f</code>：价值向量</li><li><code>A</code>和<code>b</code>：不等式约束</li><li><code>Aeq</code>和<code>beq</code>：等式约束</li><li><code>lb</code>和<code>ub</code>：列向量，x的取值范围</li><li><code>x0</code>：x的初始值</li><li><code>OPTIONS</code>：指定参数进行最小化<ul><li><code>Display</code>：若为 <code>off</code> 则不显示输出；若选择 <code>Iter</code> （iteration的缩写）即显示每一步的迭代过程；若选择 <code>final</code> 即只显示最终结果。</li><li><code>MaxFunEvals</code>：函数评价的最大允许次数</li><li><code>Maxiter</code>：最大的允许迭代次数</li><li><code>Tolx</code>：x处的终止容限</li></ul></li></ul></li><li><p>其他返回值：</p><p>  <code>[x, fval, exitflag, output, lambda]</code></p><ul><li><code>exitflag</code>：收敛数</li><li><code>optput</code>：迭代次数</li><li><code>lambda</code>：x处的拉格朗日乘子<ul><li><code>lambda.lower</code>：lambda的下界</li><li><code>lambda.upper</code>：lambda的上界</li><li><code>lambda.ineqlin</code>：lambda的线性不等式</li><li><code>lambda.eqlin</code>：lambda的线性等式</li></ul></li></ul></li></ul><h2 id="1-5-练习"><a href="#1-5-练习" class="headerlink" title="1.5 练习"></a>1.5 练习</h2><h3 id="1-5-1-例1"><a href="#1-5-1-例1" class="headerlink" title="1.5.1 例1"></a>1.5.1 例1</h3><script type="math/tex; mode=display">\max\limits_{x} \quad z=2x_1+3x_2-5x_3 \\s.t.\begin{cases}x_1+x_2+x_3 = 7 \\2x_1 - 5x_2+x_3 \geqslant 10 \\x_1 + 3x_2 + x_3 \leqslant 12 \\x_1,x_2,x_3 \geqslant 0\end{cases}</script><p>化为Matlab标准形式（注意是最小值，所以fval有负号）：</p><script type="math/tex; mode=display">\min\limits_{x}\quad fval=-2x_1 - 3x_2+5x_3 \\z = -fval\\s.t.\begin{cases}\begin{bmatrix}-2 & 5 & -1 \\1 & 3 & 1\end{bmatrix}\begin{bmatrix}x_1 \\x_2 \\x_3\end{bmatrix}\leqslant\begin{bmatrix}-10 \\12\end{bmatrix}, \\\begin{bmatrix}1 & 1 & 1\end{bmatrix}\begin{bmatrix}x_1 \\x_2 \\x_3\end{bmatrix} = 7, \\\begin{bmatrix}x_1 \\x_2 \\x_3\end{bmatrix}\geqslant\begin{bmatrix}0 \\0 \\0\end{bmatrix}\end{cases}</script><p>matlab代码：</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">f = [<span class="number">-2</span>; <span class="number">-3</span>; <span class="number">5</span>];</span><br><span class="line">a = [<span class="number">-2</span>, <span class="number">5</span>, <span class="number">-1</span>; <span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>];</span><br><span class="line">b = [<span class="number">-10</span>; <span class="number">12</span>];</span><br><span class="line">Aeq = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>];</span><br><span class="line">beq = <span class="number">7</span>;</span><br><span class="line">lb = <span class="built_in">zeros</span>(<span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line">[x, favl] = linprog(f, a, b, Aeq, beq, lb)</span><br><span class="line">x</span><br><span class="line">z = -favl <span class="comment">% 因为求最大值</span></span><br></pre></td></tr></table></figure><p>结果：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/%E7%BA%BF%E6%80%A7%E8%A7%84%E5%88%921.png" alt="image-20230111191230508" style="zoom:50%;" /></p><p>即：最优解为：$x_1=6.4286,x_2=0.5714,x_3=0$；最优值为：$z=14.5714$。</p><h3 id="1-5-2-例2"><a href="#1-5-2-例2" class="headerlink" title="1.5.2 例2"></a>1.5.2 例2</h3><script type="math/tex; mode=display">\min\limits_{x} \quad z = 2x_1+3x_2+x_3 \\s.t.\begin{cases}x_1 + 4x_2 + 2x_3 \geqslant 8 \\3x_1 + 2x_2 \geqslant 6 \\x_1, x_2, x_3 \geqslant 0\end{cases}</script><p>化为Matlab标准形式：</p><script type="math/tex; mode=display">\min\limits_{x} \quad z = fval = 2x_1 + 3x_2 + x_3 \\s.t.\begin{cases}\begin{bmatrix}-1 & -4 & -2 \\-3 & -2 & 0\end{bmatrix}\begin{bmatrix}x_1 \\x_2 \\x_3\end{bmatrix}\leqslant\begin{bmatrix}-8 \\-6\end{bmatrix} \\\begin{bmatrix}x_1 \\x_2 \\x_3\end{bmatrix}\geqslant 0\end{cases}</script><p>matlab代码：</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>];</span><br><span class="line">A = [<span class="number">-1</span>,<span class="number">-4</span>,<span class="number">-2</span>;<span class="number">-3</span>,<span class="number">-2</span>,<span class="number">0</span>]</span><br><span class="line">b = [<span class="number">-8</span>;<span class="number">-6</span>]</span><br><span class="line">[x, fval] = linprog(f, A, b, [], [], <span class="built_in">zeros</span>(<span class="number">3</span>, <span class="number">1</span>))</span><br></pre></td></tr></table></figure><p>结果：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/image-20230111195651964.png" alt="image-20230111195651964" style="zoom:50%;" /></p><p>即最优解为：$x_1=2.0000,x_2=0,x_3=3.0000$；最优值为：$z=7$。</p><h2 id="1-6-可转化为线性规划的问题"><a href="#1-6-可转化为线性规划的问题" class="headerlink" title="1.6 可转化为线性规划的问题"></a>1.6 可转化为线性规划的问题</h2><p>例如：规划问题为：</p><script type="math/tex; mode=display">\min\limits_{x}\quad \left| x_1 \right| + \left| x_2 \right| + \cdots + \left| x_n \right| \\s.t. \qquad Ax \leqslant b</script><p>其中：$x=[x_1, \cdots,x_n] ^ T$，$A$和$b$为相应维数的矩阵和向量。</p><p>​        要把上面的问题编程线性规划问题，要考虑到：</p><script type="math/tex; mode=display">\forall x_i，\exists u_i,v_i \gt 0 \\满足 \qquad x_i=u_i-v_i，\left| x_i \right|=u_i+v_i\qquad</script><p>所以，只需要取 $u_i=\frac{x_i+\left|x_i\right|}{2}$ , $v_i=\frac{\left| x_i \right| - x_i}{2}$ ,就可以满足上面的条件。</p><p>​        这样：记$u=[u_1,\cdots,u_n]^T,v=[v_1,\cdots,v_n]^T$，从而我们可以把上面的问题变成：</p><script type="math/tex; mode=display">\min\limits_{u,v}\quad \sum\limits_{i=1}^{n} (u_i+v_i) \\s.t.\begin{cases}u, v \geqslant 0 \\A(u-v) \leqslant b\end{cases}</script><h1 id="2-实际案例"><a href="#2-实际案例" class="headerlink" title="2 实际案例"></a>2 实际案例</h1><h2 id="2-1-投资的收益和风险"><a href="#2-1-投资的收益和风险" class="headerlink" title="2.1 投资的收益和风险"></a>2.1 投资的收益和风险</h2><h3 id="2-1-1-问题"><a href="#2-1-1-问题" class="headerlink" title="2.1.1 问题"></a>2.1.1 问题</h3><p>​        市场上有$n$种资产$s_i(i=1,2,\cdots,n)$可以选择，现用数额为$M$的相当大的资金作一个时期的投资。这$n$种资产在这一时期内购买$s_i$的平均收益率为$r_i$，风险损失率为$q_i$，投资越分散，总的风险越少，总体风险可用投资的$s_i$中最大的一个风险来度量。</p><p>​        购买$s_i$时要付交易费，费率为$p_i$，当购买额不超过给定值$u_i$时，交易费按购买$u_i$计算。另外，假定同期银行存款利率是$r_0$，既无交易费又无风险（$r_0$=5%)。</p><p>​        已知$n=4$时相关数据如表：</p><div class="table-container"><table><thead><tr><th style="text-align:center">$s_i$</th><th style="text-align:center">$r_i$(%)</th><th style="text-align:center">$q_i$(%)</th><th style="text-align:center">$p_i$(%)</th><th style="text-align:center">$u_i$(元)</th></tr></thead><tbody><tr><td style="text-align:center">$s_1$</td><td style="text-align:center">28</td><td style="text-align:center">2.5</td><td style="text-align:center">1</td><td style="text-align:center">103</td></tr><tr><td style="text-align:center">$s_2$</td><td style="text-align:center">21</td><td style="text-align:center">1.5</td><td style="text-align:center">2</td><td style="text-align:center">198</td></tr><tr><td style="text-align:center">$s_3$</td><td style="text-align:center">23</td><td style="text-align:center">5.5</td><td style="text-align:center">4.5</td><td style="text-align:center">52</td></tr><tr><td style="text-align:center">$s_4$</td><td style="text-align:center">25</td><td style="text-align:center">2.6</td><td style="text-align:center">6.5</td><td style="text-align:center">40</td></tr></tbody></table></div><p>​        试给该公式设计一种投资组合方案，即用给定资金$M$，有选择第购买若干种资产或存银行生息，使净收益尽可能大，使总体风险尽可能小。</p><h3 id="2-1-2-解答"><a href="#2-1-2-解答" class="headerlink" title="2.1.2 解答"></a>2.1.2 解答</h3><h4 id="2-1-2-1-符号规定："><a href="#2-1-2-1-符号规定：" class="headerlink" title="2.1.2.1 符号规定："></a>2.1.2.1 符号规定：</h4><ul><li>$s_i$表示第$i$种投资项目，如股票，债券等，$i=0,1,\cdots,n$，其中$s_0$表示存入银行；</li><li>$r_i,p_i,q_i$分别表示$s_i$的平均收益率，交易费率，风险损失率，$i=0,\cdots,n$，其中$p_0=0$，$q_0=0$；</li><li>$u_i$表示$s_i$的交易定额，$i=1,\cdots,n$；</li><li>$x_i$表示投资项目$s_i$的资金，$i=0,1,\cdots,n$；</li><li>$a$表示投资风险度；</li><li>$Q$表示总体收益；</li></ul><h4 id="2-1-2-2-基本假设："><a href="#2-1-2-2-基本假设：" class="headerlink" title="2.1.2.2 基本假设："></a>2.1.2.2 基本假设：</h4><ul><li>投资数额$M$相当大，为了便于计算，假设$M=1$；</li><li>投资越分散，总的风险越小；</li><li>总体风险用投资项目$s_i$中最大的一个风险来度量；</li><li>$n+1$种资产$s_i$之间是相互独立的；</li><li>在投资的这一时期内，$r_i,p_i,q_i$为定值，不受意外因素影响；</li><li>净收益和总体风险只受$r_i,p_i,q_i$影响，不受其它因素干扰。</li></ul><h4 id="2-1-2-3-模型的分析与建立"><a href="#2-1-2-3-模型的分析与建立" class="headerlink" title="2.1.2.3 模型的分析与建立"></a>2.1.2.3 模型的分析与建立</h4><ol><li><p>总体风险用所投资的$s_i$中最大的一个风险类衡量，即</p><script type="math/tex; mode=display"> max\,\{q_ix_i|i=1,2,\cdots,n\}.</script></li><li><p>购买$s_i(i=1,\cdots,n)$所付交易费是一个分段函数，即</p><script type="math/tex; mode=display"> 交易费= \begin{cases} p_ix_i, & x_i \gt u_i, \\ p_ix_i, & x_i \leqslant u_i. \end{cases}</script><p> 而题目所给的定值$u_i$（单位：元）相对总投资$M$很少($u_i\ll M$)，$p_iu_i$更小，这样购买$s_i$的净收益可以简化为$(r_i - p_i)x_i$。</p></li><li><p>总净收益为银行利息加$s_i$的净收益</p><script type="math/tex; mode=display"> Q = r_0x_0 + \sum\limits_{i=1}^n (r_i - p_i)x_i</script><p> 其中因为银行没有交易费率，所以令$p_0 = 0$，则：</p><script type="math/tex; mode=display"> Q = \sum\limits_{i=0}^n (r_i-p_i)x_i</script></li><li><p>要使净收益尽可能大，总体风险尽可能小，这是一个多目标规划模型。</p></li></ol><h5 id="2-1-2-3-1-归纳模型"><a href="#2-1-2-3-1-归纳模型" class="headerlink" title="2.1.2.3.1 归纳模型"></a>2.1.2.3.1 归纳模型</h5><p>目标函数为：</p><script type="math/tex; mode=display">\begin{cases}\max\limits_{x}\quad \sum\limits_{i=0}^n (r_i - p_i)x_i \\\min\limits_{x}\quad \max\limits_{i}\,\{q_ix_i\}\end{cases}</script><p>约束条件为：</p><script type="math/tex; mode=display">\begin{cases}\sum\limits_{i=0}^n (1+p_i)x_i = M \\x_i \geqslant 0, i = 0, 1, \cdots,n\end{cases}</script><p>这是一个多目标规划模型。</p><h5 id="2-1-2-3-2-多目标规划模型转化为一个目标的线性规划"><a href="#2-1-2-3-2-多目标规划模型转化为一个目标的线性规划" class="headerlink" title="2.1.2.3.2 多目标规划模型转化为一个目标的线性规划"></a>2.1.2.3.2 多目标规划模型转化为一个目标的线性规划</h5><ol><li><p>在实际投资中，投资者承受风险的程度不一样，若给定风险一个界限$a$，使最大的一个风险$\frac{q_ix_i}{M} \leqslant a$（$q_ix_i$为$s_i$的风险费，这里表示风险损失费占比总金额小于一个阈值），可找到相应的投资方案。这样把多目标规划变成一个目标的线性规划。</p><p> <strong>模型一</strong>        固定风险水平，优化收益</p><p> <strong>数学模型</strong></p><script type="math/tex; mode=display"> \max\limits_{x}\quad \sum\limits_{i=0}^n (r_i - p_i)x_i \\ \begin{cases} \frac{q_ix_i}{M} \leqslant a \\ \sum\limits_{i=0}^n (1+p_i)x_i = M \\ x_i \geqslant 0, i = 0, 1, \cdots,n \end{cases}</script><p> <strong>化为Matlab标准形式（$M=1$）</strong>：</p><script type="math/tex; mode=display"> \min\limits_{x}\quad fval = -0.05x_0-0.27x_1-0.19x_2-0.185x_3-0.185x_4 \\ Q = z = -fval \\ \qquad s.t. \begin{cases} 0.025x_1 \leqslant a \\ 0.015x_2 \leqslant a \\ 0.055x_3 \leqslant a \\ 0.026x_4 \leqslant a \\ x_0+1.01x_1+1.02x_2+1.045x_3+1.065x_4 = 1 \\ x_i \geqslant 0, (i=0,1,\cdots,4) \end{cases}</script><p> <strong>Matlab核心代码：</strong></p> <figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f = [<span class="number">-0.05</span>;<span class="number">-0.27</span>;<span class="number">-0.1</span>;,<span class="number">-0.185</span>;<span class="number">-0.185</span>];</span><br><span class="line">A = [<span class="built_in">zeros</span>(<span class="number">4</span>,<span class="number">1</span>),<span class="built_in">diag</span>([<span class="number">0.025</span>,<span class="number">0.015</span>,<span class="number">0.055</span>,<span class="number">0.026</span>])];</span><br><span class="line">b = a*<span class="built_in">ones</span>(<span class="number">4</span>,<span class="number">1</span>); <span class="comment">% 但是这里的a没有赋值，老哥利用循环遍历，最终绘制曲线</span></span><br><span class="line">Aeq = [<span class="number">1</span>, <span class="number">1.01</span>, <span class="number">1.02</span>, <span class="number">1.045</span>, <span class="number">1.065</span>];</span><br><span class="line">beq = <span class="number">1</span>;</span><br><span class="line">lb = <span class="built_in">zeros</span>(<span class="number">5</span>, <span class="number">1</span>)</span><br><span class="line">[x, fval] = linprog(f, A, b, Aeq, beq, lb);</span><br></pre></td></tr></table></figure><p> 因为$a$没有赋值，令$a = 0$，步长$\Delta a = 0.001$进行循环搜索并绘图。</p><p> <strong>matlab绘制曲线：</strong></p> <figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="keyword">while</span> a &lt; <span class="number">0.05</span></span><br><span class="line">f = [<span class="number">-0.05</span>;<span class="number">-0.27</span>;<span class="number">-0.19</span>;<span class="number">-0.185</span>;<span class="number">-0.185</span>];</span><br><span class="line">A = [<span class="built_in">zeros</span>(<span class="number">4</span>,<span class="number">1</span>),<span class="built_in">diag</span>([<span class="number">0.025</span>,<span class="number">0.015</span>,<span class="number">0.055</span>,<span class="number">0.026</span>])];</span><br><span class="line">b = a*<span class="built_in">ones</span>(<span class="number">4</span>,<span class="number">1</span>);</span><br><span class="line">Aeq = [<span class="number">1</span>, <span class="number">1.01</span>, <span class="number">1.02</span>, <span class="number">1.045</span>, <span class="number">1.065</span>];</span><br><span class="line">beq = <span class="number">1</span>;</span><br><span class="line">lb = <span class="built_in">zeros</span>(<span class="number">5</span>,<span class="number">1</span>)</span><br><span class="line">[x, fval] = linprog(f, A, b, Aeq, beq, lb);</span><br><span class="line">Q = -fval;</span><br><span class="line"><span class="built_in">plot</span>(a, Q, <span class="string">&#x27;*k&#x27;</span>);</span><br><span class="line">a = a + <span class="number">0.001</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">xlabel(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;Q&#x27;</span>);</span><br></pre></td></tr></table></figure><p> 结果：</p><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/image-20230111213013690.png" alt="image-20230111213013690" style="zoom:50%;" /></p></li><li><p>在实际投资中，可以固定一个盈利水平，例如盈利$\sum\limits_{i=0}^n (r_i - p_i)x_i \geqslant k$总盈利大于阈值$k$，之后就专注于降低风险度。可找到相应的投资方案。</p><p> <strong>模型二</strong>        固定盈利水平，极小化风险</p><p> <strong>数学模型</strong></p><script type="math/tex; mode=display"> \min\limits_{x}\quad \max\limits_{i}\,\{q_ix_i\} \\ s.t. \begin{cases} \sum\limits_{i=0}^n (r_i - p_i)x_i \geqslant k \\ \sum\limits_{i=0}^n (1+p_i)x_i = M \\ x_i \geqslant 0, i = 0, 1, \cdots,n \end{cases}</script></li></ol><ol><li><p>投资者在权衡资产风险和预期收益两方面时，希望选择一个令自己满意的投资组合。此时对风险、收益率分别赋予权重$s(0&lt;s\leqslant 1)$ 和 $(1-s)$，$s$称为投资偏好系数。</p><p> <strong>模型三</strong>        利用投资偏好系数平衡风险和收益率</p><p> <strong>数学模型</strong></p><script type="math/tex; mode=display"> \min\limits_{x}\quad s\cdot \max\limits_{i}\,\{q_ix_i\}-(1-s)\sum\limits_{i=0}^n (r_i-p_i)x_i\\ s.t. \begin{cases} \sum\limits_{i=0}^n (1+p_i)x_i = M,\\ x_i \geqslant 0, i = 0, 1, 2, \cdots,n \end{cases}</script></li></ol>]]></content>
      
      
      <categories>
          
          <category> 数学建模 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数学建模 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql安装配置</title>
      <link href="/posts/4261103898.html"/>
      <url>/posts/4261103898.html</url>
      
        <content type="html"><![CDATA[<h1 id="下载MySQL"><a href="#下载MySQL" class="headerlink" title="下载MySQL"></a>下载MySQL</h1><p>到<a href="https://www.mysql.com">官网下载</a></p><p>然后在上面点击Downloads。</p><p>找到下面的社区链接：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-19%2018.01.38.png" alt="截屏2023-01-19 18.01.38" style="zoom:50%;" /></p><p>点进去</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-19%2018.02.35.png" alt="截屏2023-01-19 18.02.35" style="zoom:50%;" /></p><p>打开后的界面：</p><p>也可以筛选一下系统 </p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-19%2018.18.40.png" alt="截屏2023-01-19 18.18.40" style="zoom: 33%;" /></p><p>可以选择DMG格式的安装包（第一个）：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-19%2018.23.11.png" alt="截屏2023-01-19 18.23.11" style="zoom:33%;" /></p><p>点击Download，跳转页面后点击 下面的一行字即可，不用登录(点击No thanks， just start mu download.)</p><h1 id="安装MySQL"><a href="#安装MySQL" class="headerlink" title="安装MySQL"></a>安装MySQL</h1><p>安装好后打开安装包。里面是一个pkg文件，点击打开。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-19%2018.28.58.png" alt="截屏2023-01-19 18.28.58"></p><p>解下来点击继续即可，使用默认位置。</p><p>configure选择第二个，不使用加强密码：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-19%2018.30.24.png" alt="截屏2023-01-19 18.30.24"></p><p>点击Next设置至少8位数的密码。然后Finish。</p><p>在系统便好设置中可以看到多了MySQL的服务：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-19%2018.32.56.png" alt="截屏2023-01-19 18.32.56"></p><h1 id="登录配置MySQL"><a href="#登录配置MySQL" class="headerlink" title="登录配置MySQL"></a>登录配置MySQL</h1><p>终端输入：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure><p>如过说找不到命令就是没有配置环境。配置环境：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bash_profile</span><br></pre></td></tr></table></figure><p>配置：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MYSQL_HOME=/usr/local/mysql <span class="comment"># mysql的位置可在设置里的mysql服务中看到</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$MTSQL_HOME</span>/bin</span><br></pre></td></tr></table></figure><hr><p>验证配置成功：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqladmin --version</span><br></pre></td></tr></table></figure><p>看是否正常显示版本。</p><hr><p>登录mysql：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure><p>可以输入密码，登录就成功了。</p>]]></content>
      
      
      <categories>
          
          <category> 编程环境 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
            <tag> MySQL </tag>
            
            <tag> 环境 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python环境</title>
      <link href="/posts/1605124548.html"/>
      <url>/posts/1605124548.html</url>
      
        <content type="html"><![CDATA[<h1 id="下载python"><a href="#下载python" class="headerlink" title="下载python"></a>下载python</h1><p>在<a href="https://www.python.org">python官网</a>上进行下载。</p><p>进入页面后选择Downloads，在下拉框中选择macOS。</p><p>之后选择一个稳定版本下载即可。我选择的是3.10.3。最好不要太新，否则不稳定；也不要太旧。</p><p>下载好后我放到了<code>/opt/devTools</code>目录下，<code>devTools</code>是我的自建目录。</p><h1 id="安装python"><a href="#安装python" class="headerlink" title="安装python"></a>安装python</h1><p>直接双击下载好的pkg文件即可。</p><p>之后就一直继续即可，该同意的同意，该输密码的输入密码。</p><p>安装好后终端输入python3命令，如过有效就行了。输入<code>python3</code>后就可以输入代码了，例如<code>print(&quot;Hello World!&quot;)</code>输入<code>exit()</code>退出。</p><p>但是我的python3之后的版本好像有问题，我输入<code>ls /Library/Frameworks/Python.framework/Versions</code>命令查看后又是对的。我也很迷惑。于是上网搜索了结果。可以给python3设置别名和命令目录。如下：</p><p>解下来就是查找python的安装位置。输入命令：<code>which python3</code>即可看到。记住它，去配置环境变量。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bash_profile <span class="comment"># 打开vim</span></span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在vim中编辑</span></span><br><span class="line"><span class="built_in">alias</span> python=<span class="string">&quot;/usr/local/bin/python3&quot;</span> <span class="comment">#which查出来的路径</span></span><br></pre></td></tr></table></figure><p>保存退出。</p><p>然后刷新资源。<strong>注意</strong>：我是之前在<code>~/.zshrc</code>下配置了：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure><p>这样就相当于给<code>~/.zshrc</code>配置了。我刷新资源：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure><p>这样输入python即可使用了，不需要再输入python3了，版本也正确了。</p><hr><p>如果直接使用pip3，无法找到，这是因为没有配置pip3，解下来配置；</p><p>打开配置文件：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bash_profile</span><br></pre></td></tr></table></figure><p>配置：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> pip=<span class="string">&quot;/usr/local/bin&quot;</span> <span class="comment"># 它是和python3在同级目录的</span></span><br></pre></td></tr></table></figure><p>刷新资源：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure><p>再输入pip就OK了</p><p>更新pip：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install --upgrade pip</span><br></pre></td></tr></table></figure><hr><h2 id="配置国内镜像源："><a href="#配置国内镜像源：" class="headerlink" title="配置国内镜像源："></a>配置国内镜像源：</h2><p>清华大学pypi镜像站(<a href="https://mirrors.tuna.tsinghua.edu.cn/help/pypi/">https://mirrors.tuna.tsinghua.edu.cn/help/pypi/</a>)<br>清华大学：<a href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a><br>阿里云：<a href="http://mirrors.aliyun.com/pypi/simple/">http://mirrors.aliyun.com/pypi/simple/</a><br>豆瓣：<a href="http://pypi.douban.com/simple/">http://pypi.douban.com/simple/</a></p><p>临时使用：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pip install -i http://pypi.douban.com/simple/ numpy</span><br><span class="line"></span><br><span class="line"><span class="comment">#如果上一个提示不受信任，就使用这个，此参数“--trusted-host”表示信任</span></span><br><span class="line">pip install -i http://pypi.douban.com/simple/ --trusted-host pypi.douban.com  </span><br></pre></td></tr></table></figure><p>永久使用：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> ~/.pip</span><br><span class="line"><span class="built_in">cd</span> ~/.pip</span><br><span class="line"><span class="built_in">touch</span> pip.conf</span><br><span class="line">vim ~/.pip/pip.conf</span><br></pre></td></tr></table></figure><p>写下内容：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">index-url = http://pypi.douban.com/simple/</span><br><span class="line">[install]</span><br><span class="line">trusted-host = http://pypi.douban.com</span><br></pre></td></tr></table></figure><h1 id="Pycharm使用解释器"><a href="#Pycharm使用解释器" class="headerlink" title="Pycharm使用解释器"></a>Pycharm使用解释器</h1><p>路径就是<code>which python3</code>之后出现的路径了。</p><p>选择现有解释器，最好不要新建，新建之后pycharm就不能直接使用外部终端pip的模块了。</p>]]></content>
      
      
      <categories>
          
          <category> 编程环境 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
            <tag> 环境 </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac文件系统</title>
      <link href="/posts/595890772.html"/>
      <url>/posts/595890772.html</url>
      
        <content type="html"><![CDATA[<h1 id="如何显示隐藏文件"><a href="#如何显示隐藏文件" class="headerlink" title="如何显示隐藏文件"></a>如何显示隐藏文件</h1><p>快捷键：<code>command+shift+.</code></p><h1 id="目录类型"><a href="#目录类型" class="headerlink" title="目录类型"></a>目录类型</h1><p>这里只介绍Linux和Mac中都有的主要目录。</p><h2 id="bin"><a href="#bin" class="headerlink" title="bin"></a>bin</h2><p>包含一些二进制文件的目录，即可以运行的一些应用程序。一些基础的命令就存储在这里，例如：ls，rm等。</p><h2 id="etc"><a href="#etc" class="headerlink" title="etc"></a>etc</h2><p>存放配置内容的地方。一般的系统配置文件就存储在这里。例如：<code>/etc/hosts</code>配置端口等，用户，用户组，密码都是在这里配置，例如；<code>/etc/sudoers</code>。</p><h2 id="home"><a href="#home" class="headerlink" title="home"></a>home</h2><p>主要是用户个人的目录信息，Mac中没存东西</p><h2 id="opt"><a href="#opt" class="headerlink" title="opt"></a>opt</h2><p>这个目录通常是编译软件（从源代码构建）的地方。应用程序最终会出现在<code>/opt/bin</code>目录下，库会在<code>/opt/lib</code>下</p><h2 id="sbin"><a href="#sbin" class="headerlink" title="sbin"></a>sbin</h2><p>与<code>/bin</code>类似，但它包含的应用程序是超级用户才能使用的，需要在这些命令前加上<code>sudo</code>。</p><h2 id="usr"><a href="#usr" class="headerlink" title="usr"></a>usr</h2><p><code>/usr</code> 目录是在 UNIX 早期用户的主目录所处的地方。然而，正如我们上面看到的，现在 <code>/home</code> 是用户保存他们的东西的地方。如今，<code>/usr</code> 包含了大量目录，而这些目录又包含了应用程序、库、文档、壁纸、图标和许多其他需要应用程序和服务共享的内容。</p><p>你还可以在 <code>/usr</code> 目录下找到 <code>bin</code>，<code>sbin</code>，<code>lib</code> 目录，它们与挂载到根目录下的那些有什么区别呢？现在的区别不是很大。在早期，<code>/bin</code> 目录（挂载在根目录下的）只会包含一些基本的命令，例如 <code>ls</code>、<code>mv</code> 和 <code>rm</code> ；这是一些在安装系统的时候就会预装的一些命令，用于维护系统的一个基本的命令。 而 <code>/usr/bin</code> 目录则包含了用户自己安装和用于工作的软件，例如文字处理器，浏览器和一些其他的软件。</p><p>但是许多现代的 Linux 发行版只是把所有的东西都放到 <code>/usr/bin</code> 中，并让 <code>/bin</code> 指向 <code>/usr/bin</code>，以防彻底删除它会破坏某些东西。因此，Debian、Ubuntu 和 Mint 仍然保持 <code>/bin</code> 和 <code>/usr/bin</code> （和 <code>/sbin</code> 和 <code>/usr/sbin</code> ）分离；其他的，比如 Arch 和它衍生版，只是有一个“真实”存储二进制程序的目录，<code>/usr/bin</code>，其余的任何 <code>bin</code> 目录是指向 <code>/usr/</code>bin` 的“假”目录。</p><h2 id="tmp"><a href="#tmp" class="headerlink" title="tmp"></a>tmp</h2><p>存放临时文件，通常由正在运行的应用程序放置。文件和目录通常包含应用程序的现在不需要但以后可能需要的数据。</p><h1 id="下载的软件该放在什么地方"><a href="#下载的软件该放在什么地方" class="headerlink" title="下载的软件该放在什么地方"></a>下载的软件该放在什么地方</h1><p>通常是两个地方：<code>/usr/local</code>、<code>/opt</code></p><p><code>/usr</code> 系统级的目录，可以理解为 <code>C:/Windows/</code> ， <code>/usr/lib</code> 可理解为 <code>C:/Windows/System32</code> 。</p><p><code>/usr/local</code> 用户级的程序目录，可以理解为 <code>C:/Progrem Files/</code> 。用户自己编译的软件默认会安装到这个目录下。</p><p><code>/opt</code> 用户级的程序目录，可以理解为 <code>D:/Software</code> ， <code>opt</code> 有可选的意思，这里可以用于放置第三方大型软件（或游戏），当你不需要时，直接 <code>rm -rf</code> 掉即可。</p><p>在硬盘容量不够时，也可将 <code>/opt</code> 单独挂载到其他磁盘上使用。</p><p>选择原则：</p><p>如果你认为是系统提供给你可选的程序，放在<code>/opt</code>里<br>如果你认为这是你个人行为，自主安装的，放在<code>/usr/local</code>里<br>如果你觉得对你来说是必不可少的运行库，放在<code>/usr/lib</code>里</p><h4 id="源码放哪里？"><a href="#源码放哪里？" class="headerlink" title="源码放哪里？"></a>源码放哪里？</h4><p><code>/usr/src</code> 系统级的源码目录。</p><p><code>/usr/local/src</code> 用户级的源码目录。</p><ul><li><p><code>opt</code></p><p>  这里主要存放那些可选的程序。你想尝试最新的firefox测试版吗?那就装到/opt目录下吧，这样，当你尝试完，想删掉firefox的时候，你就可 以直接删除它，而不影响系统其他任何设置。安装到/opt目录下的程序，它所有的数据、库文件等等都是放在同个目录下面。</p><p>  举个例子：刚才装的测试版firefox，就可以装到/opt/firefox_beta目录下，/opt/firefox_beta目录下面就包含了运行firefox所需要的所有文件、库、数据等等。要删除firefox的时候，你只需删除/opt/firefox_beta目录即可，非常简单。</p></li><li><p><code>usr/local</code></p><p>  这里主要存放那些手动安装的软件，即不是通过“新立得”或apt-get安装的软件。它和/usr目录具有相类似的目录结构。让软件包管理器来管理/usr目录，而把自定义的脚本(scripts)放到/usr/local目录下面，我想这应该是个不错的主意。</p></li></ul><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>jdk、maven、python等安装到/usr/local目录下。</p><p>大型应用可以放在/opt下。</p><p>但是我选择在/opt下新建文件夹devTools，用来存放jdk等。</p>]]></content>
      
      
      <categories>
          
          <category> 操作系统 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UTM安装配置Ubuntu</title>
      <link href="/posts/694347442.html"/>
      <url>/posts/694347442.html</url>
      
        <content type="html"><![CDATA[<h1 id="下载UTM虚拟机"><a href="#下载UTM虚拟机" class="headerlink" title="下载UTM虚拟机"></a>下载UTM虚拟机</h1><p>其他虚拟机也可以，类似的。主要是这个免费，其他的破解起来太麻烦了，具体什么性能差异我也不太了解，我也不太感兴趣，总不至于一个Hello World级的程序多运行一分钟吧。🤔</p><p>下载地址：<a href="https://mac.getutm.app">https://mac.getutm.app</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2008.46.29.png" alt="截屏2023-01-18 08.46.29"></p><p>直接点击Download即可。</p><p>点击Mac App Store会跳转到苹果应用商店，收费¥50。</p><h1 id="下载Ubuntu"><a href="#下载Ubuntu" class="headerlink" title="下载Ubuntu"></a>下载Ubuntu</h1><p>M1是arm版本，直接访问：<a href="https://ubuntu.com/download/server/arm">https://ubuntu.com/download/server/arm</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2008.49.35.png" alt="截屏2023-01-18 08.49.35"></p><p>点击Download Ubuntu 22.04.1 LTS（绿色按钮）就行了。</p><h1 id="安装qemu"><a href="#安装qemu" class="headerlink" title="安装qemu"></a>安装qemu</h1><p>直接利用Homebrew安装即可：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install qemu</span><br></pre></td></tr></table></figure><h1 id="创建Ubuntu虚拟机"><a href="#创建Ubuntu虚拟机" class="headerlink" title="创建Ubuntu虚拟机"></a>创建Ubuntu虚拟机</h1><p>刚进入到的界面：</p><p>点击新建一个虚拟机。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2008.53.23.png" alt="截屏2023-01-18 08.53.23" style="zoom:50%;" /></p><p>选择虚拟化：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2008.56.37.png" alt="截屏2023-01-18 08.56.37" style="zoom:50%;" /></p><p>选择其他（选择Linux也可以，简单一点）：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.07.48.png" alt="截屏2023-01-18 09.07.48" style="zoom:50%;" /></p><p>点击浏览选择下载的ubuntu镜像：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.10.23.png" alt="截屏2023-01-18 09.10.23" style="zoom:50%;" /></p><p>配置硬件信息，默认就好了：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.11.54.png" alt="截屏2023-01-18 09.11.54" style="zoom:50%;" /></p><p>设置存储器的大小：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.17.57.png" alt="截屏2023-01-18 09.17.57" style="zoom:50%;" /></p><p>设置共享文件夹，这个可以一定程度上代替xftp、Filezilla，意思就是用一个文件夹来使得主机的虚拟机共享文件：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.23.32.png" alt="截屏2023-01-18 09.23.32" style="zoom:50%;" /></p><p>给虚拟机取个名字：</p><blockquote><p>我的命名规则是系统源类型+版本+第几台虚拟机。</p><p>因为后续有可能会使用centOS、Windows等其他源、或者其他Ubuntu版本、搭建集群会需要多台虚拟机。这样命名比较好区分。</p></blockquote><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.25.29.png" alt="截屏2023-01-18 09.25.29" style="zoom:50%;" /></p><p>这样虚拟机本身就创建好了，只是内部的ubuntu还没有配置。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fastly.jsdelivr.net/npm/yongruizhang-blogimg@latest/UTM_Ubuntu.png" alt="截屏2023-01-18 09.29.33"></p><p>由于存储器占据空间比较大，可以移动到移动硬盘去，选择下面这个按钮：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.31.05.png" alt="截屏2023-01-18 09.31.05"></p><p>点击之后根据指示操作即可。</p><h1 id="安装配置Ubuntu"><a href="#安装配置Ubuntu" class="headerlink" title="安装配置Ubuntu"></a>安装配置Ubuntu</h1><p>点击运行虚拟机，直接回车即可，选择Try or Install Ubuntu Server：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.34.10.png" alt="截屏2023-01-18 09.34.10"></p><p>语言可以直接选英文，直接回车即可：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.35.08.png" alt="截屏2023-01-18 09.35.08"></p><p>之后基本都是直接选Done了，但是慢一点，仔细看。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.37.44.png" alt="截屏2023-01-18 09.37.44"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.38.48-4006024.png" alt="截屏2023-01-18 09.38.48"></p><p>如过要配置静态IP，下面就先不要直接选择Done，具体跳转<a href="#方法二-直接在安装Ubuntu时配置">静态IP配置</a>：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.39.54.png" alt="截屏2023-01-18 09.39.54"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.41.13.png" alt="截屏2023-01-18 09.41.13"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.41.31.png" alt="截屏2023-01-18 09.41.31"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.42.29.png" alt="截屏2023-01-18 09.42.29"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.43.01.png" alt="截屏2023-01-18 09.43.01"></p><p>选择Continue：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.43.15.png" alt="截屏2023-01-18 09.43.15"></p><p>解下来输入基本信息，如过是自己学习的机子这个无所谓，可以乱输，密码也可以设置地简单些。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.44.40.png" alt="截屏2023-01-18 09.44.40"></p><p>设置好后选择Done。</p><p>我是直接Done，没有选择openSSH，可以根据需要自行选择：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.46.37.png" alt="截屏2023-01-18 09.46.37"></p><p>这里我都没选，直接Done，可根据需求选择：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.47.20.png" alt="截屏2023-01-18 09.47.20"></p><p>开始安装，等待</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.47.47.png" alt="截屏2023-01-18 09.47.47"></p><p>下面这样就是安装好了，选择Reboot NOW，现在重启：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2009.54.46.png" alt="截屏2023-01-18 09.54.46"></p><p>如过一直卡着黑屏，可以先在右上角的驱动中弹出驱动，然后点左上角三角形符号重启虚拟机。</p><p>这样就是可以登陆了，输入账户和密码：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2010.03.51.png" alt="截屏2023-01-18 10.03.51"></p><p>这样就好了：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2010.04.38.png" alt="截屏2023-01-18 10.04.38"></p><p>就可以输入命令了：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2010.05.35.png" alt="截屏2023-01-18 10.05.35"></p><h1 id="配置桌面"><a href="#配置桌面" class="headerlink" title="配置桌面"></a>配置桌面</h1><blockquote><p>上面的是服务器版的，对新手来说不好操作，安装桌面版。</p><p>但是总的来说在Linux环境中基本上也是需要锻炼使用终端的，这和服务器是差不多的，所以我认为没有必要配置。</p></blockquote><p>输入以下命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install ubuntu-desktop</span><br></pre></td></tr></table></figure><p>之后输入密码（因为使用了<code>sudo</code>）等待下载安装，大概有两个G，我等你十分钟左右。</p><p>之后输入完成重启。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure><p>重启之后输入密码就可以进入桌面了。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2010.47.19.png" alt="截屏2023-01-18 10.47.19"></p><p>注意，这样配置是没有浏览器的，需要去应用商店自行下载。</p><h1 id="设置中文"><a href="#设置中文" class="headerlink" title="设置中文"></a>设置中文</h1><blockquote><p>这之后都是选择操作了。</p></blockquote><p>右键，最下面的选项应该就是调出设置。在设置中选择Region &amp; Language：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2010.50.36.png" alt="截屏2023-01-18 10.50.36"></p><p>再选择Manage Installed Languages：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2010.51.20.png" alt="截屏2023-01-18 10.51.20"></p><p>选择Install/Remove Languages</p><p>找到简体中文，点击Apply进行安装：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2010.53.30.png" alt="截屏2023-01-18 10.53.30"></p><p>安装等待个两分钟左右。</p><p>安装好后重启虚拟机。<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2011.18.20.png" alt="截屏2023-01-18 11.18.20"></p><p>重启后，虚拟机中的内容就显示为中文了。</p><h1 id="其他配置"><a href="#其他配置" class="headerlink" title="其他配置"></a>其他配置</h1><h2 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h2><p>试一下网络是否配置成功，ping一下百度。我这里是直接成功的。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2011.20.23.png" alt="截屏2023-01-18 11.20.23"></p><hr><h2 id="IP"><a href="#IP" class="headerlink" title="IP"></a>IP</h2><p>我这里默认是没有安装net-tools的，试试</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig</span><br></pre></td></tr></table></figure><p>是否可以看到IP地址，如果不可以，输入命令（安装网络工具包）：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install net-tools</span><br></pre></td></tr></table></figure><p>这下再试试查看IP。</p><hr><h2 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h2><p>因为后续要搭建集群等，所以我会把防火墙关掉，可选择执行：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service</span><br></pre></td></tr></table></figure><hr><h2 id="root权限"><a href="#root权限" class="headerlink" title="root权限"></a>root权限</h2><p>为了方便，设置用户具有root权限：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/sudoers</span><br></pre></td></tr></table></figure><p>进入配置，添加两行：</p><ol><li><p>在<code>root    ALL=(ALL:ALL) ALL</code>下面添加<code>zyr ALL=(ALL:ALL) ALL</code><strong>注意zyr是用户名，输入自己的。</strong></p></li><li><p>在<code>%sudo ALL=(ALL:ALL) ALL</code>下面输入<code>zyr ALL=(ALL:ALL) NOPASSWD:ALL</code></p></li></ol><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2012.05.23.png" alt="截屏2023-01-18 12.05.23"></p><p>输入完成后，按esc，然后输入<code>:wq</code>保存退出。</p><p>需要重启一下终端。这样操作后对于一些文件仍然没有管理权限，所以有时候使用cp，mv，mkdir命令时还是需要在前面加sudo，这是正常的，不是配置失败。</p><hr><h2 id="静态IP"><a href="#静态IP" class="headerlink" title="静态IP"></a>静态IP</h2><h3 id="方法一-修改配置文件"><a href="#方法一-修改配置文件" class="headerlink" title="方法一 修改配置文件"></a>方法一 修改配置文件</h3><p>查看I网卡名，IP，子网掩码，网关地址：</p><p>输入<code>ifconfig</code>，查看网卡名、IP和子网掩码：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2012.44.36.png" alt="截屏2023-01-18 12.44.36"></p><p>从图片中可以看出：</p><ul><li><p>网卡名为：<code>enp0s1</code>（第二排开头内容）</p></li><li><p>IP为：<code>192.168.64.2</code>（第三排，inet后面的内容）</p></li><li>子网掩码为：<code>255.255.255.0</code>（第三排，netmask后面的内容）</li></ul><p>输入<code>route -n</code>查看网关：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2013.01.34.png" alt="截屏2023-01-18 13.01.34"></p><p>从图片中可以看出：</p><ul><li>网关为：<code>192.168.64.1</code>（网关两个字下面）</li></ul><hr><p>修改配置文件：</p><p>先cd到<code>/etc/netplan</code>目录下。</p><p>可以<code>ls</code>看到文件只有一个，利用<code>cp</code>命令拷贝一份，方便后面恢复：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">cp</span> 00-installer-config.yaml 00-installer-config-before.yaml</span><br></pre></td></tr></table></figure><p>原本的内容为：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This is the network config written by &#x27;subiquity&#x27;</span></span><br><span class="line">network:</span><br><span class="line">  ethernets:</span><br><span class="line">    enp0s1:</span><br><span class="line">      dhcp4: <span class="literal">true</span></span><br><span class="line">  version: 2</span><br></pre></td></tr></table></figure><p>修改为：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">network:</span><br><span class="line">  version: 2</span><br><span class="line">  ethernets:</span><br><span class="line">    enp0s1:   <span class="comment"># 网卡名称</span></span><br><span class="line">      dhcp4: no     <span class="comment"># 关闭dhcp4</span></span><br><span class="line">      addresses: [192.168.64.103/24]  <span class="comment"># 静态ip</span></span><br><span class="line">      routes:</span><br><span class="line">      - to: default</span><br><span class="line">        via: 192.168.64.1</span><br><span class="line">      nameservers:</span><br><span class="line">        addresses: [8.8.8.8,114.114.114.114] <span class="comment">#dns</span></span><br></pre></td></tr></table></figure><hr><p>然后应用配置：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo netplan apply</span><br></pre></td></tr></table></figure><h3 id="方法二-直接在安装Ubuntu时配置"><a href="#方法二-直接在安装Ubuntu时配置" class="headerlink" title="方法二 直接在安装Ubuntu时配置"></a>方法二 直接在安装Ubuntu时配置</h3><p>选择到enp0s1（其他电脑可能是ens33等），回车</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2015.43.42.png" alt="截屏2023-01-18 15.43.42"></p><p>回车之后选择IPV4：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2015.44.34.png" alt="截屏2023-01-18 15.44.34"></p><p>到下面的界面就直接再按一下回车：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2015.45.12.png" alt="截屏2023-01-18 15.45.12"></p><p>上一步按下回车后就可以选择IPv4的method</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2015.45.49.png" alt="截屏2023-01-18 15.45.49"></p><p>选择Manual，回车：</p><p>在接下来的页面输入信息</p><ul><li><p>Subnet：<code>网关的最后一个数减一/24</code>注意这后面不一定是24，也可能是26等，注意自行搜索</p><p>  我的网关是：<code>192.168.64.1</code>，所以我这里填的是：<code>192.168.64.0/24</code></p></li><li><p>Addresses：填写静态IP，就是之后固定的IP，这里我写的是<code>192.168.64.103</code>这里最好要让网段保持一致，前三个数最好和网关一致</p></li><li><p>Gateway：这个就是网关，我的是<code>192.168.64.1</code></p></li><li><p>Name servers：DNS解析路径，可以直接写<code>114.114.114.114,8.8.8.8</code>大家都一样，没有差异。</p></li><li><p>Search domains：我是空着的。</p></li></ul><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2015.46.54.png" alt="截屏2023-01-18 15.46.54"></p><p>填写好后选择Save，就OK了。之后步骤继续看<a href="#安装配置Ubuntu">安装配置Ubuntu</a></p><p>最后安装好后检查一下：</p><p>我这里是直接使用的server端，没有使用桌面端，桌面端就是打开终端输入也行。</p><p>输入：</p><p>如过没有安装过net-tools就先安装：<code>sudo apt install net-tools</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看IP地址是否是静态了</span></span><br><span class="line">ifconfig</span><br><span class="line"><span class="comment"># 查看网关是否正确</span></span><br><span class="line">route -n</span><br><span class="line"><span class="comment"># 查看能否上网</span></span><br><span class="line">ping www.baidu.com</span><br><span class="line"><span class="comment"># 能否ping通主机,这里写自己的IP地址</span></span><br><span class="line">ping 192.168.10.103</span><br></pre></td></tr></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2015.55.14.png" alt="截屏2023-01-18 15.55.14"></p><p>ping的时候要0丢包才行。</p><p>之后可以试试主机ping一下服务器：</p><p>就是ping 后面跟着服务器配置静态IP时的地址：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2015.59.39.png" alt="截屏2023-01-18 15.59.39"></p><p>都能相互ping通就成功了。</p><blockquote><p>如过服务器可以ping通主机，但是主机无法ping通服务器，就需要关闭防火墙，看上面。</p></blockquote><h2 id="终端连接Ubuntu"><a href="#终端连接Ubuntu" class="headerlink" title="终端连接Ubuntu"></a>终端连接Ubuntu</h2><p>请参看：<a href="/posts/4192183953.html" title="终端连接Ubuntu">终端连接Ubuntu</a><br><!-- [终端连接Ubuntu](4192183953) --></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
            <tag> Java后端 </tag>
            
            <tag> 操作系统 </tag>
            
            <tag> Linux </tag>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git笔记</title>
      <link href="/posts/1470079887.html"/>
      <url>/posts/1470079887.html</url>
      
        <content type="html"><![CDATA[<h1 id="Mac下git的安装配置"><a href="#Mac下git的安装配置" class="headerlink" title="Mac下git的安装配置"></a>Mac下git的安装配置</h1><p>安装：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install git</span><br></pre></td></tr></table></figure><p>配置：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;用户名&quot;</span></span><br><span class="line"></span><br><span class="line">git config --global user.email <span class="string">&quot;邮箱&quot;</span></span><br></pre></td></tr></table></figure><p> 环境变量可配可不配。如果是按照上面的方式安装的git就自动配好了。如果没配其实也无所谓的，可以直接打开。</p><h1 id="git基本理论"><a href="#git基本理论" class="headerlink" title="git基本理论"></a>git基本理论</h1><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-21%2010.19.12.png" alt="截屏2023-01-21 10.19.12" style="zoom:50%;" /></p><ul><li>WorkSpace：工作区，就是平时存放项目代码的地方</li><li>Index/Stage：暂存区</li><li>Repository：仓库区，本地仓库，安全存放数据的位置，这里有提交的所有版本的数据</li><li>Remote：远程仓库，代码托管的服务器</li></ul><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-21%2010.34.36.png" alt="截屏2023-01-21 10.34.36" style="zoom: 33%;" /></p><ul><li>Directory：使用Git管理的一个目录，也就是一个仓库，包含我们的工作空间和Git的管理空间。</li><li>WorkSpace：需要用哟Git进行版本控制的目录和文件，这些目录和文件组成了工作空间。</li><li>.git：存放Git进行本本控制的目录和文件，这些目录和文件组成了工作空间</li><li>Inde/Stage：暂存区，或者叫待提交更新区，在提交进入repo之前，我们可以把所有更新放在暂存区</li><li>Local Repo：本地仓库，一个存放在本地的版本库，HEAD会只是当前开发的分区</li><li>Stash：隐藏，是一个工作状态保存栈，用于保存/恢复WorkSpace中的临时状态</li></ul><h1 id="工作流程"><a href="#工作流程" class="headerlink" title="工作流程"></a>工作流程</h1><ol><li>在工作目录中添加，修改，写文件、代码——已修改（modified）</li><li>将需要进行版本管理的文件放入暂存区——已暂存（staged）</li><li>将暂存区中的文件提交到git仓库——已提交（commited）</li></ol><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-21%2011.27.44.png" alt="截屏2023-01-21 11.27.44"></p><h1 id="Git项目搭建"><a href="#Git项目搭建" class="headerlink" title="Git项目搭建"></a>Git项目搭建</h1><h2 id="创建工作目录"><a href="#创建工作目录" class="headerlink" title="创建工作目录"></a>创建工作目录</h2><p>工作目录（Workspace）就是希望Git帮忙管理的文件夹，可以是项目的目录，也可以是一个空目录</p><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-21%2011.31.12.png" alt="截屏2023-01-21 11.31.12"></p><ul><li><p><code>git init</code></p><p>  初始化本地仓库，创建一个全新的仓库，在需要用GIt管理的项目的根目录执行</p><p>  执行之后可以看到，在项目目录里多出了一个.git目录，关于版本等多所有信息都在这个目录里面</p></li><li><p><code>git clone [url]</code></p><p>  克隆远程目录，相当于是将远程服务器上的仓库完全镜像一份至本地</p></li></ul><h2 id="文件状态"><a href="#文件状态" class="headerlink" title="文件状态"></a>文件状态</h2><blockquote><p>四种状态</p></blockquote><p>版本控制就是对文件的版本控制，要对文件进行修改、提交等操作，首先要知道文件当前在什么状态，不然可能会提交了现在还不想提交的文件，或者要提交的文件没提交上。</p><ul><li>Untracked: 未跟踪, 此文件在文件夹中, 但并没有加入到git库, 不参与版本控制. 通过<code>git add</code> 状态变为Staged.</li><li>Unmodify: 文件已经入库, 未修改, 即版本库中的文件快照内容与文件夹中完全一致. 这种类型的文件有两种去处, 如果它被修改, 而变为Modified. 如果使用<code>git rm</code>移出版本库, 则成为Untracked文件</li><li>Modified: 文件已修改, 仅仅是修改, 并没有进行其他的操作. 这个文件也有两个去处, 通过<code>git add</code>可进入暂存staged状态, 使用<code>git checkout</code>则丢弃修改过, 返回到unmodify状态, 这个<code>git checkout</code>即从库中取出文件, 覆盖当前修改 !</li><li>Staged: 暂存状态. 执行<code>git commit</code>则将修改同步到库中, 这时库中的文件和本地文件又变为一致, 文件为Unmodify状态. 执行<code>git reset HEAD filename</code>取消暂存, 文件状态为Modified</li></ul><blockquote><p>查看文件状态</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看指定文件状态</span></span><br><span class="line">git status [filename]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有文件状态</span></span><br><span class="line">git status</span><br></pre></td></tr></table></figure><blockquote><p>忽略文件</p></blockquote><p>有些时候我们不想把某些文件纳入版本控制中，比如数据库文件，临时文件，设计文件等</p><p>在主目录下建立”.gitignore”文件，此文件有如下规则：</p><ol><li>忽略文件中的空行或以井号（#）开始的行将会被忽略。</li><li>可以使用Linux通配符。例如：星号（*）代表任意多个字符，问号（？）代表一个字符，方括号（[abc]）代表可选字符范围，大括号（{string1,string2,…}）代表可选的字符串等。</li><li>如果名称的最前面有一个感叹号（!），表示例外规则，将不被忽略。</li><li>如果名称的最前面是一个路径分隔符（/），表示要忽略的文件在此目录下，而子目录中的文件不忽略。</li><li>如果名称的最后面是一个路径分隔符（/），表示要忽略的是此目录下该名称的子目录，而非文件（默认文件或目录都忽略）。</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#为注释</span></span><br><span class="line">*.txt        <span class="comment">#忽略所有 .txt结尾的文件,这样的话上传就不会被选中！</span></span><br><span class="line">!lib.txt     <span class="comment">#但lib.txt除外</span></span><br><span class="line">/temp        <span class="comment">#仅忽略项目根目录下的TODO文件,不包括其它目录temp</span></span><br><span class="line">build/       <span class="comment">#忽略build/目录下的所有文件</span></span><br><span class="line">doc/*.txt    <span class="comment">#会忽略 doc/notes.txt 但不包括 doc/server/arch.txt</span></span><br></pre></td></tr></table></figure><p>后端：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">*.class</span><br><span class="line">*.<span class="built_in">log</span></span><br><span class="line">*.lock</span><br><span class="line"></span><br><span class="line"><span class="comment"># Package File </span></span><br><span class="line">*.jar</span><br><span class="line">*.war</span><br><span class="line">*.ear</span><br><span class="line">target/</span><br><span class="line"></span><br><span class="line">*velocity.log*</span><br><span class="line"></span><br><span class="line"><span class="comment"># STS</span></span><br><span class="line">.apt_generated</span><br><span class="line">.factorypath</span><br><span class="line">.springBeans</span><br><span class="line"></span><br><span class="line"><span class="comment"># IntelliJ IDEA</span></span><br><span class="line">*.iml</span><br><span class="line">*.ipr</span><br><span class="line">*.iws</span><br><span class="line">.idea</span><br><span class="line">.classpath</span><br><span class="line">.project</span><br><span class="line">.settings/</span><br><span class="line">bin/</span><br><span class="line"></span><br><span class="line">*.<span class="built_in">log</span></span><br><span class="line">tmp/</span><br><span class="line"></span><br><span class="line"><span class="comment"># rebel</span></span><br><span class="line">*rebel.xml*</span><br></pre></td></tr></table></figure><h1 id="使用gitee、GitHub"><a href="#使用gitee、GitHub" class="headerlink" title="使用gitee、GitHub"></a>使用gitee、GitHub</h1><p>首先先生成公钥（终端中）：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen</span><br></pre></td></tr></table></figure><p>查看公钥：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><p>复制里面的内容。然后在gitee或GitHub中添加公钥：</p><p>在设置中的安全设置中点击SSH公钥，然后将刚才复制的内容粘贴到公钥输入框里，标题可以不用管。点击确定。</p><p>之后就可以创建仓库了。</p><p>创建好仓库后克隆下来改改吧。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> 仓库的url</span><br></pre></td></tr></table></figure><p>然后在该目录下创建一个springboot项目。</p><p>可以直接把克隆的代码拷贝过来。</p><p>再点击锤子按钮（重新构建项目），右上角就会出现这些按钮：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-21%2014.50.11.png" alt="截屏2023-01-21 14.50.11"></p><p>左边一个是提交到本地，右边一个是推送。</p><p>其实可以用这些辅助按钮，也可以直接在命令行中提交：</p><p>命令行提交：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line"></span><br><span class="line">git commit -m <span class="string">&quot;第一次提交&quot;</span> <span class="comment"># -m选项代表message，即添加文字描述</span></span><br><span class="line"></span><br><span class="line">git push -f git@gitee.com:yr-zhang/test-git.git main <span class="comment"># 指定仓库和分支</span></span><br></pre></td></tr></table></figure><h1 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h1><p>上面是单人工作，如果是多人配合开发：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">git branch <span class="comment"># 查看本地分支</span></span><br><span class="line"></span><br><span class="line">git branch -r <span class="comment"># 查看所有远程分支</span></span><br><span class="line"></span><br><span class="line">git branch dev <span class="comment"># 新建一个叫dev的分支</span></span><br><span class="line"></span><br><span class="line">git checkout -b dev <span class="comment"># 新建dev分支并切换到该分支</span></span><br><span class="line"></span><br><span class="line">git checkout dev <span class="comment"># 切换到dev分支上</span></span><br><span class="line"></span><br><span class="line">git branch -d dev <span class="comment"># 删除dev分支</span></span><br><span class="line"></span><br><span class="line">git branch -f dev C6 <span class="comment"># 将dev分支移动到C6版本位置</span></span><br><span class="line"></span><br><span class="line">git checkout C1 <span class="comment"># 分离HEAD并让HEAD指向C1版本</span></span><br><span class="line"></span><br><span class="line">git merge dev <span class="comment"># 指定将dev分支合并当前分支</span></span><br><span class="line"></span><br><span class="line">git push origin --delete dev <span class="comment"># 删除远程到dev分支</span></span><br><span class="line">git branch -dr dev <span class="comment"># 删除远程到dev分支</span></span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase dev <span class="comment"># 将当前的分支移到dev分支下，一起合并成下一个版本</span></span><br></pre></td></tr></table></figure><p>撤销变更：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git reset  C2 <span class="comment"># 直接撤销C2</span></span><br><span class="line"></span><br><span class="line">git revert C2 <span class="comment"># 产生一个C2‘，相当于克隆了一个新分支</span></span><br></pre></td></tr></table></figure><p>选择合并：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick C2 C5 C7 <span class="comment"># 只选择 C2 C5 C7 版本合并，产生C2‘-&gt;C5&#x27;-&gt;C7</span></span><br></pre></td></tr></table></figure><h1 id="练习网站"><a href="#练习网站" class="headerlink" title="练习网站"></a>练习网站</h1><p><a href="https://oschina.gitee.io/learn-git-branching/">https://oschina.gitee.io/learn-git-branching/</a></p>]]></content>
      
      
      <categories>
          
          <category> 编程环境 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
            <tag> Java后端 </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven 安装配置</title>
      <link href="/posts/1470079886.html"/>
      <url>/posts/1470079886.html</url>
      
        <content type="html"><![CDATA[<h1 id="下载-Maven"><a href="#下载-Maven" class="headerlink" title="下载 Maven"></a>下载 Maven</h1><p>在 maven 官网下载，直接搜索 maven 就行，链接：<a href="https://maven.apache.org">https://maven.apache.org</a></p><p>选择左侧 Download，点击进去，找到 Files，选择 Link 下面的 zip 文件下载即可。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/zhang07130711/blog-img/%E6%88%AA%E5%B1%8F2023-01-18%2017.31.37.png" alt="截屏2023-01-18 17.31.37"></p><h1 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h1><p>首先把 maven 放到固定的位置中，以后不要动了，如过要移动也要去改配置文件。</p><p>我先把下载解压后的 maven 放在了<code>/usr/local/devTools</code>下。Windows可以放在一个固定的地方。</p><p>Windows 直接就在设置中找到高级系统设置-》系统属性-〉环境变量-》新建</p><p>新建之后变量名为：MAVEN_HOME</p><p>变量值为 maven 所在路径。</p><p>之后再点击 Path，再点新建，添加：%MAVEN_HOME%\bin</p><hr><p>下面主要讲 Mac。</p><p>打开<code>~/bash_profile</code>配置环境变量：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bash_profile</span><br></pre></td></tr></table></figure><p>编辑环境变量：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> MAVEN_HOME=/opt/devTools/apache-maven-4.0.0-alpha-3 <span class="comment"># 整个maven的路径</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$MAVEN_HOME</span>/bin</span><br></pre></td></tr></table></figure><p>下面的设置都在：<code>/opt/devTools/apache-maven-4.0.0-alpha-3/conf/settings.xml</code>中。也就是 maven 目录下的大 conf 下的 settings.xml 文件下</p><p>Mac 下可以不用配置 Maven 的仓库位置，默认为：<code>Default: $&#123;user.home&#125;/.m2/repository</code>这也就是/Users/你的用户名/.m2/repository</p><p>我配置在：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>/usr/local/devToold/apache-maven-4.0.0-alpha-3/repo<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h1 id="配置仓库镜像源："><a href="#配置仓库镜像源：" class="headerlink" title="配置仓库镜像源："></a>配置仓库镜像源：</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun-public<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun public<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun-central<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun central<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/central<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun-spring<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun spring<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/spring<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun-spring-plugin<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun spring-plugin<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/spring-plugin<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun-apache-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun apache-snapshots<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/apache-snapshots<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun-google<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun google<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/google<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun-gradle-plugin<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun gradle-plugin<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/gradle-plugin<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun-jcenter<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun jcenter<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/jcenter<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun-releases<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun releases<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/releases<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun snapshots<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/snapshots<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun-grails-core<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun grails-core<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/grails-core<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun-mapr-public<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun mapr-public<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/mapr-public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br></pre></td></tr></table></figure><p>我只配置了：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-aliyun<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus aliyun<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其中千万要切记一点<code>&lt;mirrorof&gt;&lt;/mirrorof&gt;</code> 里面千万不能配置<em>号，如果不配置 </em> ，假设 aliyun maven 没有的话就会去国外仓库下载，如果配置了 *号 ，那阿里云仓库没有，就会报错.</p><hr><h1 id="配置-jdk17"><a href="#配置-jdk17" class="headerlink" title="配置 jdk17"></a>配置 jdk17</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>jdk-17<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">jdk</span>&gt;</span>17<span class="tag">&lt;/<span class="name">jdk</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>17<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>17<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maven.compiler.compilerVersion</span>&gt;</span>17<span class="tag">&lt;/<span class="name">maven.compiler.compilerVersion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="在-IDEA-中设置"><a href="#在-IDEA-中设置" class="headerlink" title="在 IDEA 中设置"></a>在 IDEA 中设置</h1><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YongRuiZhang/blog-img/%E6%88%AA%E5%B1%8F2023-01-19%2017.14.07.png" alt="截屏2023-01-19 17.14.07"></p><p>配置 IDEA 在没有网的情况下也可以创建 maven 工程：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YongRuiZhang/blog-img/%E6%88%AA%E5%B1%8F2023-01-19%2017.42.33.png" alt="截屏2023-01-19 17.42.33"></p>]]></content>
      
      
      <categories>
          
          <category> 编程环境 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
            <tag> Java后端 </tag>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Homebrew</title>
      <link href="/posts/1470079885.html"/>
      <url>/posts/1470079885.html</url>
      
        <content type="html"><![CDATA[<h1 id="安装脚本"><a href="#安装脚本" class="headerlink" title="安装脚本"></a>安装脚本</h1><p>（推荐） 完全体 安装两分钟左右：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/zsh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure><p>精简版：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/zsh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)</span>&quot;</span> speed</span><br></pre></td></tr></table></figure><p>安装完成后输入<code>brew -v</code>遇到问题：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fatal: detected dubious ownership <span class="keyword">in</span> repository at <span class="string">&#x27;/opt/homebrew/Library/Taps/homebrew/homebrew-core&#x27;</span></span><br><span class="line">To add an exception <span class="keyword">for</span> this directory, call:</span><br><span class="line"></span><br><span class="line">git config --global --add safe.directory /opt/homebrew/Library/Taps/homebrew/homebrew-core</span><br><span class="line">Homebrew/homebrew-core (no Git repository)</span><br><span class="line">fatal: detected dubious ownership <span class="keyword">in</span> repository at <span class="string">&#x27;/opt/homebrew/Library/Taps/homebrew/homebrew-cask&#x27;</span></span><br><span class="line">To add an exception <span class="keyword">for</span> this directory, call:</span><br><span class="line"></span><br><span class="line">git config --global --add safe.directory /opt/homebrew/Library/Taps/homebrew/homebrew-cask</span><br><span class="line">Homebrew/homebrew-cask (no Git repository)</span><br></pre></td></tr></table></figure><p>解决办法（根据提示，执行命令）：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global --add safe.directory /opt/homebrew/Library/Taps/homebrew/homebrew-core</span><br><span class="line">git config --global --add safe.directory /opt/homebrew/Library/Taps/homebrew/homebrew-cask</span><br></pre></td></tr></table></figure><h1 id="卸载脚本"><a href="#卸载脚本" class="headerlink" title="卸载脚本"></a>卸载脚本</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/zsh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/HomebrewUninstall.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure><h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><p>查找：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew search git</span><br></pre></td></tr></table></figure><p>下载：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install git</span><br></pre></td></tr></table></figure><p>重新下载；</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew reinstall git</span><br></pre></td></tr></table></figure><p>卸载：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew uninstall git</span><br></pre></td></tr></table></figure><h1 id="ohmyzsh"><a href="#ohmyzsh" class="headerlink" title="ohmyzsh"></a>ohmyzsh</h1><p>我尝试了官网的命令下载，不行，链接不上主机。</p><p>下载 oh-my-zsh 的下载命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://gitee.com/mirrors/oh-my-zsh/raw/master/tools/install.sh</span><br></pre></td></tr></table></figure><p>添加可执行权限：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x install.sh</span><br></pre></td></tr></table></figure><p>执行 install.sh</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./install.sh</span><br></pre></td></tr></table></figure><p>修改配置：</p><ul><li><p>环境变量：</p><p>将第二排的 # 号删就可以加载原本配置在 bash 中的环境了。当然还可以在后面加两行，更保险：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure></li><li><p>主题：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZSH_THEME=<span class="string">&quot;robbyrussell&quot;</span></span><br></pre></td></tr></table></figure><p>改为：</p><p>可以在 oh-my-zsh 官网点击 themes 跳转查看各种主题。</p><p>我比较喜欢：jonathan</p><p>大家一般推荐：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZSH_THEME=<span class="string">&quot;ys&quot;</span></span><br></pre></td></tr></table></figure><p>当然也可以选择 powerlevel10k，但是要配置很多东西，我也不太喜欢，即没弄。</p></li><li><p>修改插件：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plugins=(git)</span><br></pre></td></tr></table></figure><p>改为（添加代码高亮和代码建议）：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plugins=(git zsh-syntx-highlighting zsh-autosuggestions)</span><br></pre></td></tr></table></figure><p>如果 not found：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-syntax-highlighting.git <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-syntax-highlighting</span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-autosuggestions <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-autosuggestions</span><br></pre></td></tr></table></figure><p>最后</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> 编程环境 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
            <tag> 资源下载 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac环境变量配置文件</title>
      <link href="/posts/1470079884.html"/>
      <url>/posts/1470079884.html</url>
      
        <content type="html"><![CDATA[<h1 id="Mac-下的环境变量配置文件"><a href="#Mac-下的环境变量配置文件" class="headerlink" title="Mac 下的环境变量配置文件"></a>Mac 下的环境变量配置文件</h1><ul><li>/etc/paths</li><li>/etc/profile</li><li>~/.bash_profile</li><li>~/.bash_login</li><li>~/.profile</li><li>~/.bashrc</li></ul><p>​ 前两个时系统级别的配置文件，后面四个时用户级别。</p><p>加载顺序：从上到下；但是如果～/.bash_profile 文件存在，那么后面三个就会被忽略。其中～/.bashrc 是当 bash shell 被打开是才加载，其他的都是系统启动后就加载了。</p><p>如过环境变量在 zsh shell 环境下无效（只在 bash shell 下有效），则可以在～/.zshenv 或者~/.zshrc 文件中添加命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure><p>​ 打开 zsh shell 时会顺序加载/.zshenv、~/.zshrc 文件，添加这两条命令就会去调用外部脚本文件。</p><blockquote><p>综上，一般配置环境变量在~/.bash_profile 中就好了。</p></blockquote><h1 id="查看-macOS-全部环境变量"><a href="#查看-macOS-全部环境变量" class="headerlink" title="查看 macOS 全部环境变量"></a>查看 macOS 全部环境变量</h1><p>输入命令<code>export</code>就可以查看全部的环境变量</p><h1 id="配置环境变量的语句"><a href="#配置环境变量的语句" class="headerlink" title="配置环境变量的语句"></a>配置环境变量的语句</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME=<span class="string">&quot;/路径&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME</span><br><span class="line"></span><br><span class="line">PATH=<span class="string">&quot;.:.<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> PATH</span><br></pre></td></tr></table></figure><p>​ 其中是先给一个变量赋值，再暴露出去，<code>$变量名</code>是引用变量内容。</p><p>当然，也可以直接：<code>export JAVA_HOME=&quot;/路径&quot;</code></p>]]></content>
      
      
      <categories>
          
          <category> 编程环境 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
            <tag> 环境变量 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>first test</title>
      <link href="/posts/1410315814.html"/>
      <url>/posts/1410315814.html</url>
      
        <content type="html"><![CDATA[<h1 id="标题一"><a href="#标题一" class="headerlink" title="标题一"></a>标题一</h1><blockquote><p>引用</p></blockquote><pre><code>引用内容</code></pre><ul><li>无序列表 1</li><li>无序列表 2</li><li>无序列表 3</li></ul><ol><li>有序列表 1</li><li>有序列表 2</li><li>有序列表 3</li></ol><p>基本代码块：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Hello My Blog! 你好，我的博客&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="标题二"><a href="#标题二" class="headerlink" title="标题二"></a>标题二</h1><h2 id="长代码块"><a href="#长代码块" class="headerlink" title="长代码块"></a>长代码块</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br></pre></td></tr></table></figure><h2 id="宽代码块"><a href="#宽代码块" class="headerlink" title="宽代码块"></a>宽代码块</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>; cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>; cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>; cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>; cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>; cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>; cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>; cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br></pre></td></tr></table></figure><h2 id="复合代码块"><a href="#复合代码块" class="headerlink" title="复合代码块"></a>复合代码块</h2><p>以 Hello World 为例，不同语言的代码风格：</p><div class="tabs" id="helloworld"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#helloworld-1">c++</button></li><li class="tab"><button type="button" data-href="#helloworld-2">java</button></li><li class="tab"><button type="button" data-href="#helloworld-3">javascript</button></li><li class="tab"><button type="button" data-href="#helloworld-4">python</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="helloworld-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Hello World1!&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="helloworld-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="helloworld-3"><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">consle.<span class="title function_">log</span>(<span class="string">&quot;Hello World!&quot;</span>);</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="helloworld-4"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello World!&quot;</span>)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="Echarts"><a href="#Echarts" class="headerlink" title="Echarts"></a>Echarts</h1>    <div id="echarts3154" style="width: 100%;height: 400px;margin: 0 auto"></div>    <script src="https://cdn.jsdelivr.net/npm/echarts@4.9.0/dist/echarts.min.js"></script>    <script type="text/javascript">            var myChart = echarts.init(document.getElementById('echarts3154'));            // 指定图表的配置项和数据var option = {    title: {        text: 'ECharts 标签示例'    },    tooltip: {},    legend: {        data:['销量']    },    xAxis: {        data: ["衬衫","羊毛衫","雪纺衫","裤子","高跟鞋","袜子"]    },    yAxis: {},    series: [{        name: '销量',        type: 'bar',        data: [5, 20, 36, 10, 10, 20]    }]};            myChart.setOption(option);    </script>    ]]></content>
      
      
      <categories>
          
          <category> 博客搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 测试 </tag>
            
            <tag> 博客搭建 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
